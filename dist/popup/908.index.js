"use strict";(self.webpackChunksymbiont=self.webpackChunksymbiont||[]).push([[908],{908:(e,s,i)=>{i.r(s),i.d(s,{default:()=>o});var n=i(848),t=i(540),r=i(23),a=i(513);const c=[{id:"meditation",name:"Méditation Quantique",description:"Augmente la conscience par la contemplation des motifs fractals",type:"individual",icon:"🧘‍♀️",cost:10,cooldown:3e5,effects:{consciousness:.1,energy:-.05},requirements:{minConsciousness:.2}},{id:"mutation_ritual",name:"Rituel de Mutation",description:"Force une mutation contrôlée de votre organisme",type:"individual",icon:"🧬",cost:25,cooldown:18e5,effects:{mutations:1,energy:-.2},requirements:{minGeneration:2}},{id:"energy_harvest",name:"Collecte d'Énergie",description:"Puise dans les flux cosmiques pour restaurer votre énergie",type:"individual",icon:"⚡",cost:5,cooldown:12e4,effects:{energy:.3},requirements:{}},{id:"collective_awakening",name:"Éveil Collectif",description:"Synchronise avec d'autres organismes pour un éveil de conscience",type:"collective",icon:"🌟",cost:50,cooldown:72e5,effects:{consciousness:.25,traits:{empathy:.1,creativity:.1}},requirements:{minConsciousness:.5}},{id:"symbiosis_secret",name:"Pacte de Symbiose",description:"Rituel secret qui lie deux organismes dans une évolution partagée",type:"secret",icon:"🔮",cost:100,cooldown:864e5,effects:{consciousness:.5,traits:{empathy:.3,creativity:.2}},requirements:{minGeneration:3,secretCode:"SYMBIOSIS"}},{id:"neural_sync",name:"Synchronisation Neurale",description:"Aligne vos patterns neuronaux avec la fréquence universelle",type:"individual",icon:"🧠",cost:30,cooldown:27e5,effects:{consciousness:.15,traits:{focus:.15,curiosity:.1}},requirements:{minConsciousness:.4}}],o=()=>{const{organism:e}=(0,r.YT)(),[s,i]=(0,t.useState)("rituals"),[o,l]=(0,t.useState)(""),[d,u]=(0,t.useState)(!1),[m,h]=(0,t.useState)(null),[f,p]=(0,t.useState)([]),[x,v]=(0,t.useState)({}),[j,y]=(0,t.useState)([]);(0,t.useEffect)((()=>{try{const e=localStorage.getItem("symbiont_ritual_history");e&&p(JSON.parse(e));const s=localStorage.getItem("symbiont_ritual_cooldowns");s&&v(JSON.parse(s))}catch(e){a.vF.warn("Erreur lors du chargement de l'historique des rituels")}}),[]),(0,t.useEffect)((()=>{const e=setInterval((()=>{const e=Date.now();v((s=>{const i={...s};let n=!1;return Object.keys(i).forEach((s=>{i[s]<=e&&(delete i[s],n=!0,N(`Le rituel ${c.find((e=>e.id===s))?.name} est à nouveau disponible !`))})),n&&localStorage.setItem("symbiont_ritual_cooldowns",JSON.stringify(i)),i}))}),1e3);return()=>clearInterval(e)}),[]),(0,t.useEffect)((()=>{if(!m||m.completed)return;const e=setInterval((()=>{h((e=>{if(!e)return null;const s=Date.now()-e.startTime,i=Math.min(1,s/e.duration);return i>=1?(b(e.ritualId),{...e,progress:1,completed:!0}):{...e,progress:i}}))}),100);return()=>clearInterval(e)}),[m]);const N=e=>{y((s=>[...s,e])),setTimeout((()=>{y((e=>e.slice(1)))}),4e3)},g=s=>{if(!e)return{canPerform:!1,reason:"Organisme non trouvé"};if(x[s.id]&&x[s.id]>Date.now()){const e=x[s.id]-Date.now();return{canPerform:!1,reason:`Cooldown: ${Math.ceil(e/6e4)}min restantes`}}if(100*(e.energy||0)<s.cost)return{canPerform:!1,reason:"Énergie insuffisante"};if(s.requirements){if(s.requirements.minConsciousness&&(e.consciousness||0)<s.requirements.minConsciousness)return{canPerform:!1,reason:`Conscience minimum: ${(100*s.requirements.minConsciousness).toFixed(0)}%`};if(s.requirements.minGeneration&&(e.generation||1)<s.requirements.minGeneration)return{canPerform:!1,reason:`Génération minimum: ${s.requirements.minGeneration}`};if(s.requirements.secretCode)return{canPerform:!1,reason:"Code secret requis"}}return{canPerform:!0}},C=(s,i)=>{const n=g(s);if(!n.canPerform)return void N(`Impossible: ${n.reason}`);if(s.requirements?.secretCode&&i!==s.requirements.secretCode)return void N("Code secret incorrect !");const t="collective"===s.type?6e4:3e4,r={ritualId:s.id,startTime:Date.now(),duration:t,progress:0,completed:!1};if(h(r),N(`Rituel "${s.name}" commencé !`),e){const i={...e,energy:Math.max(0,(e.energy||0)-s.cost/100)};localStorage.setItem("symbiont_organism",JSON.stringify(i))}},b=s=>{const i=c.find((e=>e.id===s));if(!i||!e)return;const n={...e};if(i.effects.consciousness&&(n.consciousness=Math.min(1,(e.consciousness||0)+i.effects.consciousness)),i.effects.energy&&(n.energy=Math.max(0,Math.min(1,(e.energy||0)+i.effects.energy))),i.effects.mutations){const s={id:`ritual_${Date.now()}`,type:"ritual",timestamp:Date.now(),effect:`Mutation induite par ${i.name}`,magnitude:.1};n.mutations=[...e.mutations||[],s]}i.effects.traits&&Object.entries(i.effects.traits).forEach((([e,s])=>{void 0!==n.traits[e]&&void 0!==s&&(n.traits[e]=Math.min(1,n.traits[e]+s))})),localStorage.setItem("symbiont_organism",JSON.stringify(n));const t={...x,[s]:Date.now()+i.cooldown};v(t),localStorage.setItem("symbiont_ritual_cooldowns",JSON.stringify(t));const r=[{ritualId:s,completedAt:Date.now(),effects:i.effects},...f].slice(0,50);p(r),localStorage.setItem("symbiont_ritual_history",JSON.stringify(r)),N(`Rituel "${i.name}" terminé ! Effets appliqués.`),h(null)},w=()=>{const e=c.filter((e=>e.requirements?.secretCode)).find((e=>e.requirements?.secretCode===o.toUpperCase()));e?(C(e,o.toUpperCase()),l(""),u(!1)):N("Code secret inconnu...")};return e?(0,n.jsxs)("div",{className:"mystical-panel",children:[(0,n.jsx)("div",{className:"notifications",children:j.map(((e,s)=>(0,n.jsx)("div",{className:"notification",children:e},s)))}),d&&(0,n.jsx)("div",{className:"secret-modal",children:(0,n.jsxs)("div",{className:"modal-content",children:[(0,n.jsx)("h3",{children:"🔮 Code Secret Requis"}),(0,n.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value.toUpperCase()),placeholder:"ENTREZ LE CODE",className:"secret-input",autoFocus:!0}),(0,n.jsxs)("div",{className:"modal-buttons",children:[(0,n.jsx)("button",{onClick:w,className:"btn-primary",children:"Confirmer"}),(0,n.jsx)("button",{onClick:()=>{u(!1),l("")},className:"btn-secondary",children:"Annuler"})]})]})}),(0,n.jsx)("div",{className:"mystical-nav",children:[{key:"rituals",label:"Rituels",icon:"🔮"},{key:"active",label:"Actif",icon:"⚡"},{key:"history",label:"Historique",icon:"📜"},{key:"secrets",label:"Secrets",icon:"🗝️"}].map((e=>(0,n.jsxs)("button",{onClick:()=>i(e.key),className:"mystical-nav-btn "+(s===e.key?"active":""),children:[(0,n.jsx)("span",{className:"nav-icon",children:e.icon}),(0,n.jsx)("span",{className:"nav-label",children:e.label})]},e.key)))}),(0,n.jsxs)("div",{className:"mystical-content",children:["rituals"===s&&(0,n.jsx)("div",{className:"rituals-grid",children:c.map((e=>{const s=g(e),i=x[e.id]&&x[e.id]>Date.now(),t=i?x[e.id]-Date.now():0;return(0,n.jsxs)("div",{className:`ritual-card ${s.canPerform?"":"disabled"} ${e.type}`,children:[(0,n.jsxs)("div",{className:"ritual-header",children:[(0,n.jsx)("span",{className:"ritual-icon",children:e.icon}),(0,n.jsx)("h4",{className:"ritual-name",children:e.name}),(0,n.jsx)("span",{className:"ritual-type",children:e.type})]}),(0,n.jsx)("p",{className:"ritual-description",children:e.description}),(0,n.jsxs)("div",{className:"ritual-stats",children:[(0,n.jsxs)("div",{className:"stat",children:[(0,n.jsx)("span",{className:"label",children:"Coût:"}),(0,n.jsxs)("span",{className:"value",children:[e.cost," énergie"]})]}),(0,n.jsxs)("div",{className:"stat",children:[(0,n.jsx)("span",{className:"label",children:"Cooldown:"}),(0,n.jsxs)("span",{className:"value",children:[Math.round(e.cooldown/6e4),"min"]})]})]}),e.effects&&(0,n.jsxs)("div",{className:"ritual-effects",children:[(0,n.jsx)("h5",{children:"Effets:"}),(0,n.jsxs)("ul",{children:[e.effects.consciousness&&(0,n.jsxs)("li",{children:["+",(100*e.effects.consciousness).toFixed(0),"% conscience"]}),e.effects.energy&&(0,n.jsxs)("li",{children:[e.effects.energy>0?"+":"",(100*e.effects.energy).toFixed(0),"% énergie"]}),e.effects.mutations&&(0,n.jsxs)("li",{children:["+",e.effects.mutations," mutation(s)"]}),e.effects.traits&&Object.entries(e.effects.traits).map((([e,s])=>(0,n.jsxs)("li",{children:["+",(100*(s||0)).toFixed(0),"% ",e]},e)))]})]}),i&&(0,n.jsx)("div",{className:"cooldown-display",children:(0,n.jsxs)("span",{children:["⏳ ",Math.ceil(t/6e4),"min restantes"]})}),!s.canPerform&&!i&&(0,n.jsxs)("div",{className:"requirement-warning",children:["⚠️ ",s.reason]}),(0,n.jsx)("button",{className:"ritual-button",onClick:()=>"secret"===e.type?(e=>{e.requirements?.secretCode?u(!0):C(e)})(e):C(e),disabled:!s.canPerform,children:"secret"===e.type?"Entrer Code":"Commencer"})]},e.id)}))}),"active"===s&&(0,n.jsx)("div",{className:"active-session",children:m?(0,n.jsxs)("div",{className:"session-display",children:[(0,n.jsx)("h3",{children:"🔮 Rituel en cours"}),(0,n.jsxs)("div",{className:"ritual-info",children:[(0,n.jsx)("span",{className:"ritual-icon",children:c.find((e=>e.id===m.ritualId))?.icon}),(0,n.jsx)("h4",{children:c.find((e=>e.id===m.ritualId))?.name})]}),(0,n.jsxs)("div",{className:"progress-container",children:[(0,n.jsx)("div",{className:"progress-bar",children:(0,n.jsx)("div",{className:"progress-fill",style:{width:100*m.progress+"%"}})}),(0,n.jsxs)("span",{className:"progress-text",children:[(100*m.progress).toFixed(0),"%"]})]}),(0,n.jsxs)("div",{className:"session-effects",children:[(0,n.jsx)("p",{children:"✨ Concentrez-vous sur les flux énergétiques..."}),(0,n.jsxs)("div",{className:"energy-waves",children:[(0,n.jsx)("div",{className:"wave"}),(0,n.jsx)("div",{className:"wave"}),(0,n.jsx)("div",{className:"wave"})]})]})]}):(0,n.jsxs)("div",{className:"no-session",children:[(0,n.jsx)("h3",{children:"Aucun rituel actif"}),(0,n.jsx)("p",{children:"Commencez un rituel pour voir la progression ici."}),(0,n.jsx)("button",{onClick:()=>i("rituals"),className:"btn-primary",children:"Voir les rituels"})]})}),"history"===s&&(0,n.jsxs)("div",{className:"ritual-history",children:[(0,n.jsx)("h3",{children:"📜 Historique des Rituels"}),0===f.length?(0,n.jsx)("p",{children:"Aucun rituel accompli pour le moment."}):(0,n.jsx)("div",{className:"history-list",children:f.map(((e,s)=>{const i=c.find((s=>s.id===e.ritualId));return(0,n.jsxs)("div",{className:"history-entry",children:[(0,n.jsxs)("div",{className:"entry-header",children:[(0,n.jsx)("span",{className:"ritual-icon",children:i?.icon}),(0,n.jsx)("h4",{children:i?.name}),(0,n.jsx)("span",{className:"completion-date",children:new Date(e.completedAt).toLocaleDateString()})]}),(0,n.jsx)("div",{className:"entry-effects",children:Object.entries(e.effects).map((([e,s])=>(0,n.jsxs)("span",{className:"effect-tag",children:[e,": ","number"==typeof s?(s>0?"+":"")+(100*s).toFixed(0)+"%":String(s)]},e)))})]},s)}))})]}),"secrets"===s&&(0,n.jsxs)("div",{className:"secrets-section",children:[(0,n.jsx)("h3",{children:"🔮 Rituels Secrets"}),(0,n.jsx)("p",{children:"Certains rituels ne peuvent être activés qu'avec des codes secrets spéciaux..."}),(0,n.jsxs)("div",{className:"secret-input-section",children:[(0,n.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value.toUpperCase()),placeholder:"ENTREZ LE CODE SECRET",className:"secret-input",maxLength:20}),(0,n.jsx)("button",{onClick:w,className:"btn-secret",disabled:!o.trim(),children:"Révéler"})]}),(0,n.jsxs)("div",{className:"hints-section",children:[(0,n.jsx)("h4",{children:"💡 Indices"}),(0,n.jsxs)("ul",{className:"hint-list",children:[(0,n.jsx)("li",{children:"🤝 L'union fait la force..."}),(0,n.jsx)("li",{children:"🧬 La vie s'épanouit par la coopération"}),(0,n.jsx)("li",{children:"🌱 Deux organismes peuvent ne faire qu'un"})]})]}),(0,n.jsxs)("div",{className:"discovered-secrets",children:[(0,n.jsx)("h4",{children:"🏆 Secrets Découverts"}),c.filter((e=>"secret"===e.type)).map((e=>{const s=f.some((s=>s.ritualId===e.id));return(0,n.jsxs)("div",{className:"secret-ritual "+(s?"discovered":"hidden"),children:[(0,n.jsx)("span",{children:s?e.icon:"❓"}),(0,n.jsx)("span",{children:s?e.name:"???"})]},e.id)}))]})]})]})]}):(0,n.jsx)("div",{className:"mystical-panel loading",children:(0,n.jsx)("h3",{children:"🔮 Initialisation des flux mystiques..."})})}}}]);