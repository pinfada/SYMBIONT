"use strict";(self.webpackChunksymbiont=self.webpackChunksymbiont||[]).push([[824],{824:(e,s,t)=>{t.r(s),t.d(s,{SettingsPanel:()=>i,default:()=>r});var a=t(848),n=t(540),l=t(526),c=t(513);const i=()=>{const{theme:e,setTheme:s}=(()=>{const[e,s]=(0,n.useState)("auto");return(0,n.useEffect)((()=>{chrome.storage.local.get(["theme"],(e=>{e.theme&&s(e.theme)}))}),[]),(0,n.useEffect)((()=>{const s=()=>{const s=window.matchMedia("(prefers-color-scheme: dark)").matches,t="auto"===e?s?"dark":"light":e;document.documentElement.setAttribute("data-theme",t)};s();const t=window.matchMedia("(prefers-color-scheme: dark)");return t.addEventListener("change",s),()=>t.removeEventListener("change",s)}),[e]),{theme:e,setTheme:e=>{s(e),chrome.storage.local.set({theme:e})}}})(),[i,r]=(0,n.useState)({theme:"auto",notifications:!0,autoMutate:!1,mutationSpeed:1,visualQuality:"high"}),[o,d]=(0,n.useState)(!1),[h,m]=(0,n.useState)({USE_REAL_DNA:!1,USE_REAL_BEHAVIOR:!1,USE_REAL_NETWORK:!1,USE_BACKEND_API:!1});(0,n.useEffect)((()=>{x(),u()}),[]);const x=async()=>{const e=new l.p;await e.initialize();const s=await e.getSetting("userPreferences",i);s&&r(s)},u=async()=>{try{const{RealDataService:e}=await t.e(605).then(t.bind(t,605)),s=e.getFeatureStatus();m(s)}catch(e){c.vF.warn("Impossible de charger les feature flags:",e)}},g=(e,s)=>{r((t=>({...t,[e]:s})))},f=async e=>{try{const{RealDataService:s}=await t.e(605).then(t.bind(t,605)),a=h[e];a?s.disableFeature(e):s.enableFeature(e),m((s=>({...s,[e]:!a}))),"USE_BACKEND_API"===e&&setTimeout((()=>window.location.reload()),100)}catch(e){c.vF.error("Erreur toggle feature flag:",e)}};return(0,a.jsxs)("div",{className:"ext-settings-panel max-w-lg mx-auto p-6 bg-white rounded-xl shadow-lg mt-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-center text-[#00e0ff] mb-6",children:"ParamÃ¨tres"}),(0,a.jsxs)("section",{className:"ext-settings-section mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-[#00e0ff] mb-2",children:"PrÃ©fÃ©rences utilisateur"}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:i.notifications,onChange:e=>g("notifications",e.target.checked)})," Notifications"]}),(0,a.jsxs)("label",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:i.autoMutate,onChange:e=>g("autoMutate",e.target.checked)})," Mutation automatique"]}),(0,a.jsxs)("label",{className:"flex items-center gap-2",children:["QualitÃ© visuelleÂ :",(0,a.jsxs)("select",{value:i.visualQuality,onChange:e=>g("visualQuality",e.target.value),className:"ml-2 rounded-md border px-2 py-1",children:[(0,a.jsx)("option",{value:"high",children:"Haute"}),(0,a.jsx)("option",{value:"medium",children:"Moyenne"}),(0,a.jsx)("option",{value:"low",children:"Basse"})]})]})]})]}),(0,a.jsxs)("section",{className:"ext-settings-section",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-[#00e0ff] mb-2",children:"ThÃ¨me"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("button",{onClick:()=>s("light"),className:"rounded-lg px-4 py-2 font-bold "+("light"===e?"bg-[#00e0ff] text-[#181c22]":"bg-[#eaf6fa] text-[#232946]"),children:"Clair"}),(0,a.jsx)("button",{onClick:()=>s("dark"),className:"rounded-lg px-4 py-2 font-bold "+("dark"===e?"bg-[#00e0ff] text-[#181c22]":"bg-[#232946] text-white"),children:"Sombre"}),(0,a.jsx)("button",{onClick:()=>s("auto"),className:"rounded-lg px-4 py-2 font-bold "+("auto"===e?"bg-[#00e0ff] text-[#181c22]":"bg-[#888] text-white"),children:"Auto"})]})]}),(0,a.jsxs)("section",{className:"ext-settings-section",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-[#00e0ff] mb-2",children:"ðŸ’¾ DonnÃ©es"}),(0,a.jsx)("div",{className:"flex flex-col gap-4",children:(0,a.jsxs)("label",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:o,onChange:e=>d(e.target.checked)})," Sauvegarde automatique"]})})]}),(0,a.jsxs)("section",{className:"ext-settings-section",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-[#00e0ff] mb-2",children:"ðŸš€ DonnÃ©es RÃ©elles (Mode AvancÃ©)"}),(0,a.jsxs)("p",{className:"section-description",children:["Activez progressivement les vraies donnÃ©es pour remplacer le mode dÃ©mo.",(0,a.jsx)("br",{}),"âš ï¸ NÃ©cessite un rechargement de l'extension aprÃ¨s activation."]}),(0,a.jsxs)("div",{className:"feature-flags-grid",children:[(0,a.jsxs)("div",{className:"feature-flag-item",children:[(0,a.jsxs)("div",{className:"flag-info",children:[(0,a.jsx)("h4",{children:"ðŸ§¬ ADN Comportemental"}),(0,a.jsx)("p",{children:"GÃ©nÃ¨re l'ADN basÃ© sur vos vrais patterns de navigation"})]}),(0,a.jsxs)("label",{className:"toggle-switch",children:[(0,a.jsx)("input",{type:"checkbox",checked:h.USE_REAL_DNA,onChange:()=>f("USE_REAL_DNA").catch(console.error)}),(0,a.jsx)("span",{className:"toggle-slider"})]})]}),(0,a.jsxs)("div",{className:"feature-flag-item",children:[(0,a.jsxs)("div",{className:"flag-info",children:[(0,a.jsx)("h4",{children:"ðŸ“Š MÃ©triques SystÃ¨me"}),(0,a.jsx)("p",{children:"Collecte les vraies mÃ©triques de performance du navigateur"})]}),(0,a.jsxs)("label",{className:"toggle-switch",children:[(0,a.jsx)("input",{type:"checkbox",checked:h.USE_REAL_BEHAVIOR,onChange:()=>f("USE_REAL_BEHAVIOR").catch(console.error)}),(0,a.jsx)("span",{className:"toggle-slider"})]})]}),(0,a.jsxs)("div",{className:"feature-flag-item",children:[(0,a.jsxs)("div",{className:"flag-info",children:[(0,a.jsx)("h4",{children:"ðŸŒ RÃ©seau Social"}),(0,a.jsx)("p",{children:"Connecte au rÃ©seau SYMBIONT rÃ©el (nÃ©cessite backend)"})]}),(0,a.jsxs)("label",{className:"toggle-switch",children:[(0,a.jsx)("input",{type:"checkbox",checked:h.USE_REAL_NETWORK,onChange:()=>f("USE_REAL_NETWORK").catch(console.error)}),(0,a.jsx)("span",{className:"toggle-slider"})]})]}),(0,a.jsxs)("div",{className:"feature-flag-item",children:[(0,a.jsxs)("div",{className:"flag-info",children:[(0,a.jsx)("h4",{children:"ðŸ”Œ API Backend"}),(0,a.jsx)("p",{children:"Utilise l'API serveur pour synchroniser les donnÃ©es"})]}),(0,a.jsxs)("label",{className:"toggle-switch",children:[(0,a.jsx)("input",{type:"checkbox",checked:h.USE_BACKEND_API,onChange:()=>f("USE_BACKEND_API").catch(console.error)}),(0,a.jsx)("span",{className:"toggle-slider"})]})]})]}),(0,a.jsxs)("div",{className:"migration-actions",children:[(0,a.jsx)("button",{onClick:async()=>{try{const{realDataService:e}=await t.e(605).then(t.bind(t,605)),s=localStorage.getItem("symbiont_user_id")||"default-user";await e.migrateToRealData(s),alert("âœ… Migration vers vraies donnÃ©es rÃ©ussie ! Rechargez l'extension.")}catch(e){c.vF.error("Erreur migration:",e),alert("âŒ Erreur lors de la migration. Voir console.")}},className:"btn-primary migration-btn",disabled:!h.USE_REAL_DNA,children:"ðŸ”„ Migrer vers Vraies DonnÃ©es"}),(0,a.jsx)("p",{className:"migration-note",children:"Cette action gÃ©nÃ¨re un nouvel ADN basÃ© sur vos donnÃ©es de navigation rÃ©elles"})]})]}),(0,a.jsx)("div",{className:"flex justify-end mt-6",children:(0,a.jsx)("button",{onClick:async()=>{const e=new l.p;await e.initialize(),await e.setSetting("userPreferences",i)},className:"bg-[#00e0ff] text-[#181c22] rounded-lg px-5 py-2 font-bold cursor-pointer",children:"Enregistrer"})})]})},r=i}}]);