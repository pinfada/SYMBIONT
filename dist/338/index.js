"use strict";(self.webpackChunksymbiont=self.webpackChunksymbiont||[]).push([[338],{957:(n,t,a)=>{a.r(t),a.d(t,{OrganismViewer:()=>i});var e=a(848),o=a(540),r=a(23);const i=()=>{const n=(0,o.useRef)(null),{organism:t}=(0,r.YT)(),[a,i]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{if(!n.current||!t)return;const a=n.current,e=a.getContext("2d");if(!e)return;let o;const r=()=>{const n=.001*Date.now();e.clearRect(0,0,a.width,a.height);const i=a.width/2,s=a.height/2,d=e.createRadialGradient(i,s,0,i,s,250);d.addColorStop(0,"#0a0d15"),d.addColorStop(.3,"#12151f"),d.addColorStop(.7,"#1a1f2e"),d.addColorStop(1,"#0f1419"),e.fillStyle=d,e.fillRect(0,0,a.width,a.height);for(let t=0;t<15;t++){const o=(127*t+20*n)%a.width,r=(73*t+15*n)%a.height,i=1+.5*Math.sin(3*n+t),s=.1+.1*Math.sin(2*n+.5*t);e.fillStyle=`rgba(0, 224, 255, ${s})`,e.beginPath(),e.arc(o,r,i,0,2*Math.PI),e.fill()}const l=t.dna.split("").reduce(((n,t)=>n+t.charCodeAt(0)),0),c=6+l%6,p=60+l%40+10*Math.sin(2*n),g=.5*n;for(let t=0;t<c;t++){const a=t/c*Math.PI*2+g,o=i+Math.cos(a)*p,r=s+Math.sin(a)*p,d=6*Math.sin(3*n+t)+18,l=e.createRadialGradient(o,r,0,o,r,1.5*d);l.addColorStop(0,"rgba(0, 224, 255, 0.4)"),l.addColorStop(.3,"rgba(79, 195, 247, 0.2)"),l.addColorStop(.7,"rgba(156, 106, 222, 0.1)"),l.addColorStop(1,"transparent"),e.fillStyle=l,e.beginPath(),e.arc(o,r,1.5*d,0,2*Math.PI),e.fill();const h=e.createRadialGradient(o,r,0,o,r,d);h.addColorStop(0,"#00e0ff"),h.addColorStop(.3,"#4fc3f7"),h.addColorStop(.7,"#9c6ade"),h.addColorStop(1,"transparent"),e.fillStyle=h,e.beginPath(),e.arc(o,r,d,0,2*Math.PI),e.fill();const f=e.createRadialGradient(o,r,0,o,r,.4*d);f.addColorStop(0,"rgba(255, 255, 255, 0.8)"),f.addColorStop(.5,"rgba(0, 224, 255, 0.6)"),f.addColorStop(1,"transparent"),e.fillStyle=f,e.beginPath(),e.arc(o,r,.4*d,0,2*Math.PI),e.fill();const u=.4+.3*Math.sin(2*n+.5*t),m=2+.5*Math.sin(4*n+t),b=e.createLinearGradient(i,s,o,r);b.addColorStop(0,`rgba(0, 224, 255, ${.8*u})`),b.addColorStop(.5,`rgba(79, 195, 247, ${u})`),b.addColorStop(1,`rgba(156, 106, 222, ${.6*u})`),e.strokeStyle=b,e.lineWidth=m,e.lineCap="round",e.shadowColor="#00e0ff",e.shadowBlur=8,e.beginPath(),e.moveTo(i,s),e.lineTo(o,r),e.stroke(),e.shadowBlur=0;const x=(n+.3*t)%2;if(x<=1){const a=i+(o-i)*x,d=s+(r-s)*x,l=3+1*Math.sin(6*n+t);e.fillStyle=`rgba(255, 255, 255, ${.8*(1-x)})`,e.beginPath(),e.arc(a,d,l,0,2*Math.PI),e.fill()}}const h=t.consciousness||.5,f=30+20*h+10*Math.sin(4*n),u=e.createRadialGradient(i,s,0,i,s,1.8*f);u.addColorStop(0,`rgba(0, 224, 255, ${.3*h})`),u.addColorStop(.4,`rgba(79, 195, 247, ${.2*h})`),u.addColorStop(.8,`rgba(156, 106, 222, ${.1*h})`),u.addColorStop(1,"transparent"),e.fillStyle=u,e.beginPath(),e.arc(i,s,1.8*f,0,2*Math.PI),e.fill();const m=e.createRadialGradient(i,s,0,i,s,f);m.addColorStop(0,"#ffffff"),m.addColorStop(.2,"#00e0ff"),m.addColorStop(.5,"#4fc3f7"),m.addColorStop(.8,"#9c6ade"),m.addColorStop(1,"#003366"),e.shadowColor="#00e0ff",e.shadowBlur=20,e.fillStyle=m,e.beginPath(),e.arc(i,s,f,0,2*Math.PI),e.fill(),e.shadowBlur=0;const b=e.createRadialGradient(i,s,0,i,s,.3*f);b.addColorStop(0,"rgba(255, 255, 255, 0.9)"),b.addColorStop(.5,"rgba(0, 224, 255, 0.7)"),b.addColorStop(1,"transparent"),e.fillStyle=b,e.beginPath(),e.arc(i,s,.3*f,0,2*Math.PI),e.fill();for(let t=1;t<=4;t++){const a=f+18*t+7*Math.sin(3*n+.8*t),o=.4*h*(1-.15*t),r=e.createConicGradient(n+t,i,s);r.addColorStop(0,`rgba(0, 224, 255, ${o})`),r.addColorStop(.25,`rgba(79, 195, 247, ${.8*o})`),r.addColorStop(.5,`rgba(156, 106, 222, ${.6*o})`),r.addColorStop(.75,`rgba(231, 133, 193, ${.8*o})`),r.addColorStop(1,`rgba(0, 224, 255, ${o})`),e.strokeStyle=r,e.lineWidth=3-.3*t,e.shadowColor="#00e0ff",e.shadowBlur=6,e.beginPath(),e.arc(i,s,a,0,2*Math.PI),e.stroke(),e.shadowBlur=0}e.shadowColor="#00e0ff",e.shadowBlur=10,e.fillStyle="#00e0ff",e.font="12px monospace",e.textAlign="center",e.fillText(`ADN: ${t.dna.substring(0,8)}...`,i,a.height-20),e.shadowBlur=0,o=requestAnimationFrame(r)};return i(!0),r(),()=>{o&&cancelAnimationFrame(o)}}),[t]),t?(0,e.jsxs)("div",{className:"organism-viewer-container",children:[(0,e.jsx)("canvas",{ref:n,className:"organism-canvas",width:400,height:300,"data-testid":"organism-canvas",title:"Observez votre organisme évolutif en temps réel"}),a&&(0,e.jsxs)("div",{className:"absolute top-2 right-2 bg-black bg-opacity-70 text-white p-2 rounded text-xs",children:[(0,e.jsxs)("div",{children:["Génération: ",t.generation]}),(0,e.jsxs)("div",{children:["Conscience: ",Math.round(100*(t.consciousness||.5)),"%"]}),(0,e.jsxs)("div",{children:["Mutations: ",t.mutations?.length||0]}),(0,e.jsxs)("div",{className:"text-gray-400 mt-1",children:["Vivant depuis ",Math.floor((Date.now()-(t.createdAt||Date.now()))/1e3/60)," min"]})]}),(0,e.jsx)("div",{className:"absolute bottom-2 left-2 text-xs text-gray-400",children:"Organisme SYMBIONT • État: Actif"}),(0,e.jsx)("div",{className:"absolute bottom-2 right-2 text-xs text-blue-400",children:"⚡ Animation en temps réel"})]}):(0,e.jsx)("div",{className:"organism-loading-container",children:(0,e.jsxs)("div",{className:"organism-loading-content",children:[(0,e.jsxs)("div",{className:"quantum-loader",children:[(0,e.jsx)("div",{className:"quantum-ring"}),(0,e.jsx)("div",{className:"quantum-ring"}),(0,e.jsx)("div",{className:"quantum-ring"}),(0,e.jsx)("div",{className:"quantum-core"})]}),(0,e.jsx)("p",{className:"loading-text",children:"Initialisation de l'organisme quantique..."}),(0,e.jsx)("div",{className:"loading-progress",children:(0,e.jsx)("div",{className:"progress-bar"})})]})})};if("undefined"!=typeof document&&!document.getElementById("organism-viewer-styles")){const n=document.createElement("style");n.id="organism-viewer-styles",n.textContent="\n.organism-loading-container {\n  width: 100%;\n  height: 384px;\n  background: linear-gradient(135deg, #0a0d15 0%, #12151f 50%, #1a1f2e 100%);\n  border-radius: 16px;\n  border: 1px solid rgba(0, 224, 255, 0.15);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  overflow: hidden;\n}\n\n.organism-loading-content {\n  text-align: center;\n  z-index: 2;\n}\n\n.quantum-loader {\n  position: relative;\n  width: 80px;\n  height: 80px;\n  margin: 0 auto 24px;\n}\n\n.quantum-ring {\n  position: absolute;\n  inset: 0;\n  border: 2px solid transparent;\n  border-top: 2px solid #00e0ff;\n  border-radius: 50%;\n  animation: quantumSpin 2s linear infinite;\n}\n\n.quantum-ring:nth-child(2) {\n  inset: 8px;\n  border-top-color: #4fc3f7;\n  animation-duration: 1.5s;\n  animation-direction: reverse;\n}\n\n.quantum-ring:nth-child(3) {\n  inset: 16px;\n  border-top-color: #9c6ade;\n  animation-duration: 1s;\n}\n\n.quantum-core {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 16px;\n  height: 16px;\n  background: radial-gradient(circle, #00e0ff, #4fc3f7);\n  border-radius: 50%;\n  box-shadow: 0 0 16px rgba(0, 224, 255, 0.6);\n  animation: quantumPulse 1.5s ease-in-out infinite;\n}\n\n@keyframes quantumSpin {\n  to { transform: rotate(360deg); }\n}\n\n@keyframes quantumPulse {\n  0%, 100% { transform: translate(-50%, -50%) scale(1); }\n  50% { transform: translate(-50%, -50%) scale(1.2); }\n}\n\n.loading-text {\n  color: #cbd5e1;\n  font-size: 15px;\n  font-weight: 500;\n  margin-bottom: 16px;\n  text-shadow: 0 0 10px rgba(0, 224, 255, 0.3);\n}\n\n.loading-progress {\n  width: 200px;\n  height: 4px;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 2px;\n  overflow: hidden;\n  margin: 0 auto;\n}\n\n.progress-bar {\n  height: 100%;\n  background: linear-gradient(90deg, #00e0ff, #4fc3f7, #9c6ade);\n  border-radius: 2px;\n  animation: progressFlow 2s ease-in-out infinite;\n}\n\n@keyframes progressFlow {\n  0% { transform: translateX(-100%); }\n  100% { transform: translateX(200%); }\n}\n\n.organism-viewer-container {\n  position: relative;\n  width: 100%;\n  height: 384px;\n  background: linear-gradient(135deg, #000000 0%, #0a0d15 100%);\n  border-radius: 16px;\n  border: 1px solid rgba(0, 224, 255, 0.15);\n  overflow: hidden;\n  box-shadow: \n    inset 0 1px 0 rgba(255, 255, 255, 0.05),\n    0 8px 32px rgba(0, 224, 255, 0.1);\n}\n\n.organism-canvas {\n  width: 100%;\n  height: 100%;\n  cursor: crosshair;\n  transition: filter 0.3s ease;\n}\n\n.organism-canvas:hover {\n  filter: brightness(1.1) saturate(1.1);\n}\n\n.organism-stats-panel {\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  background: rgba(10, 13, 21, 0.85);\n  backdrop-filter: blur(12px);\n  border: 1px solid rgba(0, 224, 255, 0.2);\n  border-radius: 12px;\n  padding: 16px;\n  min-width: 160px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);\n}\n\n.stat-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n}\n\n.stat-item:last-child {\n  margin-bottom: 0;\n}\n\n.stat-label {\n  color: #94a3b8;\n  font-size: 12px;\n  font-weight: 500;\n}\n\n.stat-value {\n  color: #f1f5f9;\n  font-size: 13px;\n  font-weight: 700;\n  text-shadow: 0 0 8px currentColor;\n}\n\n.consciousness-value {\n  color: #00e0ff;\n}\n\n.mutations-value {\n  color: #9c6ade;\n}\n\n.age-stat {\n  padding-top: 8px;\n  border-top: 1px solid rgba(0, 224, 255, 0.1);\n  margin-top: 8px;\n}\n\n.organism-status-bar {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 48px;\n  background: linear-gradient(to top, rgba(10, 13, 21, 0.9), transparent);\n  backdrop-filter: blur(8px);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 20px;\n  border-top: 1px solid rgba(0, 224, 255, 0.1);\n}\n\n.status-indicator {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.status-dot {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: #22c55e;\n  box-shadow: 0 0 12px rgba(34, 197, 94, 0.6);\n  animation: statusPulse 2s ease-in-out infinite;\n}\n\n.status-text {\n  color: #cbd5e1;\n  font-size: 12px;\n  font-weight: 500;\n}\n\n.realtime-indicator {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.pulse-icon {\n  color: #4fc3f7;\n  font-size: 14px;\n  animation: iconPulse 1.5s ease-in-out infinite;\n}\n\n.realtime-text {\n  color: #4fc3f7;\n  font-size: 12px;\n  font-weight: 600;\n}\n\n@keyframes iconPulse {\n  0%, 100% { transform: scale(1); opacity: 1; }\n  50% { transform: scale(1.2); opacity: 0.8; }\n}\n",document.head.appendChild(n)}}}]);