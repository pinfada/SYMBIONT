{"version":3,"file":"background/index.js","mappings":"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","sources":["webpack://symbiont/./node_modules/uuid/dist/cjs-browser/stringify.js","webpack://symbiont/./src/background/services/MurmureService.ts","webpack://symbiont/./src/shared/messaging/MessageBus.ts","webpack://symbiont/./node_modules/uuid/dist/cjs-browser/index.js","webpack://symbiont/./node_modules/uuid/dist/cjs-browser/max.js","webpack://symbiont/./node_modules/uuid/dist/cjs-browser/v6ToV1.js","webpack://symbiont/./node_modules/uuid/dist/cjs-browser/v4.js","webpack://symbiont/./node_modules/uuid/dist/cjs-browser/rng.js","webpack://symbiont/./node_modules/uuid/dist/cjs-browser/v7.js","webpack://symbiont/./node_modules/uuid/dist/cjs-browser/md5.js","webpack://symbiont/./node_modules/uuid/dist/cjs-browser/v6.js","webpack://symbiont/./node_modules/uuid/dist/cjs-browser/v1.js","webpack://symbiont/./node_modules/uuid/dist/cjs-browser/nil.js","webpack://symbiont/./src/shared/observers/NavigationObserver.ts","webpack://symbiont/./src/core/storage/SymbiontStorage.ts","webpack://symbiont/./node_modules/uuid/dist/cjs-browser/v5.js","webpack://symbiont/./node_modules/uuid/dist/cjs-browser/v1ToV6.js","webpack://symbiont/./node_modules/uuid/dist/cjs-browser/v3.js","webpack://symbiont/./src/core/PatternDetector.ts","webpack://symbiont/./node_modules/uuid/dist/cjs-browser/regex.js","webpack://symbiont/./node_modules/uuid/dist/cjs-browser/validate.js","webpack://symbiont/./node_modules/uuid/dist/cjs-browser/version.js","webpack://symbiont/./node_modules/uuid/dist/cjs-browser/native.js","webpack://symbiont/./node_modules/uuid/dist/cjs-browser/parse.js","webpack://symbiont/./node_modules/uuid/dist/cjs-browser/sha1.js","webpack://symbiont/./src/background/services/InvitationService.ts","webpack://symbiont/./node_modules/uuid/dist/cjs-browser/v35.js","webpack://symbiont/webpack/bootstrap","webpack://symbiont/./src/background/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.unsafeStringify = void 0;\nconst validate_js_1 = require(\"./validate.js\");\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nfunction unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nexports.unsafeStringify = unsafeStringify;\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!(0, validate_js_1.default)(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexports.default = stringify;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MurmureService = void 0;\nconst MURMUR_TEMPLATES = [\n    \"Tu reviens souvent ici quand tu doutes.\",\n    \"Pourquoi cette boucle ?\",\n    \"As-tu remarqué ce schéma dans ta navigation ?\",\n    \"Un autre détour, ou une quête de sens ?\",\n    \"Ce site semble t'attirer dans les moments de réflexion.\",\n    \"Encore une fois, tu explores ce chemin familier.\",\n    \"Et si tu essayais une nouvelle direction ?\",\n    \"La répétition cache-t-elle une intention ?\",\n    \"Un murmure dans le flux de tes habitudes...\",\n    \"Parfois, la boucle est une porte vers l'inattendu.\"\n];\nconst MURMUR_TEMPLATES_BY_PATTERN = {\n    loop: [\n        \"Encore ce même chemin... Qu'y cherches-tu ?\",\n        \"La boucle se répète, intention ou habitude ?\",\n        \"Revenir, encore et encore. Un besoin de repère ?\"\n    ],\n    idle: [\n        \"Un temps de pause... ou d'hésitation ?\",\n        \"Le silence aussi fait partie du voyage.\",\n        \"L'inactivité, prélude à une nouvelle exploration ?\"\n    ],\n    exploration: [\n        \"Nouveau territoire, nouvelle perspective.\",\n        \"L'exploration nourrit la curiosité.\",\n        \"Tu t'aventures hors des sentiers battus.\"\n    ],\n    routine: [\n        \"Les habitudes forgent des chemins familiers.\",\n        \"La routine rassure, mais l'inattendu surprend.\",\n        \"Encore ce site, comme un rituel quotidien.\"\n    ],\n    default: [\n        ...MURMUR_TEMPLATES\n    ]\n};\nconst MURMUR_TEMPLATES_BY_TIME = {\n    morning: [\n        \"Un nouveau jour, une nouvelle boucle commence.\",\n        \"Le matin invite à la découverte.\",\n        \"L'aube de tes habitudes numériques.\"\n    ],\n    afternoon: [\n        \"L'après-midi, la routine s'installe.\",\n        \"Un moment propice à l'exploration ou à la répétition ?\",\n        \"Le soleil haut, l'esprit vagabonde.\"\n    ],\n    evening: [\n        \"Le soir, tu reviens à l'essentiel.\",\n        \"La nuit favorise les détours intérieurs.\",\n        \"Encore connecté, même à la tombée du jour.\"\n    ],\n    weekend: [\n        \"Le week-end, les chemins changent.\",\n        \"Un rythme différent, des envies nouvelles.\",\n        \"La liberté du week-end se lit dans ta navigation.\"\n    ]\n};\nfunction getTimeOfDay() {\n    const hour = new Date().getHours();\n    if (hour < 12)\n        return 'morning';\n    if (hour < 18)\n        return 'afternoon';\n    return 'evening';\n}\nfunction isWeekend() {\n    const day = new Date().getDay();\n    return day === 0 || day === 6;\n}\nclass MurmureService {\n    // Génère un murmure contextuel selon le pattern détecté et le contexte temporel\n    generateMurmur(pattern) {\n        // Personnalisation temporelle\n        if (isWeekend()) {\n            const templates = MURMUR_TEMPLATES_BY_TIME['weekend'];\n            if (Math.random() < 0.5) {\n                return templates[Math.floor(Math.random() * templates.length)];\n            }\n        }\n        else {\n            const timeOfDay = getTimeOfDay();\n            if (MURMUR_TEMPLATES_BY_TIME[timeOfDay] && Math.random() < 0.4) {\n                const templates = MURMUR_TEMPLATES_BY_TIME[timeOfDay];\n                return templates[Math.floor(Math.random() * templates.length)];\n            }\n        }\n        // Personnalisation par pattern comportemental\n        const templates = pattern && MURMUR_TEMPLATES_BY_PATTERN[pattern]\n            ? MURMUR_TEMPLATES_BY_PATTERN[pattern]\n            : MURMUR_TEMPLATES_BY_PATTERN['default'];\n        const idx = Math.floor(Math.random() * templates.length);\n        return templates[idx];\n    }\n}\nexports.MurmureService = MurmureService;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MessageBus = exports.MessageType = void 0;\n// Centralisation des types de messages et de l'interface Message\nvar MessageType;\n(function (MessageType) {\n    MessageType[\"PAGE_VISIT\"] = \"PAGE_VISIT\";\n    MessageType[\"SCROLL_EVENT\"] = \"SCROLL_EVENT\";\n    MessageType[\"ORGANISM_UPDATE\"] = \"ORGANISM_UPDATE\";\n    MessageType[\"ORGANISM_MUTATE\"] = \"ORGANISM_MUTATE\";\n    MessageType[\"ORGANISM_STATE_CHANGE\"] = \"ORGANISM_STATE_CHANGE\";\n    MessageType[\"WEBGL_INIT\"] = \"WEBGL_INIT\";\n    MessageType[\"WEBGL_ERROR\"] = \"WEBGL_ERROR\";\n    MessageType[\"WEBGL_INITIALIZED\"] = \"WEBGL_INITIALIZED\";\n    MessageType[\"PERFORMANCE_UPDATE\"] = \"PERFORMANCE_UPDATE\";\n    MessageType[\"GENERATE_INVITATION\"] = \"GENERATE_INVITATION\";\n    MessageType[\"INVITATION_GENERATED\"] = \"INVITATION_GENERATED\";\n    MessageType[\"CONSUME_INVITATION\"] = \"CONSUME_INVITATION\";\n    MessageType[\"INVITATION_CONSUMED\"] = \"INVITATION_CONSUMED\";\n    MessageType[\"CHECK_INVITATION\"] = \"CHECK_INVITATION\";\n    MessageType[\"INVITATION_CHECKED\"] = \"INVITATION_CHECKED\";\n    MessageType[\"MURMUR\"] = \"MURMUR\";\n    MessageType[\"GET_INVITER\"] = \"GET_INVITER\";\n    MessageType[\"INVITER_RESULT\"] = \"INVITER_RESULT\";\n    MessageType[\"GET_INVITEES\"] = \"GET_INVITEES\";\n    MessageType[\"INVITEES_RESULT\"] = \"INVITEES_RESULT\";\n    MessageType[\"GET_INVITATION_HISTORY\"] = \"GET_INVITATION_HISTORY\";\n    MessageType[\"INVITATION_HISTORY_RESULT\"] = \"INVITATION_HISTORY_RESULT\";\n    MessageType[\"INTERACTION_DETECTED\"] = \"INTERACTION_DETECTED\";\n    // --- Rituels collaboratifs ---\n    MessageType[\"REQUEST_SHARED_MUTATION\"] = \"REQUEST_SHARED_MUTATION\";\n    MessageType[\"SHARED_MUTATION_CODE\"] = \"SHARED_MUTATION_CODE\";\n    MessageType[\"ACCEPT_SHARED_MUTATION\"] = \"ACCEPT_SHARED_MUTATION\";\n    MessageType[\"SHARED_MUTATION_RESULT\"] = \"SHARED_MUTATION_RESULT\";\n    MessageType[\"COLLECTIVE_WAKE_REQUEST\"] = \"COLLECTIVE_WAKE_REQUEST\";\n    MessageType[\"COLLECTIVE_WAKE_RESULT\"] = \"COLLECTIVE_WAKE_RESULT\";\n    MessageType[\"CONTEXTUAL_INVITATION\"] = \"CONTEXTUAL_INVITATION\";\n    MessageType[\"SECRET_RITUAL_TRIGGERED\"] = \"SECRET_RITUAL_TRIGGERED\";\n    MessageType[\"SECRET_CODE_ENTERED\"] = \"SECRET_CODE_ENTERED\";\n})(MessageType || (exports.MessageType = MessageType = {}));\nclass MessageBus {\n    constructor(channel) { }\n    on(type, handler) { }\n    send(message) { }\n    subscribe(type, handler) {\n        this.on(type, handler);\n    }\n}\nexports.MessageBus = MessageBus;\nexports.default = MessageBus;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.version = exports.validate = exports.v7 = exports.v6ToV1 = exports.v6 = exports.v5 = exports.v4 = exports.v3 = exports.v1ToV6 = exports.v1 = exports.stringify = exports.parse = exports.NIL = exports.MAX = void 0;\nvar max_js_1 = require(\"./max.js\");\nObject.defineProperty(exports, \"MAX\", { enumerable: true, get: function () { return max_js_1.default; } });\nvar nil_js_1 = require(\"./nil.js\");\nObject.defineProperty(exports, \"NIL\", { enumerable: true, get: function () { return nil_js_1.default; } });\nvar parse_js_1 = require(\"./parse.js\");\nObject.defineProperty(exports, \"parse\", { enumerable: true, get: function () { return parse_js_1.default; } });\nvar stringify_js_1 = require(\"./stringify.js\");\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return stringify_js_1.default; } });\nvar v1_js_1 = require(\"./v1.js\");\nObject.defineProperty(exports, \"v1\", { enumerable: true, get: function () { return v1_js_1.default; } });\nvar v1ToV6_js_1 = require(\"./v1ToV6.js\");\nObject.defineProperty(exports, \"v1ToV6\", { enumerable: true, get: function () { return v1ToV6_js_1.default; } });\nvar v3_js_1 = require(\"./v3.js\");\nObject.defineProperty(exports, \"v3\", { enumerable: true, get: function () { return v3_js_1.default; } });\nvar v4_js_1 = require(\"./v4.js\");\nObject.defineProperty(exports, \"v4\", { enumerable: true, get: function () { return v4_js_1.default; } });\nvar v5_js_1 = require(\"./v5.js\");\nObject.defineProperty(exports, \"v5\", { enumerable: true, get: function () { return v5_js_1.default; } });\nvar v6_js_1 = require(\"./v6.js\");\nObject.defineProperty(exports, \"v6\", { enumerable: true, get: function () { return v6_js_1.default; } });\nvar v6ToV1_js_1 = require(\"./v6ToV1.js\");\nObject.defineProperty(exports, \"v6ToV1\", { enumerable: true, get: function () { return v6ToV1_js_1.default; } });\nvar v7_js_1 = require(\"./v7.js\");\nObject.defineProperty(exports, \"v7\", { enumerable: true, get: function () { return v7_js_1.default; } });\nvar validate_js_1 = require(\"./validate.js\");\nObject.defineProperty(exports, \"validate\", { enumerable: true, get: function () { return validate_js_1.default; } });\nvar version_js_1 = require(\"./version.js\");\nObject.defineProperty(exports, \"version\", { enumerable: true, get: function () { return version_js_1.default; } });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = 'ffffffff-ffff-ffff-ffff-ffffffffffff';\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst parse_js_1 = require(\"./parse.js\");\nconst stringify_js_1 = require(\"./stringify.js\");\nfunction v6ToV1(uuid) {\n    const v6Bytes = typeof uuid === 'string' ? (0, parse_js_1.default)(uuid) : uuid;\n    const v1Bytes = _v6ToV1(v6Bytes);\n    return typeof uuid === 'string' ? (0, stringify_js_1.unsafeStringify)(v1Bytes) : v1Bytes;\n}\nexports.default = v6ToV1;\nfunction _v6ToV1(v6Bytes) {\n    return Uint8Array.of(((v6Bytes[3] & 0x0f) << 4) | ((v6Bytes[4] >> 4) & 0x0f), ((v6Bytes[4] & 0x0f) << 4) | ((v6Bytes[5] & 0xf0) >> 4), ((v6Bytes[5] & 0x0f) << 4) | (v6Bytes[6] & 0x0f), v6Bytes[7], ((v6Bytes[1] & 0x0f) << 4) | ((v6Bytes[2] & 0xf0) >> 4), ((v6Bytes[2] & 0x0f) << 4) | ((v6Bytes[3] & 0xf0) >> 4), 0x10 | ((v6Bytes[0] & 0xf0) >> 4), ((v6Bytes[0] & 0x0f) << 4) | ((v6Bytes[1] & 0xf0) >> 4), v6Bytes[8], v6Bytes[9], v6Bytes[10], v6Bytes[11], v6Bytes[12], v6Bytes[13], v6Bytes[14], v6Bytes[15]);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst native_js_1 = require(\"./native.js\");\nconst rng_js_1 = require(\"./rng.js\");\nconst stringify_js_1 = require(\"./stringify.js\");\nfunction v4(options, buf, offset) {\n    if (native_js_1.default.randomUUID && !buf && !options) {\n        return native_js_1.default.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? (0, rng_js_1.default)();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return (0, stringify_js_1.unsafeStringify)(rnds);\n}\nexports.default = v4;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nfunction rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\nexports.default = rng;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.updateV7State = void 0;\nconst rng_js_1 = require(\"./rng.js\");\nconst stringify_js_1 = require(\"./stringify.js\");\nconst _state = {};\nfunction v7(options, buf, offset) {\n    let bytes;\n    if (options) {\n        bytes = v7Bytes(options.random ?? options.rng?.() ?? (0, rng_js_1.default)(), options.msecs, options.seq, buf, offset);\n    }\n    else {\n        const now = Date.now();\n        const rnds = (0, rng_js_1.default)();\n        updateV7State(_state, now, rnds);\n        bytes = v7Bytes(rnds, _state.msecs, _state.seq, buf, offset);\n    }\n    return buf ?? (0, stringify_js_1.unsafeStringify)(bytes);\n}\nfunction updateV7State(state, now, rnds) {\n    state.msecs ??= -Infinity;\n    state.seq ??= 0;\n    if (now > state.msecs) {\n        state.seq = (rnds[6] << 23) | (rnds[7] << 16) | (rnds[8] << 8) | rnds[9];\n        state.msecs = now;\n    }\n    else {\n        state.seq = (state.seq + 1) | 0;\n        if (state.seq === 0) {\n            state.msecs++;\n        }\n    }\n    return state;\n}\nexports.updateV7State = updateV7State;\nfunction v7Bytes(rnds, msecs, seq, buf, offset = 0) {\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    if (!buf) {\n        buf = new Uint8Array(16);\n        offset = 0;\n    }\n    else {\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n    }\n    msecs ??= Date.now();\n    seq ??= ((rnds[6] * 0x7f) << 24) | (rnds[7] << 16) | (rnds[8] << 8) | rnds[9];\n    buf[offset++] = (msecs / 0x10000000000) & 0xff;\n    buf[offset++] = (msecs / 0x100000000) & 0xff;\n    buf[offset++] = (msecs / 0x1000000) & 0xff;\n    buf[offset++] = (msecs / 0x10000) & 0xff;\n    buf[offset++] = (msecs / 0x100) & 0xff;\n    buf[offset++] = msecs & 0xff;\n    buf[offset++] = 0x70 | ((seq >>> 28) & 0x0f);\n    buf[offset++] = (seq >>> 20) & 0xff;\n    buf[offset++] = 0x80 | ((seq >>> 14) & 0x3f);\n    buf[offset++] = (seq >>> 6) & 0xff;\n    buf[offset++] = ((seq << 2) & 0xff) | (rnds[10] & 0x03);\n    buf[offset++] = rnds[11];\n    buf[offset++] = rnds[12];\n    buf[offset++] = rnds[13];\n    buf[offset++] = rnds[14];\n    buf[offset++] = rnds[15];\n    return buf;\n}\nexports.default = v7;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction md5(bytes) {\n    const words = uint8ToUint32(bytes);\n    const md5Bytes = wordsToMd5(words, bytes.length * 8);\n    return uint32ToUint8(md5Bytes);\n}\nfunction uint32ToUint8(input) {\n    const bytes = new Uint8Array(input.length * 4);\n    for (let i = 0; i < input.length * 4; i++) {\n        bytes[i] = (input[i >> 2] >>> ((i % 4) * 8)) & 0xff;\n    }\n    return bytes;\n}\nfunction getOutputLength(inputLength8) {\n    return (((inputLength8 + 64) >>> 9) << 4) + 14 + 1;\n}\nfunction wordsToMd5(x, len) {\n    const xpad = new Uint32Array(getOutputLength(len)).fill(0);\n    xpad.set(x);\n    xpad[len >> 5] |= 0x80 << len % 32;\n    xpad[xpad.length - 1] = len;\n    x = xpad;\n    let a = 1732584193;\n    let b = -271733879;\n    let c = -1732584194;\n    let d = 271733878;\n    for (let i = 0; i < x.length; i += 16) {\n        const olda = a;\n        const oldb = b;\n        const oldc = c;\n        const oldd = d;\n        a = md5ff(a, b, c, d, x[i], 7, -680876936);\n        d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n        c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n        b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n        a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n        d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n        c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n        b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n        a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n        d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n        c = md5ff(c, d, a, b, x[i + 10], 17, -42063);\n        b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n        a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n        d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n        c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n        b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n        a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n        d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n        c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n        b = md5gg(b, c, d, a, x[i], 20, -373897302);\n        a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n        d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n        c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n        b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n        a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n        d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n        c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n        b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n        a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n        d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n        c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n        b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n        a = md5hh(a, b, c, d, x[i + 5], 4, -378558);\n        d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n        c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n        b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n        a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n        d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n        c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n        b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n        a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n        d = md5hh(d, a, b, c, x[i], 11, -358537222);\n        c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n        b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n        a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n        d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n        c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n        b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n        a = md5ii(a, b, c, d, x[i], 6, -198630844);\n        d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n        c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n        b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n        a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n        d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n        c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n        b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n        a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n        d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n        c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n        b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n        a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n        d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n        c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n        b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n        a = safeAdd(a, olda);\n        b = safeAdd(b, oldb);\n        c = safeAdd(c, oldc);\n        d = safeAdd(d, oldd);\n    }\n    return Uint32Array.of(a, b, c, d);\n}\nfunction uint8ToUint32(input) {\n    if (input.length === 0) {\n        return new Uint32Array();\n    }\n    const output = new Uint32Array(getOutputLength(input.length * 8)).fill(0);\n    for (let i = 0; i < input.length; i++) {\n        output[i >> 2] |= (input[i] & 0xff) << ((i % 4) * 8);\n    }\n    return output;\n}\nfunction safeAdd(x, y) {\n    const lsw = (x & 0xffff) + (y & 0xffff);\n    const msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n    return (msw << 16) | (lsw & 0xffff);\n}\nfunction bitRotateLeft(num, cnt) {\n    return (num << cnt) | (num >>> (32 - cnt));\n}\nfunction md5cmn(q, a, b, x, s, t) {\n    return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);\n}\nfunction md5ff(a, b, c, d, x, s, t) {\n    return md5cmn((b & c) | (~b & d), a, b, x, s, t);\n}\nfunction md5gg(a, b, c, d, x, s, t) {\n    return md5cmn((b & d) | (c & ~d), a, b, x, s, t);\n}\nfunction md5hh(a, b, c, d, x, s, t) {\n    return md5cmn(b ^ c ^ d, a, b, x, s, t);\n}\nfunction md5ii(a, b, c, d, x, s, t) {\n    return md5cmn(c ^ (b | ~d), a, b, x, s, t);\n}\nexports.default = md5;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst stringify_js_1 = require(\"./stringify.js\");\nconst v1_js_1 = require(\"./v1.js\");\nconst v1ToV6_js_1 = require(\"./v1ToV6.js\");\nfunction v6(options, buf, offset) {\n    options ??= {};\n    offset ??= 0;\n    let bytes = (0, v1_js_1.default)({ ...options, _v6: true }, new Uint8Array(16));\n    bytes = (0, v1ToV6_js_1.default)(bytes);\n    if (buf) {\n        for (let i = 0; i < 16; i++) {\n            buf[offset + i] = bytes[i];\n        }\n        return buf;\n    }\n    return (0, stringify_js_1.unsafeStringify)(bytes);\n}\nexports.default = v6;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.updateV1State = void 0;\nconst rng_js_1 = require(\"./rng.js\");\nconst stringify_js_1 = require(\"./stringify.js\");\nconst _state = {};\nfunction v1(options, buf, offset) {\n    let bytes;\n    const isV6 = options?._v6 ?? false;\n    if (options) {\n        const optionsKeys = Object.keys(options);\n        if (optionsKeys.length === 1 && optionsKeys[0] === '_v6') {\n            options = undefined;\n        }\n    }\n    if (options) {\n        bytes = v1Bytes(options.random ?? options.rng?.() ?? (0, rng_js_1.default)(), options.msecs, options.nsecs, options.clockseq, options.node, buf, offset);\n    }\n    else {\n        const now = Date.now();\n        const rnds = (0, rng_js_1.default)();\n        updateV1State(_state, now, rnds);\n        bytes = v1Bytes(rnds, _state.msecs, _state.nsecs, isV6 ? undefined : _state.clockseq, isV6 ? undefined : _state.node, buf, offset);\n    }\n    return buf ?? (0, stringify_js_1.unsafeStringify)(bytes);\n}\nfunction updateV1State(state, now, rnds) {\n    state.msecs ??= -Infinity;\n    state.nsecs ??= 0;\n    if (now === state.msecs) {\n        state.nsecs++;\n        if (state.nsecs >= 10000) {\n            state.node = undefined;\n            state.nsecs = 0;\n        }\n    }\n    else if (now > state.msecs) {\n        state.nsecs = 0;\n    }\n    else if (now < state.msecs) {\n        state.node = undefined;\n    }\n    if (!state.node) {\n        state.node = rnds.slice(10, 16);\n        state.node[0] |= 0x01;\n        state.clockseq = ((rnds[8] << 8) | rnds[9]) & 0x3fff;\n    }\n    state.msecs = now;\n    return state;\n}\nexports.updateV1State = updateV1State;\nfunction v1Bytes(rnds, msecs, nsecs, clockseq, node, buf, offset = 0) {\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    if (!buf) {\n        buf = new Uint8Array(16);\n        offset = 0;\n    }\n    else {\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n    }\n    msecs ??= Date.now();\n    nsecs ??= 0;\n    clockseq ??= ((rnds[8] << 8) | rnds[9]) & 0x3fff;\n    node ??= rnds.slice(10, 16);\n    msecs += 12219292800000;\n    const tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n    buf[offset++] = (tl >>> 24) & 0xff;\n    buf[offset++] = (tl >>> 16) & 0xff;\n    buf[offset++] = (tl >>> 8) & 0xff;\n    buf[offset++] = tl & 0xff;\n    const tmh = ((msecs / 0x100000000) * 10000) & 0xfffffff;\n    buf[offset++] = (tmh >>> 8) & 0xff;\n    buf[offset++] = tmh & 0xff;\n    buf[offset++] = ((tmh >>> 24) & 0xf) | 0x10;\n    buf[offset++] = (tmh >>> 16) & 0xff;\n    buf[offset++] = (clockseq >>> 8) | 0x80;\n    buf[offset++] = clockseq & 0xff;\n    for (let n = 0; n < 6; ++n) {\n        buf[offset++] = node[n];\n    }\n    return buf;\n}\nexports.default = v1;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = '00000000-0000-0000-0000-000000000000';\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NavigationObserver = void 0;\n// Squelette minimal pour lever les erreurs d'import\nclass NavigationObserver {\n    constructor(messageBus) { }\n}\nexports.NavigationObserver = NavigationObserver;\nexports.default = NavigationObserver;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SymbiontStorage = void 0;\nclass SymbiontStorage {\n    constructor() {\n        this.db = null;\n        this.DB_NAME = 'symbiont-db';\n        this.DB_VERSION = 2;\n    }\n    async initialize() {\n        return new Promise((resolve, reject) => {\n            const request = indexedDB.open(this.DB_NAME, this.DB_VERSION);\n            request.onerror = () => reject(request.error);\n            request.onsuccess = () => {\n                this.db = request.result;\n                resolve();\n            };\n            request.onupgradeneeded = (event) => {\n                const db = event.target.result;\n                // Organism state store\n                if (!db.objectStoreNames.contains('organism')) {\n                    db.createObjectStore('organism', { keyPath: 'id' });\n                }\n                // Behavior patterns store\n                if (!db.objectStoreNames.contains('behaviors')) {\n                    const behaviorStore = db.createObjectStore('behaviors', { keyPath: 'url' });\n                    behaviorStore.createIndex('visitCount', 'visitCount', { unique: false });\n                    behaviorStore.createIndex('lastVisit', 'lastVisit', { unique: false });\n                }\n                // Mutations history store\n                if (!db.objectStoreNames.contains('mutations')) {\n                    const mutationStore = db.createObjectStore('mutations', { autoIncrement: true });\n                    mutationStore.createIndex('timestamp', 'timestamp', { unique: false });\n                    mutationStore.createIndex('type', 'type', { unique: false });\n                }\n                // Settings store\n                if (!db.objectStoreNames.contains('settings')) {\n                    db.createObjectStore('settings', { keyPath: 'key' });\n                }\n                // Invitations store\n                if (!db.objectStoreNames.contains('invitations')) {\n                    db.createObjectStore('invitations', { keyPath: 'code' });\n                }\n            };\n        });\n    }\n    async getOrganism() {\n        if (!this.db)\n            throw new Error('Database not initialized');\n        return new Promise((resolve, reject) => {\n            const transaction = this.db.transaction(['organism'], 'readonly');\n            const store = transaction.objectStore('organism');\n            const request = store.get('current');\n            request.onsuccess = () => resolve(request.result || null);\n            request.onerror = () => reject(request.error);\n        });\n    }\n    async saveOrganism(organism) {\n        if (!this.db)\n            throw new Error('Database not initialized');\n        return new Promise((resolve, reject) => {\n            const transaction = this.db.transaction(['organism'], 'readwrite');\n            const store = transaction.objectStore('organism');\n            const request = store.put({ ...organism, id: 'current' });\n            request.onsuccess = () => resolve();\n            request.onerror = () => reject(request.error);\n        });\n    }\n    async getBehavior(url) {\n        if (!this.db)\n            throw new Error('Database not initialized');\n        return new Promise((resolve, reject) => {\n            const transaction = this.db.transaction(['behaviors'], 'readonly');\n            const store = transaction.objectStore('behaviors');\n            const request = store.get(url);\n            request.onsuccess = () => resolve(request.result || null);\n            request.onerror = () => reject(request.error);\n        });\n    }\n    async saveBehavior(behavior) {\n        if (!this.db)\n            throw new Error('Database not initialized');\n        return new Promise((resolve, reject) => {\n            const transaction = this.db.transaction(['behaviors'], 'readwrite');\n            const store = transaction.objectStore('behaviors');\n            const request = store.put(behavior);\n            request.onsuccess = () => resolve();\n            request.onerror = () => reject(request.error);\n        });\n    }\n    async addMutation(mutation) {\n        if (!this.db)\n            throw new Error('Database not initialized');\n        return new Promise((resolve, reject) => {\n            const transaction = this.db.transaction(['mutations'], 'readwrite');\n            const store = transaction.objectStore('mutations');\n            const request = store.add(mutation);\n            request.onsuccess = () => resolve();\n            request.onerror = () => reject(request.error);\n        });\n    }\n    async getRecentMutations(limit = 10) {\n        if (!this.db)\n            throw new Error('Database not initialized');\n        return new Promise((resolve, reject) => {\n            const transaction = this.db.transaction(['mutations'], 'readonly');\n            const store = transaction.objectStore('mutations');\n            const index = store.index('timestamp');\n            const request = index.openCursor(null, 'prev');\n            const mutations = [];\n            request.onsuccess = (event) => {\n                const cursor = event.target.result;\n                if (cursor && mutations.length < limit) {\n                    mutations.push(cursor.value);\n                    cursor.continue();\n                }\n                else {\n                    resolve(mutations);\n                }\n            };\n            request.onerror = () => reject(request.error);\n        });\n    }\n    async getSetting(key, defaultValue) {\n        if (!this.db)\n            throw new Error('Database not initialized');\n        return new Promise((resolve, reject) => {\n            const transaction = this.db.transaction(['settings'], 'readonly');\n            const store = transaction.objectStore('settings');\n            const request = store.get(key);\n            request.onsuccess = () => {\n                const result = request.result;\n                resolve(result ? result.value : defaultValue);\n            };\n            request.onerror = () => reject(request.error);\n        });\n    }\n    async setSetting(key, value) {\n        if (!this.db)\n            throw new Error('Database not initialized');\n        return new Promise((resolve, reject) => {\n            const transaction = this.db.transaction(['settings'], 'readwrite');\n            const store = transaction.objectStore('settings');\n            const request = store.put({ key, value });\n            request.onsuccess = () => resolve();\n            request.onerror = () => reject(request.error);\n        });\n    }\n    // --- INVITATIONS ---\n    async addInvitation(invitation) {\n        if (!this.db)\n            throw new Error('Database not initialized');\n        return new Promise((resolve, reject) => {\n            const transaction = this.db.transaction(['invitations'], 'readwrite');\n            const store = transaction.objectStore('invitations');\n            const request = store.add(invitation);\n            request.onsuccess = () => resolve();\n            request.onerror = () => reject(request.error);\n        });\n    }\n    async updateInvitation(invitation) {\n        if (!this.db)\n            throw new Error('Database not initialized');\n        return new Promise((resolve, reject) => {\n            const transaction = this.db.transaction(['invitations'], 'readwrite');\n            const store = transaction.objectStore('invitations');\n            const request = store.put(invitation);\n            request.onsuccess = () => resolve();\n            request.onerror = () => reject(request.error);\n        });\n    }\n    async getInvitation(code) {\n        if (!this.db)\n            throw new Error('Database not initialized');\n        return new Promise((resolve, reject) => {\n            const transaction = this.db.transaction(['invitations'], 'readonly');\n            const store = transaction.objectStore('invitations');\n            const request = store.get(code);\n            request.onsuccess = () => resolve(request.result || null);\n            request.onerror = () => reject(request.error);\n        });\n    }\n    async getAllInvitations() {\n        if (!this.db)\n            throw new Error('Database not initialized');\n        return new Promise((resolve, reject) => {\n            const transaction = this.db.transaction(['invitations'], 'readonly');\n            const store = transaction.objectStore('invitations');\n            const request = store.openCursor();\n            const results = [];\n            request.onsuccess = (event) => {\n                const cursor = event.target.result;\n                if (cursor) {\n                    results.push(cursor.value);\n                    cursor.continue();\n                }\n                else {\n                    resolve(results);\n                }\n            };\n            request.onerror = () => reject(request.error);\n        });\n    }\n    /**\n     * Retourne la liste des comportements triés par nombre de visites (visitCount) puis date de dernière visite (lastVisit)\n     */\n    async getBehaviorPatterns() {\n        if (!this.db)\n            throw new Error('Database not initialized');\n        return new Promise((resolve, reject) => {\n            const transaction = this.db.transaction(['behaviors'], 'readonly');\n            const store = transaction.objectStore('behaviors');\n            const request = store.openCursor();\n            const results = [];\n            request.onsuccess = (event) => {\n                const cursor = event.target.result;\n                if (cursor) {\n                    results.push(cursor.value);\n                    cursor.continue();\n                }\n                else {\n                    // Tri par visitCount décroissant puis lastVisit décroissant\n                    results.sort((a, b) => {\n                        if (b.visitCount !== a.visitCount)\n                            return b.visitCount - a.visitCount;\n                        return b.lastVisit - a.lastVisit;\n                    });\n                    resolve(results);\n                }\n            };\n            request.onerror = () => reject(request.error);\n        });\n    }\n    /**\n     * Retourne les interactions récentes sur une période donnée (en ms, par défaut 24h)\n     */\n    async getRecentActivity(periodMs = 24 * 60 * 60 * 1000) {\n        if (!this.db)\n            throw new Error('Database not initialized');\n        const since = Date.now() - periodMs;\n        return new Promise((resolve, reject) => {\n            const transaction = this.db.transaction(['behaviors'], 'readonly');\n            const store = transaction.objectStore('behaviors');\n            const request = store.openCursor();\n            const recent = [];\n            request.onsuccess = (event) => {\n                const cursor = event.target.result;\n                if (cursor) {\n                    const behavior = cursor.value;\n                    // On prend toutes les interactions récentes de ce comportement\n                    const filtered = (behavior.interactions || []).filter(i => i.timestamp >= since);\n                    for (const i of filtered) {\n                        recent.push({ ...i, url: behavior.url });\n                    }\n                    cursor.continue();\n                }\n                else {\n                    // Tri par timestamp décroissant\n                    recent.sort((a, b) => b.timestamp - a.timestamp);\n                    resolve(recent);\n                }\n            };\n            request.onerror = () => reject(request.error);\n        });\n    }\n}\nexports.SymbiontStorage = SymbiontStorage;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.URL = exports.DNS = void 0;\nconst sha1_js_1 = require(\"./sha1.js\");\nconst v35_js_1 = require(\"./v35.js\");\nvar v35_js_2 = require(\"./v35.js\");\nObject.defineProperty(exports, \"DNS\", { enumerable: true, get: function () { return v35_js_2.DNS; } });\nObject.defineProperty(exports, \"URL\", { enumerable: true, get: function () { return v35_js_2.URL; } });\nfunction v5(value, namespace, buf, offset) {\n    return (0, v35_js_1.default)(0x50, sha1_js_1.default, value, namespace, buf, offset);\n}\nv5.DNS = v35_js_1.DNS;\nv5.URL = v35_js_1.URL;\nexports.default = v5;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst parse_js_1 = require(\"./parse.js\");\nconst stringify_js_1 = require(\"./stringify.js\");\nfunction v1ToV6(uuid) {\n    const v1Bytes = typeof uuid === 'string' ? (0, parse_js_1.default)(uuid) : uuid;\n    const v6Bytes = _v1ToV6(v1Bytes);\n    return typeof uuid === 'string' ? (0, stringify_js_1.unsafeStringify)(v6Bytes) : v6Bytes;\n}\nexports.default = v1ToV6;\nfunction _v1ToV6(v1Bytes) {\n    return Uint8Array.of(((v1Bytes[6] & 0x0f) << 4) | ((v1Bytes[7] >> 4) & 0x0f), ((v1Bytes[7] & 0x0f) << 4) | ((v1Bytes[4] & 0xf0) >> 4), ((v1Bytes[4] & 0x0f) << 4) | ((v1Bytes[5] & 0xf0) >> 4), ((v1Bytes[5] & 0x0f) << 4) | ((v1Bytes[0] & 0xf0) >> 4), ((v1Bytes[0] & 0x0f) << 4) | ((v1Bytes[1] & 0xf0) >> 4), ((v1Bytes[1] & 0x0f) << 4) | ((v1Bytes[2] & 0xf0) >> 4), 0x60 | (v1Bytes[2] & 0x0f), v1Bytes[3], v1Bytes[8], v1Bytes[9], v1Bytes[10], v1Bytes[11], v1Bytes[12], v1Bytes[13], v1Bytes[14], v1Bytes[15]);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.URL = exports.DNS = void 0;\nconst md5_js_1 = require(\"./md5.js\");\nconst v35_js_1 = require(\"./v35.js\");\nvar v35_js_2 = require(\"./v35.js\");\nObject.defineProperty(exports, \"DNS\", { enumerable: true, get: function () { return v35_js_2.DNS; } });\nObject.defineProperty(exports, \"URL\", { enumerable: true, get: function () { return v35_js_2.URL; } });\nfunction v3(value, namespace, buf, offset) {\n    return (0, v35_js_1.default)(0x30, md5_js_1.default, value, namespace, buf, offset);\n}\nv3.DNS = v35_js_1.DNS;\nv3.URL = v35_js_1.URL;\nexports.default = v3;\n","\"use strict\";\n/**\n * PatternDetector - Utilitaires de détection de motifs dans des séquences d'événements\n * - Détection de répétitions, alternances, bursts, patterns temporels\n * - Utilisable avec NavigationCortex ou tout flux d'événements\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PatternDetector = void 0;\nclass PatternDetector {\n    /**\n     * Détecte les répétitions d'un même type d'événement\n     */\n    static detectRepetition(events, minCount = 3) {\n        const counts = {};\n        for (const e of events)\n            counts[e.type] = (counts[e.type] || 0) + 1;\n        return Object.entries(counts)\n            .filter(([_, c]) => c >= minCount)\n            .map(([type, c]) => ({ type: 'repetition', score: c, details: { eventType: type } }));\n    }\n    /**\n     * Détecte des alternances régulières entre deux types d'événements\n     */\n    static detectAlternance(events, typeA, typeB, minLength = 4) {\n        let alternance = 0;\n        let last = null;\n        for (const e of events) {\n            if ((e.type === typeA || e.type === typeB) && e.type !== last) {\n                alternance++;\n                last = e.type;\n            }\n            else if (e.type === last) {\n                alternance = 1;\n                last = e.type;\n            }\n        }\n        if (alternance >= minLength) {\n            return [{ type: 'alternance', score: alternance, details: { typeA, typeB } }];\n        }\n        return [];\n    }\n    /**\n     * Détecte des bursts (séquences rapprochées dans le temps)\n     */\n    static detectBurst(events, maxInterval = 1000, minCount = 3) {\n        if (events.length < minCount)\n            return [];\n        let burstCount = 1;\n        let maxBurst = 1;\n        for (let i = 1; i < events.length; i++) {\n            if (events[i].timestamp - events[i - 1].timestamp <= maxInterval) {\n                burstCount++;\n                maxBurst = Math.max(maxBurst, burstCount);\n            }\n            else {\n                burstCount = 1;\n            }\n        }\n        if (maxBurst >= minCount) {\n            return [{ type: 'burst', score: maxBurst, details: { maxInterval } }];\n        }\n        return [];\n    }\n    /**\n     * Détecte des motifs temporels (périodicité, cycles)\n     */\n    static detectTemporalPattern(events, minPeriod = 1000, tolerance = 0.2) {\n        if (events.length < 3)\n            return [];\n        const intervals = [];\n        for (let i = 1; i < events.length; i++) {\n            intervals.push(events[i].timestamp - events[i - 1].timestamp);\n        }\n        const avg = intervals.reduce((a, b) => a + b, 0) / intervals.length;\n        const variance = intervals.reduce((a, b) => a + Math.pow(b - avg, 2), 0) / intervals.length;\n        const std = Math.sqrt(variance);\n        if (avg >= minPeriod && std / avg < tolerance) {\n            return [{ type: 'temporal', score: avg, details: { std, count: events.length } }];\n        }\n        return [];\n    }\n}\nexports.PatternDetector = PatternDetector;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst regex_js_1 = require(\"./regex.js\");\nfunction validate(uuid) {\n    return typeof uuid === 'string' && regex_js_1.default.test(uuid);\n}\nexports.default = validate;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst validate_js_1 = require(\"./validate.js\");\nfunction version(uuid) {\n    if (!(0, validate_js_1.default)(uuid)) {\n        throw TypeError('Invalid UUID');\n    }\n    return parseInt(uuid.slice(14, 15), 16);\n}\nexports.default = version;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexports.default = { randomUUID };\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst validate_js_1 = require(\"./validate.js\");\nfunction parse(uuid) {\n    if (!(0, validate_js_1.default)(uuid)) {\n        throw TypeError('Invalid UUID');\n    }\n    let v;\n    return Uint8Array.of((v = parseInt(uuid.slice(0, 8), 16)) >>> 24, (v >>> 16) & 0xff, (v >>> 8) & 0xff, v & 0xff, (v = parseInt(uuid.slice(9, 13), 16)) >>> 8, v & 0xff, (v = parseInt(uuid.slice(14, 18), 16)) >>> 8, v & 0xff, (v = parseInt(uuid.slice(19, 23), 16)) >>> 8, v & 0xff, ((v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000) & 0xff, (v / 0x100000000) & 0xff, (v >>> 24) & 0xff, (v >>> 16) & 0xff, (v >>> 8) & 0xff, v & 0xff);\n}\nexports.default = parse;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction f(s, x, y, z) {\n    switch (s) {\n        case 0:\n            return (x & y) ^ (~x & z);\n        case 1:\n            return x ^ y ^ z;\n        case 2:\n            return (x & y) ^ (x & z) ^ (y & z);\n        case 3:\n            return x ^ y ^ z;\n    }\n}\nfunction ROTL(x, n) {\n    return (x << n) | (x >>> (32 - n));\n}\nfunction sha1(bytes) {\n    const K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n    const H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n    const newBytes = new Uint8Array(bytes.length + 1);\n    newBytes.set(bytes);\n    newBytes[bytes.length] = 0x80;\n    bytes = newBytes;\n    const l = bytes.length / 4 + 2;\n    const N = Math.ceil(l / 16);\n    const M = new Array(N);\n    for (let i = 0; i < N; ++i) {\n        const arr = new Uint32Array(16);\n        for (let j = 0; j < 16; ++j) {\n            arr[j] =\n                (bytes[i * 64 + j * 4] << 24) |\n                    (bytes[i * 64 + j * 4 + 1] << 16) |\n                    (bytes[i * 64 + j * 4 + 2] << 8) |\n                    bytes[i * 64 + j * 4 + 3];\n        }\n        M[i] = arr;\n    }\n    M[N - 1][14] = ((bytes.length - 1) * 8) / Math.pow(2, 32);\n    M[N - 1][14] = Math.floor(M[N - 1][14]);\n    M[N - 1][15] = ((bytes.length - 1) * 8) & 0xffffffff;\n    for (let i = 0; i < N; ++i) {\n        const W = new Uint32Array(80);\n        for (let t = 0; t < 16; ++t) {\n            W[t] = M[i][t];\n        }\n        for (let t = 16; t < 80; ++t) {\n            W[t] = ROTL(W[t - 3] ^ W[t - 8] ^ W[t - 14] ^ W[t - 16], 1);\n        }\n        let a = H[0];\n        let b = H[1];\n        let c = H[2];\n        let d = H[3];\n        let e = H[4];\n        for (let t = 0; t < 80; ++t) {\n            const s = Math.floor(t / 20);\n            const T = (ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[t]) >>> 0;\n            e = d;\n            d = c;\n            c = ROTL(b, 30) >>> 0;\n            b = a;\n            a = T;\n        }\n        H[0] = (H[0] + a) >>> 0;\n        H[1] = (H[1] + b) >>> 0;\n        H[2] = (H[2] + c) >>> 0;\n        H[3] = (H[3] + d) >>> 0;\n        H[4] = (H[4] + e) >>> 0;\n    }\n    return Uint8Array.of(H[0] >> 24, H[0] >> 16, H[0] >> 8, H[0], H[1] >> 24, H[1] >> 16, H[1] >> 8, H[1], H[2] >> 24, H[2] >> 16, H[2] >> 8, H[2], H[3] >> 24, H[3] >> 16, H[3] >> 8, H[3], H[4] >> 24, H[4] >> 16, H[4] >> 8, H[4]);\n}\nexports.default = sha1;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InvitationService = void 0;\nclass InvitationService {\n    constructor(storage) {\n        this.storage = storage;\n    }\n    // Génère un code d'invitation unique et un motif/couleur symbolique\n    async generateInvitation(donorId) {\n        const code = (await Promise.resolve().then(() => __importStar(require('uuid')))).v4().slice(0, 8).toUpperCase();\n        const symbolicLink = this.generateSymbolicLink();\n        const invitation = {\n            code,\n            donorId,\n            symbolicLink,\n            used: false,\n            createdAt: Date.now(),\n        };\n        await this.storage.addInvitation(invitation);\n        return invitation;\n    }\n    // Valide et consomme un code d'invitation\n    async consumeInvitation(code, receiverId) {\n        const invitation = await this.storage.getInvitation(code);\n        if (!invitation || invitation.used)\n            return null;\n        invitation.used = true;\n        invitation.receiverId = receiverId;\n        invitation.usedAt = Date.now();\n        await this.storage.updateInvitation(invitation);\n        return invitation;\n    }\n    // Vérifie la validité d'un code\n    async isValid(code) {\n        const invitation = await this.storage.getInvitation(code);\n        return !!invitation && !invitation.used;\n    }\n    // Génère un motif/couleur symbolique (exemple simple)\n    generateSymbolicLink() {\n        const colors = ['#FF00FF', '#00FFFF', '#FFFF00', '#FF8800', '#00FF88', '#8800FF'];\n        return colors[Math.floor(Math.random() * colors.length)];\n    }\n    // Pour tests ou export\n    async getAllInvitations() {\n        return await this.storage.getAllInvitations();\n    }\n}\nexports.InvitationService = InvitationService;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.URL = exports.DNS = exports.stringToBytes = void 0;\nconst parse_js_1 = require(\"./parse.js\");\nconst stringify_js_1 = require(\"./stringify.js\");\nfunction stringToBytes(str) {\n    str = unescape(encodeURIComponent(str));\n    const bytes = new Uint8Array(str.length);\n    for (let i = 0; i < str.length; ++i) {\n        bytes[i] = str.charCodeAt(i);\n    }\n    return bytes;\n}\nexports.stringToBytes = stringToBytes;\nexports.DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexports.URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nfunction v35(version, hash, value, namespace, buf, offset) {\n    const valueBytes = typeof value === 'string' ? stringToBytes(value) : value;\n    const namespaceBytes = typeof namespace === 'string' ? (0, parse_js_1.default)(namespace) : namespace;\n    if (typeof namespace === 'string') {\n        namespace = (0, parse_js_1.default)(namespace);\n    }\n    if (namespace?.length !== 16) {\n        throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    }\n    let bytes = new Uint8Array(16 + valueBytes.length);\n    bytes.set(namespaceBytes);\n    bytes.set(valueBytes, namespaceBytes.length);\n    bytes = hash(bytes);\n    bytes[6] = (bytes[6] & 0x0f) | version;\n    bytes[8] = (bytes[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = bytes[i];\n        }\n        return buf;\n    }\n    return (0, stringify_js_1.unsafeStringify)(bytes);\n}\nexports.default = v35;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BackgroundService = void 0;\n// src/background/index.ts\n// Point d'entrée Service Worker (Neural Core)\nconst MessageBus_1 = require(\"../shared/messaging/MessageBus\");\nconst SymbiontStorage_1 = require(\"../core/storage/SymbiontStorage\");\nconst NavigationObserver_1 = require(\"../shared/observers/NavigationObserver\");\nconst InvitationService_1 = require(\"./services/InvitationService\");\nconst MurmureService_1 = require(\"./services/MurmureService\");\nconst PatternDetector_1 = require(\"../core/PatternDetector\");\nclass BackgroundService {\n    constructor() {\n        this.organism = null;\n        this.activated = false;\n        this.events = [];\n        this.collectiveThresholds = [10, 50, 100, 250, 500];\n        this.reachedThresholds = [];\n        this.messageBus = new MessageBus_1.MessageBus('background');\n        this.storage = new SymbiontStorage_1.SymbiontStorage();\n        this.navigationObserver = new NavigationObserver_1.NavigationObserver(this.messageBus);\n        this.invitationService = new InvitationService_1.InvitationService(this.storage);\n        this.murmureService = new MurmureService_1.MurmureService();\n        // Récupère les seuils déjà atteints (persistance locale)\n        const saved = localStorage.getItem('symbiont_collective_thresholds');\n        this.reachedThresholds = saved ? JSON.parse(saved) : [];\n        this.initialize();\n    }\n    async initialize() {\n        try {\n            // Initialize storage\n            await this.storage.initialize();\n            // Vérifier l'état d'activation (stocké en localStorage ou IndexedDB si besoin)\n            this.activated = localStorage.getItem('symbiont_activated') === 'true';\n            // Load or create organism UNIQUEMENT si activé\n            if (this.activated) {\n                this.organism = await this.storage.getOrganism();\n                if (!this.organism) {\n                    this.organism = this.createNewOrganism();\n                    await this.storage.saveOrganism(this.organism);\n                }\n            }\n            else {\n                this.organism = null;\n            }\n            // Setup message handlers\n            this.setupMessageHandlers();\n            // Start periodic tasks\n            this.startPeriodicTasks();\n            console.log('Background service initialized');\n        }\n        catch (error) {\n            console.error('Failed to initialize background service:', error);\n        }\n    }\n    createNewOrganism() {\n        const visualDNA = this.generateVisualDNA();\n        return {\n            id: crypto.randomUUID(),\n            generation: 1,\n            health: 100,\n            energy: 100,\n            traits: {\n                curiosity: Math.random() * 100,\n                focus: Math.random() * 100,\n                rhythm: Math.random() * 100,\n                empathy: Math.random() * 100,\n                creativity: Math.random() * 100,\n            },\n            visualDNA,\n            lastMutation: Date.now(),\n            mutations: [],\n            createdAt: Date.now(),\n            dna: visualDNA\n        };\n    }\n    generateVisualDNA() {\n        // Generate a unique visual DNA string\n        const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n        let result = '';\n        for (let i = 0; i < 64; i++) {\n            result += chars.charAt(Math.floor(Math.random() * chars.length));\n        }\n        return result;\n    }\n    setupMessageHandlers() {\n        // Handle page visits\n        this.messageBus.on(MessageBus_1.MessageType.PAGE_VISIT, async (message) => {\n            const { url, title } = message.payload;\n            // Update behavior data\n            let behavior = await this.storage.getBehavior(url) || {\n                url,\n                visitCount: 0,\n                totalTime: 0,\n                scrollDepth: 0,\n                lastVisit: Date.now(),\n                interactions: [],\n            };\n            behavior.visitCount++;\n            behavior.lastVisit = Date.now();\n            await this.storage.saveBehavior(behavior);\n            // Enregistre l'événement dans l'historique\n            this.events.push({ type: 'visit', timestamp: Date.now(), url });\n            // Update organism based on behavior\n            this.updateOrganismTraits(url, title);\n            this.analyzeContextualPatterns();\n        });\n        // Handle scroll events\n        this.messageBus.on(MessageBus_1.MessageType.SCROLL_EVENT, async (message) => {\n            const { url, scrollDepth } = message.payload;\n            const behavior = await this.storage.getBehavior(url);\n            if (behavior) {\n                behavior.scrollDepth = Math.max(behavior.scrollDepth, scrollDepth);\n                await this.storage.saveBehavior(behavior);\n            }\n            // Enregistre l'événement dans l'historique\n            this.events.push({ type: 'scroll', timestamp: Date.now(), url });\n            this.analyzeContextualPatterns();\n        });\n        // Handler pour interactions utilisateur (à brancher si non existant)\n        this.messageBus.on(MessageBus_1.MessageType.INTERACTION_DETECTED, (message) => {\n            const { type, timestamp, target, data } = message.payload;\n            this.events.push({ type, timestamp, target, ...data });\n            this.analyzeContextualPatterns();\n        });\n        // Invitation: génération\n        this.messageBus.on(MessageBus_1.MessageType.GENERATE_INVITATION, async (message) => {\n            const { donorId } = message.payload;\n            const invitation = await this.invitationService.generateInvitation(donorId);\n            this.messageBus.send({\n                type: MessageBus_1.MessageType.INVITATION_GENERATED,\n                payload: invitation\n            });\n        });\n        // Invitation: validation/consommation\n        this.messageBus.on(MessageBus_1.MessageType.CONSUME_INVITATION, async (message) => {\n            const { code, receiverId } = message.payload;\n            const invitation = await this.invitationService.consumeInvitation(code, receiverId);\n            if (invitation) {\n                this.activated = true;\n                localStorage.setItem('symbiont_activated', 'true');\n                // Créer l'organisme à l'activation\n                if (!this.organism) {\n                    this.organism = this.createNewOrganism();\n                    await this.storage.saveOrganism(this.organism);\n                }\n            }\n            this.messageBus.send({\n                type: MessageBus_1.MessageType.INVITATION_CONSUMED,\n                payload: invitation\n            });\n        });\n        // Invitation: vérification\n        this.messageBus.on(MessageBus_1.MessageType.CHECK_INVITATION, async (message) => {\n            const { code } = message.payload;\n            const valid = await this.invitationService.isValid(code);\n            this.messageBus.send({\n                type: MessageBus_1.MessageType.INVITATION_CHECKED,\n                payload: { code, valid }\n            });\n        });\n        // --- Handlers pour la lignée et l'historique d'invitation ---\n        this.messageBus.on(MessageBus_1.MessageType.GET_INVITER, async (message) => {\n            const { userId } = message.payload;\n            // Recherche de l'invitation où receiverId === userId\n            const all = await this.invitationService.getAllInvitations();\n            const inviter = all.find(inv => inv.receiverId === userId);\n            this.messageBus.send({\n                type: MessageBus_1.MessageType.INVITER_RESULT,\n                payload: inviter || null\n            });\n        });\n        this.messageBus.on(MessageBus_1.MessageType.GET_INVITEES, async (message) => {\n            const { userId } = message.payload;\n            // Recherche des invitations où donorId === userId\n            const all = await this.invitationService.getAllInvitations();\n            const invitees = all.filter(inv => inv.donorId === userId);\n            this.messageBus.send({\n                type: MessageBus_1.MessageType.INVITEES_RESULT,\n                payload: invitees\n            });\n        });\n        this.messageBus.on(MessageBus_1.MessageType.GET_INVITATION_HISTORY, async (message) => {\n            const { userId } = message.payload;\n            // Historique = invitations reçues ou envoyées\n            const all = await this.invitationService.getAllInvitations();\n            const history = [\n                ...all.filter(inv => inv.receiverId === userId).map(inv => ({ ...inv, type: 'reçue' })),\n                ...all.filter(inv => inv.donorId === userId).map(inv => ({ ...inv, type: 'envoyée' }))\n            ];\n            this.messageBus.send({\n                type: MessageBus_1.MessageType.INVITATION_HISTORY_RESULT,\n                payload: history\n            });\n        });\n        // --- Rituel de mutation partagée ---\n        const sharedMutationSessions = new Map();\n        this.messageBus.on(MessageBus_1.MessageType.REQUEST_SHARED_MUTATION, (message) => {\n            const { initiatorId, traits } = message.payload;\n            const code = Math.random().toString(36).substr(2, 6).toUpperCase();\n            const expiresAt = Date.now() + 1000 * 60 * 5; // 5 min\n            sharedMutationSessions.set(code, { initiatorId, traits, expiresAt });\n            this.messageBus.send({\n                type: MessageBus_1.MessageType.SHARED_MUTATION_CODE,\n                payload: { code, initiatorId, expiresAt }\n            });\n        });\n        this.messageBus.on(MessageBus_1.MessageType.ACCEPT_SHARED_MUTATION, (message) => {\n            const { code, receiverId, traits } = message.payload;\n            const session = sharedMutationSessions.get(code);\n            if (!session || session.expiresAt < Date.now()) {\n                this.messageBus.send({\n                    type: MessageBus_1.MessageType.SHARED_MUTATION_RESULT,\n                    payload: { error: 'Code expiré ou invalide.' }\n                });\n                return;\n            }\n            // Fusionner les traits (moyenne)\n            const mergedTraits = { ...session.traits };\n            for (const key of Object.keys(traits)) {\n                mergedTraits[key] = (mergedTraits[key] ?? 0 + traits[key] ?? 0) / 2;\n            }\n            sharedMutationSessions.delete(code);\n            this.messageBus.send({\n                type: MessageBus_1.MessageType.SHARED_MUTATION_RESULT,\n                payload: {\n                    initiatorId: session.initiatorId,\n                    receiverId,\n                    mergedTraits,\n                    timestamp: Date.now()\n                }\n            });\n        });\n        // --- Rituel de réveil collectif (simple, local) ---\n        let collectiveWakeParticipants = new Set();\n        let collectiveWakeTimeout = null;\n        this.messageBus.on(MessageBus_1.MessageType.COLLECTIVE_WAKE_REQUEST, (message) => {\n            const { userId } = message.payload;\n            collectiveWakeParticipants.add(userId);\n            if (!collectiveWakeTimeout) {\n                collectiveWakeTimeout = setTimeout(() => {\n                    this.messageBus.send({\n                        type: MessageBus_1.MessageType.COLLECTIVE_WAKE_RESULT,\n                        payload: {\n                            participants: Array.from(collectiveWakeParticipants),\n                            triggeredAt: Date.now()\n                        }\n                    });\n                    collectiveWakeParticipants.clear();\n                    collectiveWakeTimeout = null;\n                }, 10000); // 10 secondes pour simuler un réveil collectif\n            }\n        });\n        // --- Transmission contextuelle ---\n        const triggerContextualInvitation = (context) => {\n            const userId = localStorage.getItem('symbiont_user_id') || 'unknown';\n            const invitation = this.invitationService.generateInvitation(userId);\n            this.messageBus.send({\n                type: MessageBus_1.MessageType.CONTEXTUAL_INVITATION,\n                payload: { invitation, context }\n            });\n        };\n        // Détection mutation rare (ex : cognitive)\n        const originalGenerateMutation = this.generateMutation.bind(this);\n        this.generateMutation = () => {\n            const mutation = originalGenerateMutation();\n            if (mutation.type === 'cognitive') {\n                triggerContextualInvitation('mutation_cognitive');\n            }\n            return mutation;\n        };\n        // Détection seuil de traits (ex : curiosité > 90)\n        const originalUpdateOrganismTraits = this.updateOrganismTraits.bind(this);\n        this.updateOrganismTraits = async (url, title) => {\n            await originalUpdateOrganismTraits(url, title);\n            if (this.organism && this.organism.traits.curiosity > 90) {\n                triggerContextualInvitation('curiosity_threshold');\n            }\n        };\n        // Détection longue inactivité (ex : 30 min sans interaction)\n        let lastActivity = Date.now();\n        chrome.idle.onStateChanged.addListener((state) => {\n            if (state === 'idle') {\n                lastActivity = Date.now();\n            }\n            else if (state === 'active' && Date.now() - lastActivity > 1000 * 60 * 30) {\n                triggerContextualInvitation('long_inactivity');\n            }\n        });\n        // --- Rituels secrets ---\n        const SECRET_CODES = ['SYMBIOSE', 'AWAKEN', 'ECHO'];\n        this.messageBus.on(MessageBus_1.MessageType.SECRET_CODE_ENTERED, (message) => {\n            const { code } = message.payload;\n            if (SECRET_CODES.includes(code.toUpperCase())) {\n                // Déclencher un effet spécial (ex : mutation unique)\n                this.messageBus.send({\n                    type: MessageBus_1.MessageType.SECRET_RITUAL_TRIGGERED,\n                    payload: { code, effect: 'mutation_unique', timestamp: Date.now() }\n                });\n            }\n        });\n    }\n    async updateOrganismTraits(url, title) {\n        if (!this.organism)\n            return;\n        // Simple trait evolution based on content type\n        const urlLower = url.toLowerCase();\n        const titleLower = title.toLowerCase();\n        // Creativity boost from technical/creative sites\n        if (urlLower.includes('github') || urlLower.includes('stackoverflow') ||\n            urlLower.includes('codepen') || urlLower.includes('dribbble')) {\n            this.organism.traits.creativity += 0.5;\n        }\n        // Focus boost from documentation/learning sites\n        if (urlLower.includes('docs') || urlLower.includes('wiki') ||\n            urlLower.includes('tutorial') || titleLower.includes('guide')) {\n            this.organism.traits.focus += 0.3;\n        }\n        // Empathy boost from social/communication sites\n        if (urlLower.includes('twitter') || urlLower.includes('linkedin') ||\n            urlLower.includes('facebook') || urlLower.includes('reddit')) {\n            this.organism.traits.empathy += 0.4;\n        }\n        // Curiosity boost from exploration\n        const domain = new URL(url).hostname;\n        const isNewDomain = !(await this.hasVisitedDomain(domain));\n        if (isNewDomain) {\n            this.organism.traits.curiosity += 1.0;\n        }\n        // Normalize traits (keep between 0-100)\n        if (!this.organism)\n            return;\n        const traits = this.organism.traits;\n        if (!traits)\n            return;\n        Object.keys(traits).forEach(trait => {\n            traits[trait] =\n                Math.max(0, Math.min(100, traits[trait]));\n        });\n        // Check for mutations\n        await this.checkForMutations();\n        // Save updated organism\n        await this.storage.saveOrganism(this.organism);\n        // Détection de pattern simple\n        let pattern = 'default';\n        // Exemples de détection naïve (à affiner)\n        if (await this.isLoop(url))\n            pattern = 'loop';\n        else if (await this.isIdle())\n            pattern = 'idle';\n        else if (await this.isExploration(url))\n            pattern = 'exploration';\n        else if (await this.isRoutine(url))\n            pattern = 'routine';\n        // Broadcast update\n        this.messageBus.send({\n            type: MessageBus_1.MessageType.ORGANISM_UPDATE,\n            payload: {\n                state: this.organism,\n                mutations: await this.storage.getRecentMutations(5),\n            },\n        });\n        // Générer et envoyer un murmure contextuel\n        const murmure = this.murmureService.generateMurmur(pattern);\n        this.messageBus.send({\n            type: MessageBus_1.MessageType.MURMUR,\n            payload: { text: murmure, pattern, timestamp: Date.now() }\n        });\n    }\n    async hasVisitedDomain(domain) {\n        // Check if we've visited this domain before\n        const tabs = await chrome.tabs.query({});\n        return tabs.some(tab => tab.url && new URL(tab.url).hostname === domain);\n    }\n    async checkForMutations() {\n        if (!this.organism)\n            return;\n        const now = Date.now();\n        const timeSinceLastMutation = now - this.organism.lastMutation;\n        // Mutation probability increases with time\n        const mutationProbability = Math.min(0.5, timeSinceLastMutation / (1000 * 60 * 60)); // Max 50% after 1 hour\n        if (Math.random() < mutationProbability) {\n            const mutation = this.generateMutation();\n            await this.storage.addMutation(mutation);\n            this.organism.lastMutation = now;\n            // Apply mutation effects\n            this.applyMutation(mutation);\n        }\n    }\n    generateMutation() {\n        const types = ['visual', 'behavioral', 'cognitive'];\n        const type = types[Math.floor(Math.random() * types.length)];\n        return {\n            type,\n            trigger: this.getMutationTrigger(type),\n            magnitude: Math.random() * 0.5 + 0.1, // 0.1 to 0.6\n            timestamp: Date.now(),\n        };\n    }\n    getMutationTrigger(type) {\n        const triggers = {\n            visual: ['color_shift', 'pattern_change', 'size_fluctuation', 'opacity_variation'],\n            behavioral: ['navigation_speed', 'content_preference', 'interaction_pattern'],\n            cognitive: ['memory_retention', 'pattern_recognition', 'association_strength'],\n        };\n        const typeTriggers = triggers[type];\n        return typeTriggers[Math.floor(Math.random() * typeTriggers.length)];\n    }\n    applyMutation(mutation) {\n        if (!this.organism)\n            return;\n        switch (mutation.type) {\n            case 'visual':\n                // Modify visual DNA\n                this.organism.visualDNA = this.mutateVisualDNA(this.organism.visualDNA, mutation.magnitude);\n                break;\n            case 'behavioral':\n                // Adjust traits based on mutation\n                const traitKeys = Object.keys(this.organism.traits);\n                const randomTrait = traitKeys[Math.floor(Math.random() * traitKeys.length)];\n                this.organism.traits[randomTrait] += (Math.random() - 0.5) * mutation.magnitude * 20;\n                break;\n            case 'cognitive':\n                // Affect multiple traits slightly\n                if (!this.organism)\n                    return;\n                const traits = this.organism.traits;\n                if (!traits)\n                    return;\n                Object.keys(traits).forEach(trait => {\n                    traits[trait] +=\n                        (Math.random() - 0.5) * mutation.magnitude * 5;\n                });\n                break;\n        }\n    }\n    mutateVisualDNA(dna, magnitude) {\n        const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n        const numChanges = Math.floor(dna.length * magnitude);\n        let newDNA = dna.split('');\n        for (let i = 0; i < numChanges; i++) {\n            const position = Math.floor(Math.random() * dna.length);\n            newDNA[position] = chars.charAt(Math.floor(Math.random() * chars.length));\n        }\n        return newDNA.join('');\n    }\n    startPeriodicTasks() {\n        // Health decay - organism needs attention\n        setInterval(() => {\n            if (this.organism && this.organism.health > 0) {\n                this.organism.health = Math.max(0, this.organism.health - 0.1);\n                this.organism.energy = Math.max(0, this.organism.energy - 0.05);\n            }\n        }, 1000 * 60); // Every minute\n        // Periodic sync\n        setInterval(async () => {\n            if (this.organism) {\n                await this.storage.saveOrganism(this.organism);\n                this.messageBus.send({\n                    type: MessageBus_1.MessageType.ORGANISM_UPDATE,\n                    payload: {\n                        state: this.organism,\n                        mutations: await this.storage.getRecentMutations(5),\n                    },\n                });\n            }\n        }, 1000 * 30); // Every 30 seconds\n    }\n    // Détection naïve de patterns (à améliorer)\n    async isLoop(url) {\n        // Si l'utilisateur visite la même URL plus de 3 fois en 10 minutes\n        const behavior = await this.storage.getBehavior(url);\n        return !!behavior && behavior.visitCount >= 3;\n    }\n    async isIdle() {\n        // Si aucune interaction depuis plus de 10 minutes (exemple)\n        // À implémenter selon la collecte d'activité réelle\n        return false;\n    }\n    async isExploration(url) {\n        // Si le domaine est nouveau ou rarement visité\n        const behavior = await this.storage.getBehavior(url);\n        return !!behavior && behavior.visitCount <= 1;\n    }\n    async isRoutine(url) {\n        // Si le site est visité tous les jours (exemple naïf)\n        const behavior = await this.storage.getBehavior(url);\n        if (!behavior)\n            return false;\n        const now = Date.now();\n        return (now - behavior.lastVisit) < 1000 * 60 * 60 * 24 * 2; // Visité il y a moins de 2 jours\n    }\n    /**\n     * Analyse les patterns contextuels dans l'historique d'événements et déclenche une invitation si nécessaire\n     */\n    async analyzeContextualPatterns() {\n        const now = Date.now();\n        // On ne garde que les événements des 30 dernières minutes\n        this.events = this.events.filter(e => now - e.timestamp < 1000 * 60 * 30);\n        // Détection de burst d'activité (ex: 5 actions en <10s)\n        const bursts = PatternDetector_1.PatternDetector.detectBurst(this.events, 10000, 5);\n        if (bursts.length > 0) {\n            this.triggerContextualInvitation('burst_activity');\n            return;\n        }\n        // Détection de cycles temporels (ex: actions régulières)\n        const cycles = PatternDetector_1.PatternDetector.detectTemporalPattern(this.events, 60000, 0.15);\n        if (cycles.length > 0) {\n            this.triggerContextualInvitation('temporal_cycle');\n            return;\n        }\n        // Détection d'alternance navigation/scroll\n        const alternances = PatternDetector_1.PatternDetector.detectAlternance(this.events, 'visit', 'scroll', 6);\n        if (alternances.length > 0) {\n            this.triggerContextualInvitation('alternance_nav_scroll');\n            return;\n        }\n        // Détection de répétition d'un même type d'action\n        const repetitions = PatternDetector_1.PatternDetector.detectRepetition(this.events, 7);\n        if (repetitions.length > 0) {\n            this.triggerContextualInvitation('repetition_action');\n            return;\n        }\n        // Déclenchement collectif : seuil global d'invitations\n        this.checkCollectiveThreshold();\n    }\n    /**\n     * Vérifie si un seuil collectif de propagation est atteint et déclenche une invitation spéciale si besoin\n     */\n    async checkCollectiveThreshold() {\n        const allInvitations = await this.invitationService.getAllInvitations();\n        const total = allInvitations.length;\n        for (const threshold of this.collectiveThresholds) {\n            if (total >= threshold && !this.reachedThresholds.includes(threshold)) {\n                this.reachedThresholds.push(threshold);\n                localStorage.setItem('symbiont_collective_thresholds', JSON.stringify(this.reachedThresholds));\n                this.triggerContextualInvitation('collective_threshold_' + threshold);\n                break;\n            }\n        }\n    }\n    /**\n     * Déclenche une invitation contextuelle avancée\n     */\n    async triggerContextualInvitation(context) {\n        const userId = localStorage.getItem('symbiont_user_id') || 'unknown';\n        const invitation = await this.invitationService.generateInvitation(userId);\n        this.messageBus.send({\n            type: MessageBus_1.MessageType.CONTEXTUAL_INVITATION,\n            payload: { invitation, context }\n        });\n    }\n}\nexports.BackgroundService = BackgroundService;\n// Initialize the background service\nconst backgroundService = new BackgroundService();\n"],"names":["Object","defineProperty","exports","value","unsafeStringify","validate_js_1","byteToHex","i","push","toString","slice","arr","offset","toLowerCase","uuid","default","TypeError","MurmureService","MURMUR_TEMPLATES_BY_PATTERN","loop","idle","exploration","routine","MURMUR_TEMPLATES_BY_TIME","morning","afternoon","evening","weekend","generateMurmur","pattern","day","Date","getDay","isWeekend","templates","Math","random","floor","length","timeOfDay","hour","getHours","getTimeOfDay","MessageType","MessageBus","constructor","channel","on","type","handler","send","message","subscribe","this","version","validate","v7","v6ToV1","v6","v5","v4","v3","v1ToV6","v1","stringify","parse","NIL","MAX","max_js_1","enumerable","get","nil_js_1","parse_js_1","stringify_js_1","v1_js_1","v1ToV6_js_1","v3_js_1","v4_js_1","v5_js_1","v6_js_1","v6ToV1_js_1","v7_js_1","version_js_1","v1Bytes","v6Bytes","Uint8Array","of","native_js_1","rng_js_1","options","buf","randomUUID","rnds","rng","Error","RangeError","getRandomValues","rnds8","crypto","bind","updateV7State","_state","state","now","msecs","seq","v7Bytes","bytes","getOutputLength","inputLength8","safeAdd","x","y","lsw","md5cmn","q","a","b","s","t","num","cnt","md5ff","c","d","md5gg","md5hh","md5ii","input","uint32ToUint8","len","xpad","Uint32Array","fill","set","olda","oldb","oldc","oldd","wordsToMd5","output","uint8ToUint32","_v6","updateV1State","nsecs","node","undefined","clockseq","tl","tmh","n","isV6","optionsKeys","keys","NavigationObserver","messageBus","SymbiontStorage","db","DB_NAME","DB_VERSION","initialize","Promise","resolve","reject","request","indexedDB","open","onerror","error","onsuccess","result","onupgradeneeded","event","target","objectStoreNames","contains","createObjectStore","keyPath","behaviorStore","createIndex","unique","mutationStore","autoIncrement","getOrganism","transaction","objectStore","saveOrganism","organism","put","id","getBehavior","url","saveBehavior","behavior","addMutation","mutation","add","getRecentMutations","limit","index","openCursor","mutations","cursor","continue","getSetting","key","defaultValue","setSetting","addInvitation","invitation","updateInvitation","getInvitation","code","getAllInvitations","results","getBehaviorPatterns","sort","visitCount","lastVisit","getRecentActivity","periodMs","since","recent","filtered","interactions","filter","timestamp","URL","DNS","sha1_js_1","v35_js_1","v35_js_2","namespace","md5_js_1","PatternDetector","detectRepetition","events","minCount","counts","e","entries","_","map","score","details","eventType","detectAlternance","typeA","typeB","minLength","alternance","last","detectBurst","maxInterval","burstCount","maxBurst","max","detectTemporalPattern","minPeriod","tolerance","intervals","avg","reduce","variance","pow","std","sqrt","count","regex_js_1","test","parseInt","v","f","z","ROTL","K","H","newBytes","l","N","ceil","M","Array","j","W","T","ownKeys","__createBinding","create","o","m","k","k2","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","__setModuleDefault","__importStar","getOwnPropertyNames","ar","prototype","hasOwnProperty","call","mod","InvitationService","storage","generateInvitation","donorId","then","toUpperCase","symbolicLink","generateSymbolicLink","used","createdAt","consumeInvitation","receiverId","usedAt","isValid","colors","stringToBytes","str","unescape","encodeURIComponent","charCodeAt","hash","valueBytes","namespaceBytes","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","MessageBus_1","SymbiontStorage_1","NavigationObserver_1","InvitationService_1","MurmureService_1","PatternDetector_1","activated","collectiveThresholds","reachedThresholds","navigationObserver","invitationService","murmureService","saved","localStorage","getItem","JSON","createNewOrganism","setupMessageHandlers","startPeriodicTasks","console","log","visualDNA","generateVisualDNA","generation","health","energy","traits","curiosity","focus","rhythm","empathy","creativity","lastMutation","dna","charAt","chars","PAGE_VISIT","async","title","payload","totalTime","scrollDepth","updateOrganismTraits","analyzeContextualPatterns","SCROLL_EVENT","INTERACTION_DETECTED","data","GENERATE_INVITATION","INVITATION_GENERATED","CONSUME_INVITATION","setItem","INVITATION_CONSUMED","CHECK_INVITATION","valid","INVITATION_CHECKED","GET_INVITER","userId","inviter","find","inv","INVITER_RESULT","GET_INVITEES","invitees","INVITEES_RESULT","GET_INVITATION_HISTORY","all","history","INVITATION_HISTORY_RESULT","sharedMutationSessions","Map","REQUEST_SHARED_MUTATION","initiatorId","substr","expiresAt","SHARED_MUTATION_CODE","ACCEPT_SHARED_MUTATION","session","SHARED_MUTATION_RESULT","mergedTraits","delete","collectiveWakeParticipants","Set","collectiveWakeTimeout","COLLECTIVE_WAKE_REQUEST","setTimeout","COLLECTIVE_WAKE_RESULT","participants","from","triggeredAt","clear","triggerContextualInvitation","context","CONTEXTUAL_INVITATION","originalGenerateMutation","generateMutation","originalUpdateOrganismTraits","lastActivity","chrome","onStateChanged","addListener","SECRET_CODES","SECRET_CODE_ENTERED","includes","SECRET_RITUAL_TRIGGERED","effect","urlLower","titleLower","domain","hostname","hasVisitedDomain","forEach","trait","min","checkForMutations","isLoop","isIdle","isExploration","isRoutine","ORGANISM_UPDATE","murmure","MURMUR","text","tabs","query","some","tab","timeSinceLastMutation","mutationProbability","applyMutation","types","trigger","getMutationTrigger","magnitude","typeTriggers","visual","behavioral","cognitive","mutateVisualDNA","traitKeys","randomTrait","numChanges","newDNA","split","join","setInterval","checkCollectiveThreshold","total","threshold"],"sourceRoot":""}