"use strict";(self.webpackChunksymbiont=self.webpackChunksymbiont||[]).push([[567],{567:(e,s,n)=>{n.r(s),n.d(s,{GlobalNetworkGraph:()=>l,default:()=>a});var o=n(848),r=n(540);const l=e=>{const[s,n]=(0,r.useState)({network:null,loading:!0,error:null}),[l,a]=(0,r.useState)({zoom:1,offset:{x:0,y:0},hoveredNode:null,selectedNode:null}),t=(0,r.useRef)(null);(0,r.useEffect)((()=>{n((e=>({...e,loading:!0,error:null}))),setTimeout((()=>{try{const s=function(){const e=[],s=[];e.push({id:"ROOT",generation:0,x:200,y:150});for(let n=0;n<3;n++){const o=n/3*2*Math.PI,r=200+60*Math.cos(o),l=150+60*Math.sin(o),a=`A${n}`;e.push({id:a,generation:1,x:r,y:l}),s.push({source:"ROOT",target:a});for(let r=0;r<2;r++){const l=o+(0===r?-.3:.3),t=200+100*Math.cos(l),i=150+100*Math.sin(l),d=`B${n}${r}`;e.push({id:d,generation:2,x:t,y:i}),s.push({source:a,target:d})}}return{nodes:e,links:s}}();n({network:s,loading:!1,error:null}),e.onNodeCountChange&&e.onNodeCountChange(s.nodes.length)}catch{n((e=>({...e,loading:!1,error:"Erreur lors du chargement du réseau"})))}}),1e3)}),[e.onNodeCountChange]);const i=()=>{a((e=>({...e,hoveredNode:null})))};if(s.loading)return(0,o.jsxs)("div",{className:"network-loading",children:[(0,o.jsx)("div",{className:"loading-spinner loading-spinner--medium"}),(0,o.jsx)("p",{children:"Chargement du réseau..."})]});if(s.error||!s.network)return(0,o.jsxs)("div",{className:"network-error",children:[(0,o.jsx)("h3",{children:"Réseau Indisponible"}),(0,o.jsx)("p",{children:s.error||"Impossible de charger le réseau"}),(0,o.jsx)("button",{onClick:()=>window.location.reload(),className:"btn-retry",children:"Réessayer"})]});const{network:d}=s,{zoom:c,offset:h,hoveredNode:u,selectedNode:x}=l;return(0,o.jsxs)("div",{className:"network-container",children:[(0,o.jsxs)("div",{className:"network-header",children:[(0,o.jsx)("h3",{children:"Réseau Global SYMBIONT"}),(0,o.jsxs)("div",{className:"network-stats",children:[(0,o.jsxs)("span",{className:"stat-badge",children:[d.nodes.length," organismes"]}),(0,o.jsxs)("span",{className:"stat-badge",children:[d.links.length," connexions"]})]})]}),(0,o.jsxs)("div",{className:"network-graph-wrapper",children:[(0,o.jsx)("svg",{ref:t,className:"network-svg",width:"100%",height:"300",onWheel:e=>{e.preventDefault(),a((s=>({...s,zoom:Math.max(.5,Math.min(3,s.zoom-.001*e.deltaY))})))},children:(0,o.jsxs)("g",{transform:`translate(${h.x}, ${h.y}) scale(${c})`,children:[(0,o.jsx)("g",{className:"links",children:d.links.map(((e,s)=>{const n=d.nodes.find((s=>s.id===e.source)),r=d.nodes.find((s=>s.id===e.target));return n&&r?(0,o.jsx)("line",{x1:n.x,y1:n.y,x2:r.x,y2:r.y,stroke:"rgba(0, 224, 255, 0.4)",strokeWidth:"2",className:"network-link"},s):null}))}),(0,o.jsx)("g",{className:"nodes",children:d.nodes.map((e=>(0,o.jsxs)("g",{children:[(0,o.jsx)("circle",{cx:e.x,cy:e.y,r:0===e.generation?12:8,fill:0===e.generation?"#ff4b6e":"#00e0ff",stroke:x?.id===e.id?"#ffb700":"rgba(255,255,255,0.3)",strokeWidth:x?.id===e.id?3:1,className:"network-node",onMouseEnter:()=>(e=>{a((s=>({...s,hoveredNode:e})))})(e),onMouseLeave:i,onClick:()=>(e=>{a((s=>({...s,selectedNode:s.selectedNode?.id===e.id?null:e})))})(e),style:{cursor:"pointer"}}),(0,o.jsx)("text",{x:e.x,y:e.y+20,textAnchor:"middle",fontSize:"10",fill:"#ffffff",className:"node-label",children:e.id})]},e.id)))})]})}),u&&(0,o.jsxs)("div",{className:"network-tooltip",children:[(0,o.jsx)("h4",{children:u.id}),(0,o.jsxs)("p",{children:["Génération: ",u.generation]}),(0,o.jsxs)("p",{children:["Position: (",Math.round(u.x),", ",Math.round(u.y),")"]})]})]}),x&&(0,o.jsxs)("div",{className:"node-details",children:[(0,o.jsxs)("h4",{children:["Détails de ",x.id]}),(0,o.jsxs)("div",{className:"detail-grid",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"detail-label",children:"Génération:"}),(0,o.jsx)("span",{className:"detail-value",children:x.generation})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"detail-label",children:"Type:"}),(0,o.jsx)("span",{className:"detail-value",children:0===x.generation?"Racine":"Descendant"})]})]})]}),(0,o.jsxs)("div",{className:"network-controls",children:[(0,o.jsx)("button",{onClick:()=>a((e=>({...e,zoom:Math.min(3,1.2*e.zoom)}))),children:"Zoom +"}),(0,o.jsx)("button",{onClick:()=>a((e=>({...e,zoom:Math.max(.5,e.zoom/1.2)}))),children:"Zoom -"}),(0,o.jsx)("button",{onClick:()=>a((e=>({...e,zoom:1,offset:{x:0,y:0}}))),children:"Reset"})]})]})},a=l}}]);