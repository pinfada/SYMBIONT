{"version":3,"names":["cov_2jzf8he3nh","actualCoverage","s","exports","getRituals","addRitual","updateRitual","deleteRitual","deleteUserRituals","API_URL","process","env","NODE_ENV","b","getAdminHeaders","f","key","window","localStorage","getItem","headers","res","fetch","ok","Error","json","ritual","method","body","JSON","stringify","id","userId","encodeURIComponent"],"sources":["/mnt/c/Users/m_oli/Projets/SYMBIONT/src/shared/ritualsApi.ts"],"sourcesContent":["export interface Ritual {\r\n  _id: string;\r\n  type: string;\r\n  [key: string]: any;\r\n}\r\n\r\nconst API_URL = process.env.NODE_ENV === 'development' ? 'http://localhost:8090' : '';\r\n\r\nfunction getAdminHeaders() {\r\n  const key = typeof window !== 'undefined' ? localStorage.getItem('symbiont_admin_key') : null;\r\n  const headers: Record<string, string> = { 'Content-Type': 'application/json' };\r\n  if (key) headers['x-api-key'] = key;\r\n  return headers;\r\n}\r\n\r\nexport async function getRituals(): Promise<Ritual[]> {\r\n  const res = await fetch(API_URL + '/api/admin/rituals', { headers: getAdminHeaders() });\r\n  if (!res.ok) throw new Error('Erreur r√©seau');\r\n  return res.json();\r\n}\r\n\r\nexport async function addRitual(ritual: Ritual) {\r\n  const res = await fetch(API_URL + '/api/admin/rituals', {\r\n    method: 'POST',\r\n    headers: getAdminHeaders(),\r\n    body: JSON.stringify(ritual)\r\n  });\r\n  if (!res.ok) throw new Error('Erreur ajout rituel');\r\n  return res.json();\r\n}\r\n\r\nexport async function updateRitual(id: string, ritual: Partial<Ritual>) {\r\n  const res = await fetch(API_URL + '/api/admin/rituals/' + id, {\r\n    method: 'PUT',\r\n    headers: getAdminHeaders(),\r\n    body: JSON.stringify(ritual)\r\n  });\r\n  if (!res.ok) throw new Error('Erreur modification rituel');\r\n  return res.json();\r\n}\r\n\r\nexport async function deleteRitual(id: string) {\r\n  const res = await fetch(API_URL + '/api/admin/rituals/' + id, {\r\n    method: 'DELETE',\r\n    headers: getAdminHeaders()\r\n  });\r\n  if (!res.ok) throw new Error('Erreur suppression rituel');\r\n  return res.json();\r\n}\r\n\r\nexport async function deleteUserRituals(userId: string) {\r\n  const res = await fetch(API_URL + '/api/admin/rgpd/' + encodeURIComponent(userId), {\r\n    method: 'DELETE',\r\n    headers: getAdminHeaders()\r\n  });\r\n  if (!res.ok) throw new Error('Erreur suppression RGPD');\r\n  return res.json();\r\n} "],"mappings":"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","ignoreList":[]}