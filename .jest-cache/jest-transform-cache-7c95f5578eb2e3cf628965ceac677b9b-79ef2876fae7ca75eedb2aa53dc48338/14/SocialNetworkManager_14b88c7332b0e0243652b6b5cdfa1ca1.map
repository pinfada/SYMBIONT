{"version":3,"names":["cov_r5dhot8zr","actualCoverage","s","randomUUID","f","replace","c","r","Math","random","v","b","toString","SocialNetworkManager","constructor","memoryBank","security","invitations","_collectiveSessions","Map","generateInvitation","inviterId","context","anonymizedContext","behaviorPattern","anonymizeForSharing","code","invitation","expirationTime","Date","now","createdBy","createdAt","push","facilitateSharedMutation","source","target","history1","loadOrganismHistory","history2","org1","states","org2","id","traitChanges","compatibility","timestamp","mutationType","traits","Object","keys","diff","forEach","trait","abs","length","saveOrganismState","detectCollectiveSync","userIds","fuseTraits","traitSums","count","userId","history","org","k","entries","fused","applyCollectiveBonus","bonus","min","triggerCollectiveWake","trigger","sync","success","details","fusedTraits","empathy","creativity","JSON","stringify","exports"],"sources":["/mnt/c/Users/m_oli/Projets/SYMBIONT/src/social/SocialNetworkManager.ts"],"sourcesContent":["import { InvitationContext, InvitationCode, SharedMutationResult, CollectiveTrigger, WakeResult } from '../shared/types/social'\r\nimport { BehaviorPattern } from '../shared/types/organism'\r\nimport { OrganismMemoryBank } from '../background/OrganismMemoryBank'\r\nimport { SecurityManager } from '../background/SecurityManager'\r\n\r\nfunction randomUUID(): string {\r\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n    const r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8)\r\n    return v.toString(16)\r\n  })\r\n}\r\n\r\ninterface Invitation {\r\n  code: string\r\n  context: InvitationContext\r\n  expirationTime: number\r\n  createdBy: string\r\n  createdAt: number\r\n}\r\n\r\nexport class SocialNetworkManager {\r\n  private invitations: Invitation[] = []\r\n  private memoryBank: OrganismMemoryBank\r\n  private security: SecurityManager\r\n  // @ts-expect-error Sessions réservées pour usage futur\r\n  private _collectiveSessions: Map<string, { participants: string[], traits: Record<string, number> }> = new Map()\r\n\r\n  constructor(memoryBank: OrganismMemoryBank, security: SecurityManager) {\r\n    this.memoryBank = memoryBank\r\n    this.security = security\r\n  }\r\n\r\n  async generateInvitation(inviterId: string, context: InvitationContext): Promise<InvitationCode> {\r\n    // Anonymisation du contexte comportemental\r\n    const anonymizedContext = {\r\n      ...context,\r\n      behaviorPattern: this.security.anonymizeForSharing(context.behaviorPattern as BehaviorPattern)\r\n    }\r\n    const code = randomUUID()\r\n    const invitation: Invitation = {\r\n      code,\r\n      context: anonymizedContext,\r\n      expirationTime: Date.now() + 24 * 60 * 60 * 1000, // 24h\r\n      createdBy: inviterId,\r\n      createdAt: Date.now()\r\n    }\r\n    this.invitations.push(invitation)\r\n    return code\r\n  }\r\n\r\n  async facilitateSharedMutation(source: string, target: string): Promise<SharedMutationResult> {\r\n    // Chargement des organismes depuis la mémoire centrale\r\n    const history1 = await this.memoryBank.loadOrganismHistory(source)\r\n    const history2 = await this.memoryBank.loadOrganismHistory(target)\r\n    const org1 = history1.states[0]\r\n    const org2 = history2.states[0]\r\n    if (!org1 || !org2) {\r\n      return {\r\n        id: '', traitChanges: {}, compatibility: 0, timestamp: Date.now(), mutationType: 'social_exchange'\r\n      }\r\n    }\r\n    // Calcul compatibilité\r\n    const traits = Object.keys(org1.traits)\r\n    let diff = 0\r\n    traits.forEach(trait => {\r\n      diff += Math.abs((org1.traits[trait] || 0) - (org2.traits[trait] || 0))\r\n    })\r\n    const compatibility = 1 - diff / traits.length\r\n    // Sélection de traits à partager\r\n    const traitChanges: Record<string, number> = {}\r\n    traits.forEach(trait => {\r\n      if (Math.random() < 0.5) {\r\n        traitChanges[trait] = (org1.traits[trait] + org2.traits[trait]) / 2\r\n        // Application de la mutation sur les deux organismes\r\n        org1.traits[trait] = traitChanges[trait]\r\n        org2.traits[trait] = traitChanges[trait]\r\n      }\r\n    })\r\n    // Anonymisation des données comportementales échangées (exemple)\r\n    // (À adapter selon le format réel des échanges)\r\n    // const anonymizedData = this.security.anonymizeForSharing(...)\r\n    // Sauvegarde des organismes modifiés\r\n    await this.memoryBank.saveOrganismState(source, org1)\r\n    await this.memoryBank.saveOrganismState(target, org2)\r\n    return {\r\n      id: randomUUID(),\r\n      traitChanges,\r\n      compatibility,\r\n      timestamp: Date.now(),\r\n      mutationType: 'social_exchange'\r\n    }\r\n  }\r\n\r\n  // Détecte une synchronisation collective (plusieurs utilisateurs)\r\n  async detectCollectiveSync(userIds: string[]): Promise<boolean> {\r\n    // Si >3 utilisateurs actifs en même temps, on considère une synchro\r\n    return userIds.length >= 3\r\n  }\r\n\r\n  // Fusionne les traits de plusieurs organismes (moyenne)\r\n  async fuseTraits(userIds: string[]): Promise<Record<string, number>> {\r\n    const traitSums: Record<string, number> = {}\r\n    let count = 0\r\n    for (const userId of userIds) {\r\n      const history = await this.memoryBank.loadOrganismHistory(userId)\r\n      const org = history.states[0]\r\n      if (!org) continue\r\n      for (const [k, v] of Object.entries(org.traits)) {\r\n        traitSums[k] = (traitSums[k] ?? 0) + (v as number)\r\n      }\r\n      count++\r\n    }\r\n    const fused: Record<string, number> = {}\r\n    for (const [k, v] of Object.entries(traitSums)) {\r\n      fused[k] = v / count\r\n    }\r\n    return fused\r\n  }\r\n\r\n  // Applique un effet collectif (bonus)\r\n  async applyCollectiveBonus(userIds: string[], bonus: Record<string, number>) {\r\n    for (const userId of userIds) {\r\n      const history = await this.memoryBank.loadOrganismHistory(userId)\r\n      const org = history.states[0]\r\n      if (!org) continue\r\n      for (const [k, v] of Object.entries(bonus)) {\r\n        org.traits[k] = Math.min(1, (org.traits[k] ?? 0.5) + (v as number))\r\n      }\r\n      await this.memoryBank.saveOrganismState(userId, org)\r\n    }\r\n  }\r\n\r\n  // @ts-expect-error Paramètre réservé pour usage futur\r\n  async triggerCollectiveWake(trigger: CollectiveTrigger, userIds: string[]): Promise<WakeResult> {\r\n    const sync = await this.detectCollectiveSync(userIds)\r\n    if (!sync) return { success: false, details: 'Pas assez de participants.' }\r\n    const fusedTraits = await this.fuseTraits(userIds)\r\n    // Bonus collectif : +0.05 sur l'empathie et la créativité\r\n    await this.applyCollectiveBonus(userIds, { empathy: 0.05, creativity: 0.05 })\r\n    return {\r\n      success: true,\r\n      details: `Réveil collectif réussi pour ${userIds.length} participants. Traits fusionnés : ${JSON.stringify(fusedTraits)}`\r\n    }\r\n  }\r\n} "],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA6BQ;IAAAA,aAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,aAAA;AAAAA,aAAA,GAAAE,CAAA;;;;;;;AAxBR,SAASC,UAAUA,CAAA;EAAA;EAAAH,aAAA,GAAAI,CAAA;EAAAJ,aAAA,GAAAE,CAAA;EACjB,OAAO,sCAAsC,CAACG,OAAO,CAAC,OAAO,EAAE,UAAUC,CAAC;IAAA;IAAAN,aAAA,GAAAI,CAAA;IACxE,MAAMG,CAAC;MAAA;MAAA,CAAAP,aAAA,GAAAE,CAAA,OAAGM,IAAI,CAACC,MAAM,EAAE,GAAG,EAAE,GAAG,CAAC;MAAEC,CAAC;MAAA;MAAA,CAAAV,aAAA,GAAAE,CAAA,OAAGI,CAAC,KAAK,GAAG;MAAA;MAAA,CAAAN,aAAA,GAAAW,CAAA,UAAGJ,CAAC;MAAA;MAAA,CAAAP,aAAA,GAAAW,CAAA,UAAIJ,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC;IAAA;IAAAP,aAAA,GAAAE,CAAA;IACrE,OAAOQ,CAAC,CAACE,QAAQ,CAAC,EAAE,CAAC;EACvB,CAAC,CAAC;AACJ;AAUA,MAAaC,oBAAoB;EAO/BC,YAAYC,UAA8B,EAAEC,QAAyB;IAAA;IAAAhB,aAAA,GAAAI,CAAA;IAAAJ,aAAA,GAAAE,CAAA;IAN7D,KAAAe,WAAW,GAAiB,EAAE;IAGtC;IAAA;IAAAjB,aAAA,GAAAE,CAAA;IACQ,KAAAgB,mBAAmB,GAA4E,IAAIC,GAAG,EAAE;IAAA;IAAAnB,aAAA,GAAAE,CAAA;IAG9G,IAAI,CAACa,UAAU,GAAGA,UAAU;IAAA;IAAAf,aAAA,GAAAE,CAAA;IAC5B,IAAI,CAACc,QAAQ,GAAGA,QAAQ;EAC1B;EAEA,MAAMI,kBAAkBA,CAACC,SAAiB,EAAEC,OAA0B;IAAA;IAAAtB,aAAA,GAAAI,CAAA;IACpE;IACA,MAAMmB,iBAAiB;IAAA;IAAA,CAAAvB,aAAA,GAAAE,CAAA,QAAG;MACxB,GAAGoB,OAAO;MACVE,eAAe,EAAE,IAAI,CAACR,QAAQ,CAACS,mBAAmB,CAACH,OAAO,CAACE,eAAkC;KAC9F;IACD,MAAME,IAAI;IAAA;IAAA,CAAA1B,aAAA,GAAAE,CAAA,QAAGC,UAAU,EAAE;IACzB,MAAMwB,UAAU;IAAA;IAAA,CAAA3B,aAAA,GAAAE,CAAA,QAAe;MAC7BwB,IAAI;MACJJ,OAAO,EAAEC,iBAAiB;MAC1BK,cAAc,EAAEC,IAAI,CAACC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI;MAAE;MAClDC,SAAS,EAAEV,SAAS;MACpBW,SAAS,EAAEH,IAAI,CAACC,GAAG;KACpB;IAAA;IAAA9B,aAAA,GAAAE,CAAA;IACD,IAAI,CAACe,WAAW,CAACgB,IAAI,CAACN,UAAU,CAAC;IAAA;IAAA3B,aAAA,GAAAE,CAAA;IACjC,OAAOwB,IAAI;EACb;EAEA,MAAMQ,wBAAwBA,CAACC,MAAc,EAAEC,MAAc;IAAA;IAAApC,aAAA,GAAAI,CAAA;IAC3D;IACA,MAAMiC,QAAQ;IAAA;IAAA,CAAArC,aAAA,GAAAE,CAAA,QAAG,MAAM,IAAI,CAACa,UAAU,CAACuB,mBAAmB,CAACH,MAAM,CAAC;IAClE,MAAMI,QAAQ;IAAA;IAAA,CAAAvC,aAAA,GAAAE,CAAA,QAAG,MAAM,IAAI,CAACa,UAAU,CAACuB,mBAAmB,CAACF,MAAM,CAAC;IAClE,MAAMI,IAAI;IAAA;IAAA,CAAAxC,aAAA,GAAAE,CAAA,QAAGmC,QAAQ,CAACI,MAAM,CAAC,CAAC,CAAC;IAC/B,MAAMC,IAAI;IAAA;IAAA,CAAA1C,aAAA,GAAAE,CAAA,QAAGqC,QAAQ,CAACE,MAAM,CAAC,CAAC,CAAC;IAAA;IAAAzC,aAAA,GAAAE,CAAA;IAC/B;IAAI;IAAA,CAAAF,aAAA,GAAAW,CAAA,WAAC6B,IAAI;IAAA;IAAA,CAAAxC,aAAA,GAAAW,CAAA,UAAI,CAAC+B,IAAI,GAAE;MAAA;MAAA1C,aAAA,GAAAW,CAAA;MAAAX,aAAA,GAAAE,CAAA;MAClB,OAAO;QACLyC,EAAE,EAAE,EAAE;QAAEC,YAAY,EAAE,EAAE;QAAEC,aAAa,EAAE,CAAC;QAAEC,SAAS,EAAEjB,IAAI,CAACC,GAAG,EAAE;QAAEiB,YAAY,EAAE;OAClF;IACH,CAAC;IAAA;IAAA;MAAA/C,aAAA,GAAAW,CAAA;IAAA;IACD;IACA,MAAMqC,MAAM;IAAA;IAAA,CAAAhD,aAAA,GAAAE,CAAA,QAAG+C,MAAM,CAACC,IAAI,CAACV,IAAI,CAACQ,MAAM,CAAC;IACvC,IAAIG,IAAI;IAAA;IAAA,CAAAnD,aAAA,GAAAE,CAAA,QAAG,CAAC;IAAA;IAAAF,aAAA,GAAAE,CAAA;IACZ8C,MAAM,CAACI,OAAO,CAACC,KAAK,IAAG;MAAA;MAAArD,aAAA,GAAAI,CAAA;MAAAJ,aAAA,GAAAE,CAAA;MACrBiD,IAAI,IAAI3C,IAAI,CAAC8C,GAAG,CAAC;MAAC;MAAA,CAAAtD,aAAA,GAAAW,CAAA,UAAA6B,IAAI,CAACQ,MAAM,CAACK,KAAK,CAAC;MAAA;MAAA,CAAArD,aAAA,GAAAW,CAAA,UAAI,CAAC;MAAK;MAAA,CAAAX,aAAA,GAAAW,CAAA,UAAA+B,IAAI,CAACM,MAAM,CAACK,KAAK,CAAC;MAAA;MAAA,CAAArD,aAAA,GAAAW,CAAA,UAAI,CAAC,EAAC,CAAC;IACzE,CAAC,CAAC;IACF,MAAMkC,aAAa;IAAA;IAAA,CAAA7C,aAAA,GAAAE,CAAA,QAAG,CAAC,GAAGiD,IAAI,GAAGH,MAAM,CAACO,MAAM;IAC9C;IACA,MAAMX,YAAY;IAAA;IAAA,CAAA5C,aAAA,GAAAE,CAAA,QAA2B,EAAE;IAAA;IAAAF,aAAA,GAAAE,CAAA;IAC/C8C,MAAM,CAACI,OAAO,CAACC,KAAK,IAAG;MAAA;MAAArD,aAAA,GAAAI,CAAA;MAAAJ,aAAA,GAAAE,CAAA;MACrB,IAAIM,IAAI,CAACC,MAAM,EAAE,GAAG,GAAG,EAAE;QAAA;QAAAT,aAAA,GAAAW,CAAA;QAAAX,aAAA,GAAAE,CAAA;QACvB0C,YAAY,CAACS,KAAK,CAAC,GAAG,CAACb,IAAI,CAACQ,MAAM,CAACK,KAAK,CAAC,GAAGX,IAAI,CAACM,MAAM,CAACK,KAAK,CAAC,IAAI,CAAC;QACnE;QAAA;QAAArD,aAAA,GAAAE,CAAA;QACAsC,IAAI,CAACQ,MAAM,CAACK,KAAK,CAAC,GAAGT,YAAY,CAACS,KAAK,CAAC;QAAA;QAAArD,aAAA,GAAAE,CAAA;QACxCwC,IAAI,CAACM,MAAM,CAACK,KAAK,CAAC,GAAGT,YAAY,CAACS,KAAK,CAAC;MAC1C,CAAC;MAAA;MAAA;QAAArD,aAAA,GAAAW,CAAA;MAAA;IACH,CAAC,CAAC;IACF;IACA;IACA;IACA;IAAA;IAAAX,aAAA,GAAAE,CAAA;IACA,MAAM,IAAI,CAACa,UAAU,CAACyC,iBAAiB,CAACrB,MAAM,EAAEK,IAAI,CAAC;IAAA;IAAAxC,aAAA,GAAAE,CAAA;IACrD,MAAM,IAAI,CAACa,UAAU,CAACyC,iBAAiB,CAACpB,MAAM,EAAEM,IAAI,CAAC;IAAA;IAAA1C,aAAA,GAAAE,CAAA;IACrD,OAAO;MACLyC,EAAE,EAAExC,UAAU,EAAE;MAChByC,YAAY;MACZC,aAAa;MACbC,SAAS,EAAEjB,IAAI,CAACC,GAAG,EAAE;MACrBiB,YAAY,EAAE;KACf;EACH;EAEA;EACA,MAAMU,oBAAoBA,CAACC,OAAiB;IAAA;IAAA1D,aAAA,GAAAI,CAAA;IAAAJ,aAAA,GAAAE,CAAA;IAC1C;IACA,OAAOwD,OAAO,CAACH,MAAM,IAAI,CAAC;EAC5B;EAEA;EACA,MAAMI,UAAUA,CAACD,OAAiB;IAAA;IAAA1D,aAAA,GAAAI,CAAA;IAChC,MAAMwD,SAAS;IAAA;IAAA,CAAA5D,aAAA,GAAAE,CAAA,QAA2B,EAAE;IAC5C,IAAI2D,KAAK;IAAA;IAAA,CAAA7D,aAAA,GAAAE,CAAA,QAAG,CAAC;IAAA;IAAAF,aAAA,GAAAE,CAAA;IACb,KAAK,MAAM4D,MAAM,IAAIJ,OAAO,EAAE;MAC5B,MAAMK,OAAO;MAAA;MAAA,CAAA/D,aAAA,GAAAE,CAAA,QAAG,MAAM,IAAI,CAACa,UAAU,CAACuB,mBAAmB,CAACwB,MAAM,CAAC;MACjE,MAAME,GAAG;MAAA;MAAA,CAAAhE,aAAA,GAAAE,CAAA,QAAG6D,OAAO,CAACtB,MAAM,CAAC,CAAC,CAAC;MAAA;MAAAzC,aAAA,GAAAE,CAAA;MAC7B,IAAI,CAAC8D,GAAG,EAAE;QAAA;QAAAhE,aAAA,GAAAW,CAAA;QAAAX,aAAA,GAAAE,CAAA;QAAA;MAAA,CAAQ;MAAA;MAAA;QAAAF,aAAA,GAAAW,CAAA;MAAA;MAAAX,aAAA,GAAAE,CAAA;MAClB,KAAK,MAAM,CAAC+D,CAAC,EAAEvD,CAAC,CAAC,IAAIuC,MAAM,CAACiB,OAAO,CAACF,GAAG,CAAChB,MAAM,CAAC,EAAE;QAAA;QAAAhD,aAAA,GAAAE,CAAA;QAC/C0D,SAAS,CAACK,CAAC,CAAC,GAAG;QAAC;QAAA,CAAAjE,aAAA,GAAAW,CAAA,UAAAiD,SAAS,CAACK,CAAC,CAAC;QAAA;QAAA,CAAAjE,aAAA,GAAAW,CAAA,UAAI,CAAC,KAAKD,CAAY;MACpD;MAAC;MAAAV,aAAA,GAAAE,CAAA;MACD2D,KAAK,EAAE;IACT;IACA,MAAMM,KAAK;IAAA;IAAA,CAAAnE,aAAA,GAAAE,CAAA,QAA2B,EAAE;IAAA;IAAAF,aAAA,GAAAE,CAAA;IACxC,KAAK,MAAM,CAAC+D,CAAC,EAAEvD,CAAC,CAAC,IAAIuC,MAAM,CAACiB,OAAO,CAACN,SAAS,CAAC,EAAE;MAAA;MAAA5D,aAAA,GAAAE,CAAA;MAC9CiE,KAAK,CAACF,CAAC,CAAC,GAAGvD,CAAC,GAAGmD,KAAK;IACtB;IAAC;IAAA7D,aAAA,GAAAE,CAAA;IACD,OAAOiE,KAAK;EACd;EAEA;EACA,MAAMC,oBAAoBA,CAACV,OAAiB,EAAEW,KAA6B;IAAA;IAAArE,aAAA,GAAAI,CAAA;IAAAJ,aAAA,GAAAE,CAAA;IACzE,KAAK,MAAM4D,MAAM,IAAIJ,OAAO,EAAE;MAC5B,MAAMK,OAAO;MAAA;MAAA,CAAA/D,aAAA,GAAAE,CAAA,QAAG,MAAM,IAAI,CAACa,UAAU,CAACuB,mBAAmB,CAACwB,MAAM,CAAC;MACjE,MAAME,GAAG;MAAA;MAAA,CAAAhE,aAAA,GAAAE,CAAA,QAAG6D,OAAO,CAACtB,MAAM,CAAC,CAAC,CAAC;MAAA;MAAAzC,aAAA,GAAAE,CAAA;MAC7B,IAAI,CAAC8D,GAAG,EAAE;QAAA;QAAAhE,aAAA,GAAAW,CAAA;QAAAX,aAAA,GAAAE,CAAA;QAAA;MAAA,CAAQ;MAAA;MAAA;QAAAF,aAAA,GAAAW,CAAA;MAAA;MAAAX,aAAA,GAAAE,CAAA;MAClB,KAAK,MAAM,CAAC+D,CAAC,EAAEvD,CAAC,CAAC,IAAIuC,MAAM,CAACiB,OAAO,CAACG,KAAK,CAAC,EAAE;QAAA;QAAArE,aAAA,GAAAE,CAAA;QAC1C8D,GAAG,CAAChB,MAAM,CAACiB,CAAC,CAAC,GAAGzD,IAAI,CAAC8D,GAAG,CAAC,CAAC,EAAE;QAAC;QAAA,CAAAtE,aAAA,GAAAW,CAAA,UAAAqD,GAAG,CAAChB,MAAM,CAACiB,CAAC,CAAC;QAAA;QAAA,CAAAjE,aAAA,GAAAW,CAAA,UAAI,GAAG,KAAKD,CAAY,CAAC;MACrE;MAAC;MAAAV,aAAA,GAAAE,CAAA;MACD,MAAM,IAAI,CAACa,UAAU,CAACyC,iBAAiB,CAACM,MAAM,EAAEE,GAAG,CAAC;IACtD;EACF;EAEA;EACA,MAAMO,qBAAqBA,CAACC,OAA0B,EAAEd,OAAiB;IAAA;IAAA1D,aAAA,GAAAI,CAAA;IACvE,MAAMqE,IAAI;IAAA;IAAA,CAAAzE,aAAA,GAAAE,CAAA,QAAG,MAAM,IAAI,CAACuD,oBAAoB,CAACC,OAAO,CAAC;IAAA;IAAA1D,aAAA,GAAAE,CAAA;IACrD,IAAI,CAACuE,IAAI,EAAE;MAAA;MAAAzE,aAAA,GAAAW,CAAA;MAAAX,aAAA,GAAAE,CAAA;MAAA,OAAO;QAAEwE,OAAO,EAAE,KAAK;QAAEC,OAAO,EAAE;MAA4B,CAAE;IAAA;IAAA;IAAA;MAAA3E,aAAA,GAAAW,CAAA;IAAA;IAC3E,MAAMiE,WAAW;IAAA;IAAA,CAAA5E,aAAA,GAAAE,CAAA,QAAG,MAAM,IAAI,CAACyD,UAAU,CAACD,OAAO,CAAC;IAClD;IAAA;IAAA1D,aAAA,GAAAE,CAAA;IACA,MAAM,IAAI,CAACkE,oBAAoB,CAACV,OAAO,EAAE;MAAEmB,OAAO,EAAE,IAAI;MAAEC,UAAU,EAAE;IAAI,CAAE,CAAC;IAAA;IAAA9E,aAAA,GAAAE,CAAA;IAC7E,OAAO;MACLwE,OAAO,EAAE,IAAI;MACbC,OAAO,EAAE,gCAAgCjB,OAAO,CAACH,MAAM,qCAAqCwB,IAAI,CAACC,SAAS,CAACJ,WAAW,CAAC;KACxH;EACH;;AACD;AAAA5E,aAAA,GAAAE,CAAA;AA5HD+E,OAAA,CAAApE,oBAAA,GAAAA,oBAAA","ignoreList":[]}