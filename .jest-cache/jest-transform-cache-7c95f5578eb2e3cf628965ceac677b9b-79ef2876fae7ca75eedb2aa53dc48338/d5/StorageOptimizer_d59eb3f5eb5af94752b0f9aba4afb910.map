{"version":3,"names":["cov_1btokg7lxf","actualCoverage","s","StorageOptimizer","constructor","f","compress","data","btoa","unescape","encodeURIComponent","decompress","decodeURIComponent","escape","atob","cleanupObsoleteEntries","prefix","b","maxAgeMs","now","Date","key","localStorage","startsWith","item","JSON","parse","getItem","createdAt","removeItem","getUsedSpace","total","value","length","exports"],"sources":["/mnt/c/Users/m_oli/Projets/SYMBIONT/src/optimizers/StorageOptimizer.ts"],"sourcesContent":["/**\r\n * StorageOptimizer - Optimisation du stockage local\r\n * - Compression des données\r\n * - Nettoyage des entrées obsolètes\r\n * - Monitoring de l'espace utilisé\r\n */\r\nexport class StorageOptimizer {\r\n  constructor() {}\r\n\r\n  /**\r\n   * Compresse une chaîne de caractères (exemple basique)\r\n   */\r\n  compress(data: string): string {\r\n    return btoa(unescape(encodeURIComponent(data)))\r\n  }\r\n\r\n  /**\r\n   * Décompresse une chaîne compressée\r\n   */\r\n  decompress(data: string): string {\r\n    return decodeURIComponent(escape(atob(data)))\r\n  }\r\n\r\n  /**\r\n   * Nettoie les entrées obsolètes du localStorage\r\n   */\r\n  cleanupObsoleteEntries(prefix = 'organism_', maxAgeMs = 7 * 24 * 60 * 60 * 1000) {\r\n    const now = Date.now()\r\n    for (const key in localStorage) {\r\n      if (key.startsWith(prefix)) {\r\n        try {\r\n          const item = JSON.parse(localStorage.getItem(key) || '{}')\r\n          if (item.createdAt && now - item.createdAt > maxAgeMs) {\r\n            localStorage.removeItem(key)\r\n          }\r\n        } catch {}\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Retourne l'espace utilisé par le localStorage (approximation)\r\n   */\r\n  getUsedSpace(): number {\r\n    let total = 0\r\n    for (const key in localStorage) {\r\n      const value = localStorage.getItem(key)\r\n      if (value) total += key.length + value.length\r\n    }\r\n    return total\r\n  }\r\n} "],"mappings":"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","ignoreList":[]}