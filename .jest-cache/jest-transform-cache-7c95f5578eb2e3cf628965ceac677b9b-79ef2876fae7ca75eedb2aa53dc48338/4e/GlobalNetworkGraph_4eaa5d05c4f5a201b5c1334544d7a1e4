54db79eca28b49e15b4b806d228414c7
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.GlobalNetworkGraph = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = __importStar(require("react"));
// Génère un réseau mocké simple
function generateMockNetwork() {
    const nodes = [];
    const links = [];
    const centerX = 200, centerY = 150, radius1 = 60, radius2 = 100;
    // Racine
    nodes.push({ id: 'ROOT', generation: 0, x: centerX, y: centerY });
    // 3 enfants
    for (let i = 0; i < 3; i++) {
        const angle = (i / 3) * 2 * Math.PI;
        const x = centerX + radius1 * Math.cos(angle);
        const y = centerY + radius1 * Math.sin(angle);
        const id = `A${i}`;
        nodes.push({ id, generation: 1, x, y });
        links.push({ source: 'ROOT', target: id });
        // 2 petits-enfants par enfant
        for (let j = 0; j < 2; j++) {
            const subAngle = angle + (j === 0 ? -0.3 : 0.3);
            const x2 = centerX + radius2 * Math.cos(subAngle);
            const y2 = centerY + radius2 * Math.sin(subAngle);
            const subId = `B${i}${j}`;
            nodes.push({ id: subId, generation: 2, x: x2, y: y2 });
            links.push({ source: id, target: subId });
        }
    }
    return { nodes, links };
}
const GlobalNetworkGraph = (props) => {
    // États principaux regroupés
    const [networkState, setNetworkState] = (0, react_1.useState)({
        network: null,
        loading: true,
        error: null
    });
    const [viewState, setViewState] = (0, react_1.useState)({
        zoom: 1,
        offset: { x: 0, y: 0 },
        hoveredNode: null,
        selectedNode: null
    });
    const svgRef = (0, react_1.useRef)(null);
    // Chargement du réseau
    (0, react_1.useEffect)(() => {
        setNetworkState(prev => ({ ...prev, loading: true, error: null }));
        // Simulation chargement puis utilisation mock
        setTimeout(() => {
            try {
                const mockNetwork = generateMockNetwork();
                setNetworkState({
                    network: mockNetwork,
                    loading: false,
                    error: null
                });
                if (props.onNodeCountChange) {
                    props.onNodeCountChange(mockNetwork.nodes.length);
                }
            }
            catch {
                setNetworkState(prev => ({
                    ...prev,
                    loading: false,
                    error: 'Erreur lors du chargement du réseau'
                }));
            }
        }, 1000);
    }, [props.onNodeCountChange]);
    // Gestion du zoom
    const handleWheel = (e) => {
        e.preventDefault();
        setViewState(prev => ({
            ...prev,
            zoom: Math.max(0.5, Math.min(3, prev.zoom - e.deltaY * 0.001))
        }));
    };
    // Gestion du survol des nœuds
    const handleNodeMouseOver = (node) => {
        setViewState(prev => ({ ...prev, hoveredNode: node }));
    };
    const handleNodeMouseOut = () => {
        setViewState(prev => ({ ...prev, hoveredNode: null }));
    };
    const handleNodeClick = (node) => {
        setViewState(prev => ({
            ...prev,
            selectedNode: prev.selectedNode?.id === node.id ? null : node
        }));
    };
    if (networkState.loading) {
        return ((0, jsx_runtime_1.jsxs)("div", { className: "network-loading", children: [(0, jsx_runtime_1.jsx)("div", { className: "loading-spinner loading-spinner--medium" }), (0, jsx_runtime_1.jsx)("p", { children: "Chargement du r\u00E9seau..." })] }));
    }
    if (networkState.error || !networkState.network) {
        return ((0, jsx_runtime_1.jsxs)("div", { className: "network-error", children: [(0, jsx_runtime_1.jsx)("h3", { children: "R\u00E9seau Indisponible" }), (0, jsx_runtime_1.jsx)("p", { children: networkState.error || 'Impossible de charger le réseau' }), (0, jsx_runtime_1.jsx)("button", { onClick: () => window.location.reload(), className: "btn-retry", children: "R\u00E9essayer" })] }));
    }
    const { network } = networkState;
    const { zoom, offset, hoveredNode, selectedNode } = viewState;
    return ((0, jsx_runtime_1.jsxs)("div", { className: "network-container", children: [(0, jsx_runtime_1.jsxs)("div", { className: "network-header", children: [(0, jsx_runtime_1.jsx)("h3", { children: "R\u00E9seau Global SYMBIONT" }), (0, jsx_runtime_1.jsxs)("div", { className: "network-stats", children: [(0, jsx_runtime_1.jsxs)("span", { className: "stat-badge", children: [network.nodes.length, " organismes"] }), (0, jsx_runtime_1.jsxs)("span", { className: "stat-badge", children: [network.links.length, " connexions"] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "network-graph-wrapper", children: [(0, jsx_runtime_1.jsx)("svg", { ref: svgRef, className: "network-svg", width: "100%", height: "300", onWheel: handleWheel, children: (0, jsx_runtime_1.jsxs)("g", { transform: `translate(${offset.x}, ${offset.y}) scale(${zoom})`, children: [(0, jsx_runtime_1.jsx)("g", { className: "links", children: network.links.map((link, i) => {
                                        const source = network.nodes.find(n => n.id === link.source);
                                        const target = network.nodes.find(n => n.id === link.target);
                                        if (!source || !target)
                                            return null;
                                        return ((0, jsx_runtime_1.jsx)("line", { x1: source.x, y1: source.y, x2: target.x, y2: target.y, stroke: "rgba(0, 224, 255, 0.4)", strokeWidth: "2", className: "network-link" }, i));
                                    }) }), (0, jsx_runtime_1.jsx)("g", { className: "nodes", children: network.nodes.map((node) => ((0, jsx_runtime_1.jsxs)("g", { children: [(0, jsx_runtime_1.jsx)("circle", { cx: node.x, cy: node.y, r: node.generation === 0 ? 12 : 8, fill: node.generation === 0 ? '#ff4b6e' : '#00e0ff', stroke: selectedNode?.id === node.id ? '#ffb700' : 'rgba(255,255,255,0.3)', strokeWidth: selectedNode?.id === node.id ? 3 : 1, className: "network-node", onMouseEnter: () => handleNodeMouseOver(node), onMouseLeave: handleNodeMouseOut, onClick: () => handleNodeClick(node), style: { cursor: 'pointer' } }), (0, jsx_runtime_1.jsx)("text", { x: node.x, y: node.y + 20, textAnchor: "middle", fontSize: "10", fill: "#ffffff", className: "node-label", children: node.id })] }, node.id))) })] }) }), hoveredNode && ((0, jsx_runtime_1.jsxs)("div", { className: "network-tooltip", children: [(0, jsx_runtime_1.jsx)("h4", { children: hoveredNode.id }), (0, jsx_runtime_1.jsxs)("p", { children: ["G\u00E9n\u00E9ration: ", hoveredNode.generation] }), (0, jsx_runtime_1.jsxs)("p", { children: ["Position: (", Math.round(hoveredNode.x), ", ", Math.round(hoveredNode.y), ")"] })] }))] }), selectedNode && ((0, jsx_runtime_1.jsxs)("div", { className: "node-details", children: [(0, jsx_runtime_1.jsxs)("h4", { children: ["D\u00E9tails de ", selectedNode.id] }), (0, jsx_runtime_1.jsxs)("div", { className: "detail-grid", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("span", { className: "detail-label", children: "G\u00E9n\u00E9ration:" }), (0, jsx_runtime_1.jsx)("span", { className: "detail-value", children: selectedNode.generation })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("span", { className: "detail-label", children: "Type:" }), (0, jsx_runtime_1.jsx)("span", { className: "detail-value", children: selectedNode.generation === 0 ? 'Racine' : 'Descendant' })] })] })] })), (0, jsx_runtime_1.jsxs)("div", { className: "network-controls", children: [(0, jsx_runtime_1.jsx)("button", { onClick: () => setViewState(prev => ({ ...prev, zoom: Math.min(3, prev.zoom * 1.2) })), children: "Zoom +" }), (0, jsx_runtime_1.jsx)("button", { onClick: () => setViewState(prev => ({ ...prev, zoom: Math.max(0.5, prev.zoom / 1.2) })), children: "Zoom -" }), (0, jsx_runtime_1.jsx)("button", { onClick: () => setViewState(prev => ({ ...prev, zoom: 1, offset: { x: 0, y: 0 } })), children: "Reset" })] })] }));
};
exports.GlobalNetworkGraph = GlobalNetworkGraph;
exports.default = exports.GlobalNetworkGraph;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL21udC9jL1VzZXJzL21fb2xpL1Byb2pldHMvU1lNQklPTlQvc3JjL3BvcHVwL2NvbXBvbmVudHMvR2xvYmFsTmV0d29ya0dyYXBoLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsK0NBQTJEO0FBb0IzRCxnQ0FBZ0M7QUFDaEMsU0FBUyxtQkFBbUI7SUFDMUIsTUFBTSxLQUFLLEdBQWtCLEVBQUUsQ0FBQztJQUNoQyxNQUFNLEtBQUssR0FBa0IsRUFBRSxDQUFDO0lBQ2hDLE1BQU0sT0FBTyxHQUFHLEdBQUcsRUFBRSxPQUFPLEdBQUcsR0FBRyxFQUFFLE9BQU8sR0FBRyxFQUFFLEVBQUUsT0FBTyxHQUFHLEdBQUcsQ0FBQztJQUVoRSxTQUFTO0lBQ1QsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDO0lBRWxFLFlBQVk7SUFDWixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7UUFDM0IsTUFBTSxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUM7UUFDcEMsTUFBTSxDQUFDLEdBQUcsT0FBTyxHQUFHLE9BQU8sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzlDLE1BQU0sQ0FBQyxHQUFHLE9BQU8sR0FBRyxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM5QyxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDO1FBQ25CLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUs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LENBQUMsdUJBRXZGLEVBQ1QsbUNBQVEsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxHQUFHLElBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxzQkFFbEYsSUFDTCxJQUNGLENBQ1AsQ0FBQztBQUNKLENBQUMsQ0FBQztBQXZOVyxRQUFBLGtCQUFrQixzQkF1TjdCO0FBRUYsa0JBQWUsMEJBQWtCLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL21udC9jL1VzZXJzL21fb2xpL1Byb2pldHMvU1lNQklPTlQvc3JjL3BvcHVwL2NvbXBvbmVudHMvR2xvYmFsTmV0d29ya0dyYXBoLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xyXG5cclxuaW50ZXJmYWNlIE5ldHdvcmtOb2RlIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIGdlbmVyYXRpb246IG51bWJlcjtcclxuICB4OiBudW1iZXI7XHJcbiAgeTogbnVtYmVyO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgTmV0d29ya0xpbmsge1xyXG4gIHNvdXJjZTogc3RyaW5nO1xyXG4gIHRhcmdldDogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgR2xvYmFsTmV0d29ya0dyYXBoUHJvcHMge1xyXG4gIG5vZGVzPzogTmV0d29ya05vZGVbXTtcclxuICBsaW5rcz86IE5ldHdvcmtMaW5rW107XHJcbiAgb25Ob2RlQ291bnRDaGFuZ2U/OiAoY291bnQ6IG51bWJlcikgPT4gdm9pZDtcclxufVxyXG5cclxuLy8gR8OpbsOocmUgdW4gcsOpc2VhdSBtb2Nrw6kgc2ltcGxlXHJcbmZ1bmN0aW9uIGdlbmVyYXRlTW9ja05ldHdvcmsoKTogeyBub2RlczogTmV0d29ya05vZGVbXTsgbGlua3M6IE5ldHdvcmtMaW5rW10gfSB7XHJcbiAgY29uc3Qgbm9kZXM6IE5ldHdvcmtOb2RlW10gPSBbXTtcclxuICBjb25zdCBsaW5rczogTmV0d29ya0xpbmtbXSA9IFtdO1xyXG4gIGNvbnN0IGNlbnRlclggPSAyMDAsIGNlbnRlclkgPSAxNTAsIHJhZGl1czEgPSA2MCwgcmFkaXVzMiA9IDEwMDtcclxuICBcclxuICAvLyBSYWNpbmVcclxuICBub2Rlcy5wdXNoKHsgaWQ6ICdST09UJywgZ2VuZXJhdGlvbjogMCwgeDogY2VudGVyWCwgeTogY2VudGVyWSB9KTtcclxuICBcclxuICAvLyAzIGVuZmFudHNcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xyXG4gICAgY29uc3QgYW5nbGUgPSAoaSAvIDMpICogMiAqIE1hdGguUEk7XHJcbiAgICBjb25zdCB4ID0gY2VudGVyWCArIHJhZGl1czEgKiBNYXRoLmNvcyhhbmdsZSk7XHJcbiAgICBjb25zdCB5ID0gY2VudGVyWSArIHJhZGl1czEgKiBNYXRoLnNpbihhbmdsZSk7XHJcbiAgICBjb25zdCBpZCA9IGBBJHtpfWA7XHJcbiAgICBub2Rlcy5wdXNoKHsgaWQsIGdlbmVyYXRpb246IDEsIHgsIHkgfSk7XHJcbiAgICBsaW5rcy5wdXNoKHsgc291cmNlOiAnUk9PVCcsIHRhcmdldDogaWQgfSk7XHJcbiAgICBcclxuICAgIC8vIDIgcGV0aXRzLWVuZmFudHMgcGFyIGVuZmFudFxyXG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCAyOyBqKyspIHtcclxuICAgICAgY29uc3Qgc3ViQW5nbGUgPSBhbmdsZSArIChqID09PSAwID8gLTAuMyA6IDAuMyk7XHJcbiAgICAgIGNvbnN0IHgyID0gY2VudGVyWCArIHJhZGl1czIgKiBNYXRoLmNvcyhzdWJBbmdsZSk7XHJcbiAgICAgIGNvbnN0IHkyID0gY2VudGVyWSArIHJhZGl1czIgKiBNYXRoLnNpbihzdWJBbmdsZSk7XHJcbiAgICAgIGNvbnN0IHN1YklkID0gYEIke2l9JHtqfWA7XHJcbiAgICAgIG5vZGVzLnB1c2goeyBpZDogc3ViSWQsIGdlbmVyYXRpb246IDIsIHg6IHgyLCB5OiB5MiB9KTtcclxuICAgICAgbGlua3MucHVzaCh7IHNvdXJjZTogaWQsIHRhcmdldDogc3ViSWQgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiB7IG5vZGVzLCBsaW5rcyB9O1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgR2xvYmFsTmV0d29ya0dyYXBoOiBSZWFjdC5GQzxHbG9iYWxOZXR3b3JrR3JhcGhQcm9wcz4gPSAocHJvcHMpID0+IHtcclxuICAvLyDDiXRhdHMgcHJpbmNpcGF1eCByZWdyb3Vww6lzXHJcbiAgY29uc3QgW25ldHdvcmtTdGF0ZSwgc2V0TmV0d29ya1N0YXRlXSA9IHVzZVN0YXRlKHtcclxuICAgIG5ldHdvcms6IG51bGwgYXMgeyBub2RlczogTmV0d29ya05vZGVbXTsgbGlua3M6IE5ldHdvcmtMaW5rW10gfSB8IG51bGwsXHJcbiAgICBsb2FkaW5nOiB0cnVlLFxyXG4gICAgZXJyb3I6IG51bGwgYXMgc3RyaW5nIHwgbnVsbFxyXG4gIH0pO1xyXG5cclxuICBjb25zdCBbdmlld1N0YXRlLCBzZXRWaWV3U3RhdGVdID0gdXNlU3RhdGUoe1xyXG4gICAgem9vbTogMSxcclxuICAgIG9mZnNldDogeyB4OiAwLCB5OiAwIH0sXHJcbiAgICBob3ZlcmVkTm9kZTogbnVsbCBhcyBOZXR3b3JrTm9kZSB8IG51bGwsXHJcbiAgICBzZWxlY3RlZE5vZGU6IG51bGwgYXMgTmV0d29ya05vZGUgfCBudWxsXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHN2Z1JlZiA9IHVzZVJlZjxTVkdTVkdFbGVtZW50PihudWxsKTtcclxuXHJcbiAgLy8gQ2hhcmdlbWVudCBkdSByw6lzZWF1XHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIHNldE5ldHdvcmtTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGxvYWRpbmc6IHRydWUsIGVycm9yOiBudWxsIH0pKTtcclxuICAgIFxyXG4gICAgLy8gU2ltdWxhdGlvbiBjaGFyZ2VtZW50IHB1aXMgdXRpbGlzYXRpb24gbW9ja1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgbW9ja05ldHdvcmsgPSBnZW5lcmF0ZU1vY2tOZXR3b3JrKCk7XHJcbiAgICAgICAgc2V0TmV0d29ya1N0YXRlKHtcclxuICAgICAgICAgIG5ldHdvcms6IG1vY2tOZXR3b3JrLFxyXG4gICAgICAgICAgbG9hZGluZzogZmFsc2UsXHJcbiAgICAgICAgICBlcnJvcjogbnVsbFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChwcm9wcy5vbk5vZGVDb3VudENoYW5nZSkge1xyXG4gICAgICAgICAgcHJvcHMub25Ob2RlQ291bnRDaGFuZ2UobW9ja05ldHdvcmsubm9kZXMubGVuZ3RoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgIHNldE5ldHdvcmtTdGF0ZShwcmV2ID0+ICh7XHJcbiAgICAgICAgICAuLi5wcmV2LFxyXG4gICAgICAgICAgbG9hZGluZzogZmFsc2UsXHJcbiAgICAgICAgICBlcnJvcjogJ0VycmV1ciBsb3JzIGR1IGNoYXJnZW1lbnQgZHUgcsOpc2VhdSdcclxuICAgICAgICB9KSk7XHJcbiAgICAgIH1cclxuICAgIH0sIDEwMDApO1xyXG4gIH0sIFtwcm9wcy5vbk5vZGVDb3VudENoYW5nZV0pO1xyXG5cclxuICAvLyBHZXN0aW9uIGR1IHpvb21cclxuICBjb25zdCBoYW5kbGVXaGVlbCA9IChlOiBSZWFjdC5XaGVlbEV2ZW50KSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBzZXRWaWV3U3RhdGUocHJldiA9PiAoe1xyXG4gICAgICAuLi5wcmV2LFxyXG4gICAgICB6b29tOiBNYXRoLm1heCgwLjUsIE1hdGgubWluKDMsIHByZXYuem9vbSAtIGUuZGVsdGFZICogMC4wMDEpKVxyXG4gICAgfSkpO1xyXG4gIH07XHJcblxyXG4gIC8vIEdlc3Rpb24gZHUgc3Vydm9sIGRlcyBuxZN1ZHNcclxuICBjb25zdCBoYW5kbGVOb2RlTW91c2VPdmVyID0gKG5vZGU6IE5ldHdvcmtOb2RlKSA9PiB7XHJcbiAgICBzZXRWaWV3U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBob3ZlcmVkTm9kZTogbm9kZSB9KSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlTm9kZU1vdXNlT3V0ID0gKCkgPT4ge1xyXG4gICAgc2V0Vmlld1N0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgaG92ZXJlZE5vZGU6IG51bGwgfSkpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZU5vZGVDbGljayA9IChub2RlOiBOZXR3b3JrTm9kZSkgPT4ge1xyXG4gICAgc2V0Vmlld1N0YXRlKHByZXYgPT4gKHsgXHJcbiAgICAgIC4uLnByZXYsIFxyXG4gICAgICBzZWxlY3RlZE5vZGU6IHByZXYuc2VsZWN0ZWROb2RlPy5pZCA9PT0gbm9kZS5pZCA/IG51bGwgOiBub2RlIFxyXG4gICAgfSkpO1xyXG4gIH07XHJcblxyXG4gIGlmIChuZXR3b3JrU3RhdGUubG9hZGluZykge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJuZXR3b3JrLWxvYWRpbmdcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvYWRpbmctc3Bpbm5lciBsb2FkaW5nLXNwaW5uZXItLW1lZGl1bVwiPjwvZGl2PlxyXG4gICAgICAgIDxwPkNoYXJnZW1lbnQgZHUgcsOpc2VhdS4uLjwvcD5cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgaWYgKG5ldHdvcmtTdGF0ZS5lcnJvciB8fCAhbmV0d29ya1N0YXRlLm5ldHdvcmspIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibmV0d29yay1lcnJvclwiPlxyXG4gICAgICAgIDxoMz5Sw6lzZWF1IEluZGlzcG9uaWJsZTwvaDM+XHJcbiAgICAgICAgPHA+e25ldHdvcmtTdGF0ZS5lcnJvciB8fCAnSW1wb3NzaWJsZSBkZSBjaGFyZ2VyIGxlIHLDqXNlYXUnfTwvcD5cclxuICAgICAgICA8YnV0dG9uIFxyXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpfVxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiYnRuLXJldHJ5XCJcclxuICAgICAgICA+XHJcbiAgICAgICAgICBSw6llc3NheWVyXHJcbiAgICAgICAgPC9idXR0b24+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHsgbmV0d29yayB9ID0gbmV0d29ya1N0YXRlO1xyXG4gIGNvbnN0IHsgem9vbSwgb2Zmc2V0LCBob3ZlcmVkTm9kZSwgc2VsZWN0ZWROb2RlIH0gPSB2aWV3U3RhdGU7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cIm5ldHdvcmstY29udGFpbmVyXCI+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibmV0d29yay1oZWFkZXJcIj5cclxuICAgICAgICA8aDM+UsOpc2VhdSBHbG9iYWwgU1lNQklPTlQ8L2gzPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibmV0d29yay1zdGF0c1wiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwic3RhdC1iYWRnZVwiPlxyXG4gICAgICAgICAgICB7bmV0d29yay5ub2Rlcy5sZW5ndGh9IG9yZ2FuaXNtZXNcclxuICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInN0YXQtYmFkZ2VcIj5cclxuICAgICAgICAgICAge25ldHdvcmsubGlua3MubGVuZ3RofSBjb25uZXhpb25zXHJcbiAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJuZXR3b3JrLWdyYXBoLXdyYXBwZXJcIj5cclxuICAgICAgICA8c3ZnXHJcbiAgICAgICAgICByZWY9e3N2Z1JlZn1cclxuICAgICAgICAgIGNsYXNzTmFtZT1cIm5ldHdvcmstc3ZnXCJcclxuICAgICAgICAgIHdpZHRoPVwiMTAwJVwiXHJcbiAgICAgICAgICBoZWlnaHQ9XCIzMDBcIlxyXG4gICAgICAgICAgb25XaGVlbD17aGFuZGxlV2hlZWx9XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgPGcgdHJhbnNmb3JtPXtgdHJhbnNsYXRlKCR7b2Zmc2V0Lnh9LCAke29mZnNldC55fSkgc2NhbGUoJHt6b29tfSlgfT5cclxuICAgICAgICAgICAgey8qIExpZW5zICovfVxyXG4gICAgICAgICAgICA8ZyBjbGFzc05hbWU9XCJsaW5rc1wiPlxyXG4gICAgICAgICAgICAgIHtuZXR3b3JrLmxpbmtzLm1hcCgobGluaywgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc291cmNlID0gbmV0d29yay5ub2Rlcy5maW5kKG4gPT4gbi5pZCA9PT0gbGluay5zb3VyY2UpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gbmV0d29yay5ub2Rlcy5maW5kKG4gPT4gbi5pZCA9PT0gbGluay50YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzb3VyY2UgfHwgIXRhcmdldCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgIDxsaW5lXHJcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpfVxyXG4gICAgICAgICAgICAgICAgICAgIHgxPXtzb3VyY2UueH1cclxuICAgICAgICAgICAgICAgICAgICB5MT17c291cmNlLnl9XHJcbiAgICAgICAgICAgICAgICAgICAgeDI9e3RhcmdldC54fVxyXG4gICAgICAgICAgICAgICAgICAgIHkyPXt0YXJnZXQueX1cclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U9XCJyZ2JhKDAsIDIyNCwgMjU1LCAwLjQpXCJcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD1cIjJcIlxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm5ldHdvcmstbGlua1wiXHJcbiAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICA8L2c+XHJcblxyXG4gICAgICAgICAgICB7LyogTsWTdWRzICovfVxyXG4gICAgICAgICAgICA8ZyBjbGFzc05hbWU9XCJub2Rlc1wiPlxyXG4gICAgICAgICAgICAgIHtuZXR3b3JrLm5vZGVzLm1hcCgobm9kZSkgPT4gKFxyXG4gICAgICAgICAgICAgICAgPGcga2V5PXtub2RlLmlkfT5cclxuICAgICAgICAgICAgICAgICAgPGNpcmNsZVxyXG4gICAgICAgICAgICAgICAgICAgIGN4PXtub2RlLnh9XHJcbiAgICAgICAgICAgICAgICAgICAgY3k9e25vZGUueX1cclxuICAgICAgICAgICAgICAgICAgICByPXtub2RlLmdlbmVyYXRpb24gPT09IDAgPyAxMiA6IDh9XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbD17bm9kZS5nZW5lcmF0aW9uID09PSAwID8gJyNmZjRiNmUnIDogJyMwMGUwZmYnfVxyXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZT17c2VsZWN0ZWROb2RlPy5pZCA9PT0gbm9kZS5pZCA/ICcjZmZiNzAwJyA6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMyknfVxyXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPXtzZWxlY3RlZE5vZGU/LmlkID09PSBub2RlLmlkID8gMyA6IDF9XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibmV0d29yay1ub2RlXCJcclxuICAgICAgICAgICAgICAgICAgICBvbk1vdXNlRW50ZXI9eygpID0+IGhhbmRsZU5vZGVNb3VzZU92ZXIobm9kZSl9XHJcbiAgICAgICAgICAgICAgICAgICAgb25Nb3VzZUxlYXZlPXtoYW5kbGVOb2RlTW91c2VPdXR9XHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlTm9kZUNsaWNrKG5vZGUpfVxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGN1cnNvcjogJ3BvaW50ZXInIH19XHJcbiAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICB7LyogTGFiZWwgZHUgbsWTdWQgKi99XHJcbiAgICAgICAgICAgICAgICAgIDx0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgeD17bm9kZS54fVxyXG4gICAgICAgICAgICAgICAgICAgIHk9e25vZGUueSArIDIwfVxyXG4gICAgICAgICAgICAgICAgICAgIHRleHRBbmNob3I9XCJtaWRkbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgIGZvbnRTaXplPVwiMTBcIlxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9XCIjZmZmZmZmXCJcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJub2RlLWxhYmVsXCJcclxuICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIHtub2RlLmlkfVxyXG4gICAgICAgICAgICAgICAgICA8L3RleHQ+XHJcbiAgICAgICAgICAgICAgICA8L2c+XHJcbiAgICAgICAgICAgICAgKSl9XHJcbiAgICAgICAgICAgIDwvZz5cclxuICAgICAgICAgIDwvZz5cclxuICAgICAgICA8L3N2Zz5cclxuXHJcbiAgICAgICAgey8qIFRvb2x0aXAgKi99XHJcbiAgICAgICAge2hvdmVyZWROb2RlICYmIChcclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibmV0d29yay10b29sdGlwXCI+XHJcbiAgICAgICAgICAgIDxoND57aG92ZXJlZE5vZGUuaWR9PC9oND5cclxuICAgICAgICAgICAgPHA+R8OpbsOpcmF0aW9uOiB7aG92ZXJlZE5vZGUuZ2VuZXJhdGlvbn08L3A+XHJcbiAgICAgICAgICAgIDxwPlBvc2l0aW9uOiAoe01hdGgucm91bmQoaG92ZXJlZE5vZGUueCl9LCB7TWF0aC5yb3VuZChob3ZlcmVkTm9kZS55KX0pPC9wPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKX1cclxuICAgICAgPC9kaXY+XHJcblxyXG4gICAgICB7c2VsZWN0ZWROb2RlICYmIChcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm5vZGUtZGV0YWlsc1wiPlxyXG4gICAgICAgICAgPGg0PkTDqXRhaWxzIGRlIHtzZWxlY3RlZE5vZGUuaWR9PC9oND5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGV0YWlsLWdyaWRcIj5cclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJkZXRhaWwtbGFiZWxcIj5Hw6luw6lyYXRpb246PC9zcGFuPlxyXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImRldGFpbC12YWx1ZVwiPntzZWxlY3RlZE5vZGUuZ2VuZXJhdGlvbn08L3NwYW4+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImRldGFpbC1sYWJlbFwiPlR5cGU6PC9zcGFuPlxyXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImRldGFpbC12YWx1ZVwiPntzZWxlY3RlZE5vZGUuZ2VuZXJhdGlvbiA9PT0gMCA/ICdSYWNpbmUnIDogJ0Rlc2NlbmRhbnQnfTwvc3Bhbj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKX1cclxuXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibmV0d29yay1jb250cm9sc1wiPlxyXG4gICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0Vmlld1N0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgem9vbTogTWF0aC5taW4oMywgcHJldi56b29tICogMS4yKSB9KSl9PlxyXG4gICAgICAgICAgWm9vbSArXHJcbiAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRWaWV3U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCB6b29tOiBNYXRoLm1heCgwLjUsIHByZXYuem9vbSAvIDEuMikgfSkpfT5cclxuICAgICAgICAgIFpvb20gLVxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0Vmlld1N0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgem9vbTogMSwgb2Zmc2V0OiB7IHg6IDAsIHk6IDAgfSB9KSl9PlxyXG4gICAgICAgICAgUmVzZXRcclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgR2xvYmFsTmV0d29ya0dyYXBoOyAiXSwidmVyc2lvbiI6M30=