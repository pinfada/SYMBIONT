7c3c2cedecaba8e06b4585ba8e54d6c6
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// Jest setup file for SYMBIONT tests
require("@testing-library/jest-dom");
// Mock global objects that might not be available in test environment
global.performance = global.performance || {};
global.performance.now = jest.fn(() => Date.now());
global.performance.mark = jest.fn();
global.performance.measure = jest.fn();
global.performance.clearMarks = jest.fn();
global.performance.clearMeasures = jest.fn();
global.performance.getEntries = jest.fn(() => []);
global.performance.getEntriesByName = jest.fn(() => []);
global.performance.getEntriesByType = jest.fn(() => []);
// Mock PerformanceObserver
global.PerformanceObserver = jest.fn().mockImplementation((callback) => ({
    observe: jest.fn(),
    disconnect: jest.fn(),
    takeRecords: jest.fn(() => [])
}));
// Mock crypto for WebCrypto
global.crypto = global.crypto || {};
global.crypto.subtle = global.crypto.subtle || {
    generateKey: jest.fn().mockResolvedValue({}),
    importKey: jest.fn().mockResolvedValue({}),
    exportKey: jest.fn().mockResolvedValue(new ArrayBuffer(32)),
    encrypt: jest.fn().mockResolvedValue(new ArrayBuffer(64)),
    decrypt: jest.fn().mockResolvedValue(new ArrayBuffer(32)),
    digest: jest.fn().mockResolvedValue(new ArrayBuffer(32))
};
global.crypto.getRandomValues = jest.fn((arr) => {
    for (let i = 0; i < arr.length; i++) {
        arr[i] = Math.floor(Math.random() * 256);
    }
    return arr;
});
// Mock requestAnimationFrame and cancelAnimationFrame
global.requestAnimationFrame = jest.fn((callback) => {
    return setTimeout(callback, 16); // ~60fps
});
global.cancelAnimationFrame = jest.fn((id) => {
    clearTimeout(id);
});
// Mock URL.createObjectURL for Web Workers
global.URL = global.URL || {};
global.URL.createObjectURL = jest.fn(() => 'blob:mock-url');
global.URL.revokeObjectURL = jest.fn();
// Mock Worker constructor
global.Worker = jest.fn().mockImplementation(() => ({
    postMessage: jest.fn(),
    terminate: jest.fn(),
    addEventListener: jest.fn(),
    removeEventListener: jest.fn(),
    onmessage: null,
    onerror: null
}));
// Mock WebGL context
const createMockWebGLContext = () => ({
    // WebGL constants
    TRIANGLES: 4,
    LINES: 1,
    POINTS: 0,
    ARRAY_BUFFER: 34962,
    ELEMENT_ARRAY_BUFFER: 34963,
    DYNAMIC_DRAW: 35048,
    STATIC_DRAW: 35044,
    FLOAT: 5126,
    UNSIGNED_SHORT: 5123,
    // Buffer methods
    createBuffer: jest.fn(() => ({ id: Math.random() })),
    deleteBuffer: jest.fn(),
    bindBuffer: jest.fn(),
    bufferData: jest.fn(),
    // Vertex attributes
    vertexAttribPointer: jest.fn(),
    enableVertexAttribArray: jest.fn(),
    disableVertexAttribArray: jest.fn(),
    // Drawing
    drawArrays: jest.fn(),
    drawElements: jest.fn(),
    // Shaders (for future tests)
    createShader: jest.fn(() => ({ id: Math.random() })),
    createProgram: jest.fn(() => ({ id: Math.random() })),
    compileShader: jest.fn(),
    linkProgram: jest.fn(),
    useProgram: jest.fn(),
    // State
    viewport: jest.fn(),
    clear: jest.fn(),
    clearColor: jest.fn(),
    enable: jest.fn(),
    disable: jest.fn(),
    // Error checking
    getError: jest.fn(() => 0), // GL_NO_ERROR
    // Extensions
    getExtension: jest.fn(),
    getSupportedExtensions: jest.fn(() => [])
});
// Mock canvas and WebGL
HTMLCanvasElement.prototype.getContext = jest.fn((contextType) => {
    if (contextType === 'webgl' || contextType === 'experimental-webgl') {
        return createMockWebGLContext();
    }
    if (contextType === 'webgl2') {
        return {
            ...createMockWebGLContext(),
            createVertexArray: jest.fn(() => ({ id: Math.random() })),
            deleteVertexArray: jest.fn(),
            bindVertexArray: jest.fn()
        };
    }
    return null;
});
// Mock Chrome APIs for extension testing
global.chrome = {
    runtime: {
        onMessage: {
            addListener: jest.fn(),
            removeListener: jest.fn()
        },
        sendMessage: jest.fn(),
        getURL: jest.fn((path) => `chrome-extension://mock-id/${path}`)
    },
    tabs: {
        query: jest.fn(),
        create: jest.fn(),
        update: jest.fn()
    },
    storage: {
        local: {
            get: jest.fn(),
            set: jest.fn(),
            remove: jest.fn(),
            clear: jest.fn()
        },
        sync: {
            get: jest.fn(),
            set: jest.fn(),
            remove: jest.fn(),
            clear: jest.fn()
        }
    }
};
// Console override for test cleanup
const originalConsole = global.console;
global.console = {
    ...originalConsole,
    // Suppress console.log in tests unless explicitly needed
    log: process.env.JEST_VERBOSE === 'true' ? originalConsole.log : jest.fn(),
    info: process.env.JEST_VERBOSE === 'true' ? originalConsole.info : jest.fn(),
    warn: originalConsole.warn,
    error: originalConsole.error,
    debug: process.env.JEST_VERBOSE === 'true' ? originalConsole.debug : jest.fn()
};
// Increase timeout for integration tests
jest.setTimeout(10000);
// Global test utilities
global.testUtils = {
    // Helper to wait for async operations
    waitFor: (ms) => new Promise(resolve => setTimeout(resolve, ms)),
    // Helper to create mock DNA sequences
    createMockDNA: (length = 16) => {
        const bases = ['A', 'T', 'C', 'G'];
        return Array.from({ length }, () => bases[Math.floor(Math.random() * bases.length)]).join('');
    },
    // Helper to create valid organism traits
    createMockTraits: () => ({
        curiosity: Math.random(),
        focus: Math.random(),
        rhythm: Math.random(),
        empathy: Math.random(),
        creativity: Math.random(),
        energy: Math.random(),
        harmony: Math.random(),
        wisdom: Math.random() * 0.2 // Wisdom is typically lower
    }),
    // Helper to suppress console output during tests
    suppressConsole: () => {
        const spy = {
            log: jest.spyOn(console, 'log').mockImplementation(() => { }),
            info: jest.spyOn(console, 'info').mockImplementation(() => { }),
            warn: jest.spyOn(console, 'warn').mockImplementation(() => { }),
            error: jest.spyOn(console, 'error').mockImplementation(() => { }),
            debug: jest.spyOn(console, 'debug').mockImplementation(() => { })
        };
        return () => {
            Object.values(spy).forEach(s => s.mockRestore());
        };
    }
};
// Clean up after each test
afterEach(() => {
    jest.clearAllMocks();
    jest.clearAllTimers();
    // Reset performance mock if it exists and is a Jest mock
    if (global.performance.now && typeof global.performance.now.mockClear === 'function') {
        global.performance.now.mockClear();
    }
    // Reset RAF mocks if they exist and are Jest mocks
    if (global.requestAnimationFrame && typeof global.requestAnimationFrame.mockClear === 'function') {
        global.requestAnimationFrame.mockClear();
    }
    if (global.cancelAnimationFrame && typeof global.cancelAnimationFrame.mockClear === 'function') {
        global.cancelAnimationFrame.mockClear();
    }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL21udC9jL1VzZXJzL21fb2xpL1Byb2pldHMvU1lNQklPTlQvX190ZXN0c19fL3NldHVwLnRzIiwibWFwcGluZ3MiOiI7O0FBQUEscUNBQXFDO0FBQ3JDLHFDQUFtQztBQUVuQyxzRUFBc0U7QUFDdEUsTUFBTSxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUMsV0FBVyxJQUFJLEVBQUUsQ0FBQztBQUM5QyxNQUFNLENBQUMsV0FBVyxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO0FBQ25ELE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztBQUNwQyxNQUFNLENBQUMsV0FBVyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7QUFDdkMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDO0FBQzFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztBQUM3QyxNQUFNLENBQUMsV0FBVyxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ2xELE1BQU0sQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUN4RCxNQUFNLENBQUMsV0FBVyxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7QUFFeEQsMkJBQTJCO0FBQzNCLE1BQU0sQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDdkUsT0FBTyxF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QWtDLENBQUMsU0FBUyxFQUFFLENBQUM7SUFDekQsQ0FBQztBQUNILENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9tbnQvYy9Vc2Vycy9tX29saS9Qcm9qZXRzL1NZTUJJT05UL19fdGVzdHNfXy9zZXR1cC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBKZXN0IHNldHVwIGZpbGUgZm9yIFNZTUJJT05UIHRlc3RzXHJcbmltcG9ydCAnQHRlc3RpbmctbGlicmFyeS9qZXN0LWRvbSc7XHJcblxyXG4vLyBNb2NrIGdsb2JhbCBvYmplY3RzIHRoYXQgbWlnaHQgbm90IGJlIGF2YWlsYWJsZSBpbiB0ZXN0IGVudmlyb25tZW50XHJcbmdsb2JhbC5wZXJmb3JtYW5jZSA9IGdsb2JhbC5wZXJmb3JtYW5jZSB8fCB7fTtcclxuZ2xvYmFsLnBlcmZvcm1hbmNlLm5vdyA9IGplc3QuZm4oKCkgPT4gRGF0ZS5ub3coKSk7XHJcbmdsb2JhbC5wZXJmb3JtYW5jZS5tYXJrID0gamVzdC5mbigpO1xyXG5nbG9iYWwucGVyZm9ybWFuY2UubWVhc3VyZSA9IGplc3QuZm4oKTtcclxuZ2xvYmFsLnBlcmZvcm1hbmNlLmNsZWFyTWFya3MgPSBqZXN0LmZuKCk7XHJcbmdsb2JhbC5wZXJmb3JtYW5jZS5jbGVhck1lYXN1cmVzID0gamVzdC5mbigpO1xyXG5nbG9iYWwucGVyZm9ybWFuY2UuZ2V0RW50cmllcyA9IGplc3QuZm4oKCkgPT4gW10pO1xyXG5nbG9iYWwucGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5TmFtZSA9IGplc3QuZm4oKCkgPT4gW10pO1xyXG5nbG9iYWwucGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZSA9IGplc3QuZm4oKCkgPT4gW10pO1xyXG5cclxuLy8gTW9jayBQZXJmb3JtYW5jZU9ic2VydmVyXHJcbmdsb2JhbC5QZXJmb3JtYW5jZU9ic2VydmVyID0gamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoY2FsbGJhY2spID0+ICh7XHJcbiAgb2JzZXJ2ZTogamVzdC5mbigpLFxyXG4gIGRpc2Nvbm5lY3Q6IGplc3QuZm4oKSxcclxuICB0YWtlUmVjb3JkczogamVzdC5mbigoKSA9PiBbXSlcclxufSkpO1xyXG5cclxuLy8gTW9jayBjcnlwdG8gZm9yIFdlYkNyeXB0b1xyXG5nbG9iYWwuY3J5cHRvID0gZ2xvYmFsLmNyeXB0byB8fCB7fTtcclxuZ2xvYmFsLmNyeXB0by5zdWJ0bGUgPSBnbG9iYWwuY3J5cHRvLnN1YnRsZSB8fCB7XHJcbiAgZ2VuZXJhdGVLZXk6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSksXHJcbiAgaW1wb3J0S2V5OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe30pLFxyXG4gIGV4cG9ydEtleTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG5ldyBBcnJheUJ1ZmZlcigzMikpLFxyXG4gIGVuY3J5cHQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShuZXcgQXJyYXlCdWZmZXIoNjQpKSxcclxuICBkZWNyeXB0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUobmV3IEFycmF5QnVmZmVyKDMyKSksXHJcbiAgZGlnZXN0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUobmV3IEFycmF5QnVmZmVyKDMyKSlcclxufTtcclxuZ2xvYmFsLmNyeXB0by5nZXRSYW5kb21WYWx1ZXMgPSBqZXN0LmZuKChhcnIpID0+IHtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xyXG4gICAgYXJyW2ldID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjU2KTtcclxuICB9XHJcbiAgcmV0dXJuIGFycjtcclxufSk7XHJcblxyXG4vLyBNb2NrIHJlcXVlc3RBbmltYXRpb25GcmFtZSBhbmQgY2FuY2VsQW5pbWF0aW9uRnJhbWVcclxuZ2xvYmFsLnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGplc3QuZm4oKGNhbGxiYWNrKSA9PiB7XHJcbiAgcmV0dXJuIHNldFRpbWVvdXQoY2FsbGJhY2ssIDE2KTsgLy8gfjYwZnBzXHJcbn0pO1xyXG5cclxuZ2xvYmFsLmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gamVzdC5mbigoaWQpID0+IHtcclxuICBjbGVhclRpbWVvdXQoaWQpO1xyXG59KTtcclxuXHJcbi8vIE1vY2sgVVJMLmNyZWF0ZU9iamVjdFVSTCBmb3IgV2ViIFdvcmtlcnNcclxuZ2xvYmFsLlVSTCA9IGdsb2JhbC5VUkwgfHwge307XHJcbmdsb2JhbC5VUkwuY3JlYXRlT2JqZWN0VVJMID0gamVzdC5mbigoKSA9PiAnYmxvYjptb2NrLXVybCcpO1xyXG5nbG9iYWwuVVJMLnJldm9rZU9iamVjdFVSTCA9IGplc3QuZm4oKTtcclxuXHJcbi8vIE1vY2sgV29ya2VyIGNvbnN0cnVjdG9yXHJcbmdsb2JhbC5Xb3JrZXIgPSBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+ICh7XHJcbiAgcG9zdE1lc3NhZ2U6IGplc3QuZm4oKSxcclxuICB0ZXJtaW5hdGU6IGplc3QuZm4oKSxcclxuICBhZGRFdmVudExpc3RlbmVyOiBqZXN0LmZuKCksXHJcbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogamVzdC5mbigpLFxyXG4gIG9ubWVzc2FnZTogbnVsbCxcclxuICBvbmVycm9yOiBudWxsXHJcbn0pKTtcclxuXHJcbi8vIE1vY2sgV2ViR0wgY29udGV4dFxyXG5jb25zdCBjcmVhdGVNb2NrV2ViR0xDb250ZXh0ID0gKCkgPT4gKHtcclxuICAvLyBXZWJHTCBjb25zdGFudHNcclxuICBUUklBTkdMRVM6IDQsXHJcbiAgTElORVM6IDEsXHJcbiAgUE9JTlRTOiAwLFxyXG4gIEFSUkFZX0JVRkZFUjogMzQ5NjIsXHJcbiAgRUxFTUVOVF9BUlJBWV9CVUZGRVI6IDM0OTYzLFxyXG4gIERZTkFNSUNfRFJBVzogMzUwNDgsXHJcbiAgU1RBVElDX0RSQVc6IDM1MDQ0LFxyXG4gIEZMT0FUOiA1MTI2LFxyXG4gIFVOU0lHTkVEX1NIT1JUOiA1MTIzLFxyXG4gIFxyXG4gIC8vIEJ1ZmZlciBtZXRob2RzXHJcbiAgY3JlYXRlQnVmZmVyOiBqZXN0LmZuKCgpID0+ICh7IGlkOiBNYXRoLnJhbmRvbSgpIH0pKSxcclxuICBkZWxldGVCdWZmZXI6IGplc3QuZm4oKSxcclxuICBiaW5kQnVmZmVyOiBqZXN0LmZuKCksXHJcbiAgYnVmZmVyRGF0YTogamVzdC5mbigpLFxyXG4gIFxyXG4gIC8vIFZlcnRleCBhdHRyaWJ1dGVzXHJcbiAgdmVydGV4QXR0cmliUG9pbnRlcjogamVzdC5mbigpLFxyXG4gIGVuYWJsZVZlcnRleEF0dHJpYkFycmF5OiBqZXN0LmZuKCksXHJcbiAgZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5OiBqZXN0LmZuKCksXHJcbiAgXHJcbiAgLy8gRHJhd2luZ1xyXG4gIGRyYXdBcnJheXM6IGplc3QuZm4oKSxcclxuICBkcmF3RWxlbWVudHM6IGplc3QuZm4oKSxcclxuICBcclxuICAvLyBTaGFkZXJzIChmb3IgZnV0dXJlIHRlc3RzKVxyXG4gIGNyZWF0ZVNoYWRlcjogamVzdC5mbigoKSA9PiAoeyBpZDogTWF0aC5yYW5kb20oKSB9KSksXHJcbiAgY3JlYXRlUHJvZ3JhbTogamVzdC5mbigoKSA9PiAoeyBpZDogTWF0aC5yYW5kb20oKSB9KSksXHJcbiAgY29tcGlsZVNoYWRlcjogamVzdC5mbigpLFxyXG4gIGxpbmtQcm9ncmFtOiBqZXN0LmZuKCksXHJcbiAgdXNlUHJvZ3JhbTogamVzdC5mbigpLFxyXG4gIFxyXG4gIC8vIFN0YXRlXHJcbiAgdmlld3BvcnQ6IGplc3QuZm4oKSxcclxuICBjbGVhcjogamVzdC5mbigpLFxyXG4gIGNsZWFyQ29sb3I6IGplc3QuZm4oKSxcclxuICBlbmFibGU6IGplc3QuZm4oKSxcclxuICBkaXNhYmxlOiBqZXN0LmZuKCksXHJcbiAgXHJcbiAgLy8gRXJyb3IgY2hlY2tpbmdcclxuICBnZXRFcnJvcjogamVzdC5mbigoKSA9PiAwKSwgLy8gR0xfTk9fRVJST1JcclxuICBcclxuICAvLyBFeHRlbnNpb25zXHJcbiAgZ2V0RXh0ZW5zaW9uOiBqZXN0LmZuKCksXHJcbiAgZ2V0U3VwcG9ydGVkRXh0ZW5zaW9uczogamVzdC5mbigoKSA9PiBbXSlcclxufSk7XHJcblxyXG4vLyBNb2NrIGNhbnZhcyBhbmQgV2ViR0xcclxuKEhUTUxDYW52YXNFbGVtZW50LnByb3RvdHlwZS5nZXRDb250ZXh0IGFzIGplc3QuTW9jaykgPSBqZXN0LmZuKChjb250ZXh0VHlwZSkgPT4ge1xyXG4gIGlmIChjb250ZXh0VHlwZSA9PT0gJ3dlYmdsJyB8fCBjb250ZXh0VHlwZSA9PT0gJ2V4cGVyaW1lbnRhbC13ZWJnbCcpIHtcclxuICAgIHJldHVybiBjcmVhdGVNb2NrV2ViR0xDb250ZXh0KCkgYXMgdW5rbm93biBhcyBXZWJHTFJlbmRlcmluZ0NvbnRleHQ7XHJcbiAgfVxyXG4gIGlmIChjb250ZXh0VHlwZSA9PT0gJ3dlYmdsMicpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIC4uLmNyZWF0ZU1vY2tXZWJHTENvbnRleHQoKSxcclxuICAgICAgY3JlYXRlVmVydGV4QXJyYXk6IGplc3QuZm4oKCkgPT4gKHsgaWQ6IE1hdGgucmFuZG9tKCkgfSkpLFxyXG4gICAgICBkZWxldGVWZXJ0ZXhBcnJheTogamVzdC5mbigpLFxyXG4gICAgICBiaW5kVmVydGV4QXJyYXk6IGplc3QuZm4oKVxyXG4gICAgfSBhcyB1bmtub3duIGFzIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQ7XHJcbiAgfVxyXG4gIHJldHVybiBudWxsO1xyXG59KTtcclxuXHJcbi8vIE1vY2sgQ2hyb21lIEFQSXMgZm9yIGV4dGVuc2lvbiB0ZXN0aW5nXHJcbihnbG9iYWwgYXMgYW55KS5jaHJvbWUgPSB7XHJcbiAgcnVudGltZToge1xyXG4gICAgb25NZXNzYWdlOiB7XHJcbiAgICAgIGFkZExpc3RlbmVyOiBqZXN0LmZuKCksXHJcbiAgICAgIHJlbW92ZUxpc3RlbmVyOiBqZXN0LmZuKClcclxuICAgIH0gYXMgUGFydGlhbDxjaHJvbWUuZXZlbnRzLkV2ZW50PGFueT4+LFxyXG4gICAgc2VuZE1lc3NhZ2U6IGplc3QuZm4oKSxcclxuICAgIGdldFVSTDogamVzdC5mbigocGF0aDogc3RyaW5nKSA9PiBgY2hyb21lLWV4dGVuc2lvbjovL21vY2staWQvJHtwYXRofWApXHJcbiAgfSBhcyBQYXJ0aWFsPHR5cGVvZiBjaHJvbWUucnVudGltZT4sXHJcbiAgdGFiczoge1xyXG4gICAgcXVlcnk6IGplc3QuZm4oKSxcclxuICAgIGNyZWF0ZTogamVzdC5mbigpLFxyXG4gICAgdXBkYXRlOiBqZXN0LmZuKClcclxuICB9IGFzIFBhcnRpYWw8dHlwZW9mIGNocm9tZS50YWJzPixcclxuICBzdG9yYWdlOiB7XHJcbiAgICBsb2NhbDoge1xyXG4gICAgICBnZXQ6IGplc3QuZm4oKSxcclxuICAgICAgc2V0OiBqZXN0LmZuKCksXHJcbiAgICAgIHJlbW92ZTogamVzdC5mbigpLFxyXG4gICAgICBjbGVhcjogamVzdC5mbigpXHJcbiAgICB9IGFzIFBhcnRpYWw8Y2hyb21lLnN0b3JhZ2UuTG9jYWxTdG9yYWdlQXJlYT4sXHJcbiAgICBzeW5jOiB7XHJcbiAgICAgIGdldDogamVzdC5mbigpLFxyXG4gICAgICBzZXQ6IGplc3QuZm4oKSxcclxuICAgICAgcmVtb3ZlOiBqZXN0LmZuKCksXHJcbiAgICAgIGNsZWFyOiBqZXN0LmZuKClcclxuICAgIH0gYXMgUGFydGlhbDxjaHJvbWUuc3RvcmFnZS5TeW5jU3RvcmFnZUFyZWE+XHJcbiAgfSBhcyBQYXJ0aWFsPHR5cGVvZiBjaHJvbWUuc3RvcmFnZT5cclxufTtcclxuXHJcbi8vIENvbnNvbGUgb3ZlcnJpZGUgZm9yIHRlc3QgY2xlYW51cFxyXG5jb25zdCBvcmlnaW5hbENvbnNvbGUgPSBnbG9iYWwuY29uc29sZTtcclxuZ2xvYmFsLmNvbnNvbGUgPSB7XHJcbiAgLi4ub3JpZ2luYWxDb25zb2xlLFxyXG4gIC8vIFN1cHByZXNzIGNvbnNvbGUubG9nIGluIHRlc3RzIHVubGVzcyBleHBsaWNpdGx5IG5lZWRlZFxyXG4gIGxvZzogcHJvY2Vzcy5lbnYuSkVTVF9WRVJCT1NFID09PSAndHJ1ZScgPyBvcmlnaW5hbENvbnNvbGUubG9nIDogamVzdC5mbigpLFxyXG4gIGluZm86IHByb2Nlc3MuZW52LkpFU1RfVkVSQk9TRSA9PT0gJ3RydWUnID8gb3JpZ2luYWxDb25zb2xlLmluZm8gOiBqZXN0LmZuKCksXHJcbiAgd2Fybjogb3JpZ2luYWxDb25zb2xlLndhcm4sXHJcbiAgZXJyb3I6IG9yaWdpbmFsQ29uc29sZS5lcnJvcixcclxuICBkZWJ1ZzogcHJvY2Vzcy5lbnYuSkVTVF9WRVJCT1NFID09PSAndHJ1ZScgPyBvcmlnaW5hbENvbnNvbGUuZGVidWcgOiBqZXN0LmZuKClcclxufTtcclxuXHJcbi8vIEluY3JlYXNlIHRpbWVvdXQgZm9yIGludGVncmF0aW9uIHRlc3RzXHJcbmplc3Quc2V0VGltZW91dCgxMDAwMCk7XHJcblxyXG4vLyBHbG9iYWwgdGVzdCB1dGlsaXRpZXNcclxuZ2xvYmFsLnRlc3RVdGlscyA9IHtcclxuICAvLyBIZWxwZXIgdG8gd2FpdCBmb3IgYXN5bmMgb3BlcmF0aW9uc1xyXG4gIHdhaXRGb3I6IChtczogbnVtYmVyKSA9PiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKSxcclxuICBcclxuICAvLyBIZWxwZXIgdG8gY3JlYXRlIG1vY2sgRE5BIHNlcXVlbmNlc1xyXG4gIGNyZWF0ZU1vY2tETkE6IChsZW5ndGg6IG51bWJlciA9IDE2KSA9PiB7XHJcbiAgICBjb25zdCBiYXNlcyA9IFsnQScsICdUJywgJ0MnLCAnRyddO1xyXG4gICAgcmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGggfSwgKCkgPT4gYmFzZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYmFzZXMubGVuZ3RoKV0pLmpvaW4oJycpO1xyXG4gIH0sXHJcbiAgXHJcbiAgLy8gSGVscGVyIHRvIGNyZWF0ZSB2YWxpZCBvcmdhbmlzbSB0cmFpdHNcclxuICBjcmVhdGVNb2NrVHJhaXRzOiAoKSA9PiAoe1xyXG4gICAgY3VyaW9zaXR5OiBNYXRoLnJhbmRvbSgpLFxyXG4gICAgZm9jdXM6IE1hdGgucmFuZG9tKCksXHJcbiAgICByaHl0aG06IE1hdGgucmFuZG9tKCksXHJcbiAgICBlbXBhdGh5OiBNYXRoLnJhbmRvbSgpLFxyXG4gICAgY3JlYXRpdml0eTogTWF0aC5yYW5kb20oKSxcclxuICAgIGVuZXJneTogTWF0aC5yYW5kb20oKSxcclxuICAgIGhhcm1vbnk6IE1hdGgucmFuZG9tKCksXHJcbiAgICB3aXNkb206IE1hdGgucmFuZG9tKCkgKiAwLjIgLy8gV2lzZG9tIGlzIHR5cGljYWxseSBsb3dlclxyXG4gIH0pLFxyXG4gIFxyXG4gIC8vIEhlbHBlciB0byBzdXBwcmVzcyBjb25zb2xlIG91dHB1dCBkdXJpbmcgdGVzdHNcclxuICBzdXBwcmVzc0NvbnNvbGU6ICgpID0+IHtcclxuICAgIGNvbnN0IHNweSA9IHtcclxuICAgICAgbG9nOiBqZXN0LnNweU9uKGNvbnNvbGUsICdsb2cnKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge30pLFxyXG4gICAgICBpbmZvOiBqZXN0LnNweU9uKGNvbnNvbGUsICdpbmZvJykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHt9KSxcclxuICAgICAgd2FybjogamVzdC5zcHlPbihjb25zb2xlLCAnd2FybicpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7fSksXHJcbiAgICAgIGVycm9yOiBqZXN0LnNweU9uKGNvbnNvbGUsICdlcnJvcicpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7fSksXHJcbiAgICAgIGRlYnVnOiBqZXN0LnNweU9uKGNvbnNvbGUsICdkZWJ1ZycpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7fSlcclxuICAgIH07XHJcbiAgICBcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIE9iamVjdC52YWx1ZXMoc3B5KS5mb3JFYWNoKHMgPT4gcy5tb2NrUmVzdG9yZSgpKTtcclxuICAgIH07XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gQ2xlYW4gdXAgYWZ0ZXIgZWFjaCB0ZXN0XHJcbmFmdGVyRWFjaCgoKSA9PiB7XHJcbiAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgamVzdC5jbGVhckFsbFRpbWVycygpO1xyXG4gIFxyXG4gIC8vIFJlc2V0IHBlcmZvcm1hbmNlIG1vY2sgaWYgaXQgZXhpc3RzIGFuZCBpcyBhIEplc3QgbW9ja1xyXG4gIGlmIChnbG9iYWwucGVyZm9ybWFuY2Uubm93ICYmIHR5cGVvZiAoZ2xvYmFsLnBlcmZvcm1hbmNlLm5vdyBhcyBhbnkpLm1vY2tDbGVhciA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgKGdsb2JhbC5wZXJmb3JtYW5jZS5ub3cgYXMgamVzdC5Nb2NrKS5tb2NrQ2xlYXIoKTtcclxuICB9XHJcbiAgXHJcbiAgLy8gUmVzZXQgUkFGIG1vY2tzIGlmIHRoZXkgZXhpc3QgYW5kIGFyZSBKZXN0IG1vY2tzXHJcbiAgaWYgKGdsb2JhbC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgJiYgdHlwZW9mIChnbG9iYWwucmVxdWVzdEFuaW1hdGlvbkZyYW1lIGFzIGFueSkubW9ja0NsZWFyID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAoZ2xvYmFsLnJlcXVlc3RBbmltYXRpb25GcmFtZSBhcyBqZXN0Lk1vY2spLm1vY2tDbGVhcigpO1xyXG4gIH1cclxuICBpZiAoZ2xvYmFsLmNhbmNlbEFuaW1hdGlvbkZyYW1lICYmIHR5cGVvZiAoZ2xvYmFsLmNhbmNlbEFuaW1hdGlvbkZyYW1lIGFzIGFueSkubW9ja0NsZWFyID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAoZ2xvYmFsLmNhbmNlbEFuaW1hdGlvbkZyYW1lIGFzIGplc3QuTW9jaykubW9ja0NsZWFyKCk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIFR5cGVTY3JpcHQgZGVjbGFyYXRpb25zIGZvciBnbG9iYWwgdGVzdCB1dGlsaXRpZXNcclxuZGVjbGFyZSBnbG9iYWwge1xyXG4gIHZhciB0ZXN0VXRpbHM6IHtcclxuICAgIHdhaXRGb3I6IChtczogbnVtYmVyKSA9PiBQcm9taXNlPHZvaWQ+O1xyXG4gICAgY3JlYXRlTW9ja0ROQTogKGxlbmd0aD86IG51bWJlcikgPT4gc3RyaW5nO1xyXG4gICAgY3JlYXRlTW9ja1RyYWl0czogKCkgPT4gYW55O1xyXG4gICAgc3VwcHJlc3NDb25zb2xlOiAoKSA9PiAoKSA9PiB2b2lkO1xyXG4gIH07XHJcbn0gIl0sInZlcnNpb24iOjN9