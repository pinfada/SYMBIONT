{"version":3,"names":["cov_a4r3si4bf","actualCoverage","s","secureRandom_1","require","randomUUID","f","replace","c","r","SecureRandom","random","v","b","toString","SecretRitualSystem","constructor","ritualTriggers","Map","secretCodes","mysticalEvents","set","trigger","interactions","now","Date","recent","filter","i","timestamp","cats","map","category","arr","indexOf","every","cat","includes","effect","name","description","effects","traitBonus","curiosity","creativity","visualEffect","duration","rarity","empathy","context","enhancedPrediction","realTimeEvolution","mysticalVisuals","unlockMessage","detectRitualTrigger","ritual","entries","executeSecret","code","fn","get","generateMysticalEvent","probability","event","focus","push","exports"],"sources":["/mnt/c/Users/m_oli/Projets/SYMBIONT/src/mystical/SecretRitualSystem.ts"],"sourcesContent":["import { RitualCondition, SecretFunction, MysticalEvent, RitualTrigger, ExecutionContext, SecretResult } from '../shared/types/mystical'\r\nimport { SecureRandom } from '@shared/utils/secureRandom';\n\r\n// @ts-expect-error Fonction r√©serv√©e pour usage futur\r\nfunction randomUUID(): string {\r\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n    var r = SecureRandom.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\r\n    return v.toString(16);\r\n  });\r\n}\r\n\r\nexport class SecretRitualSystem {\r\n  private ritualTriggers: Map<string, RitualCondition> = new Map()\r\n  private secretCodes: Map<string, SecretFunction> = new Map()\r\n  private mysticalEvents: MysticalEvent[] = []\r\n\r\n  constructor() {\r\n    // Rituel navigation : visiter 3 cat√©gories diff√©rentes en 5 min\r\n    this.ritualTriggers.set('sacred_pattern', {\r\n      trigger: (interactions: any[]) => {\r\n        const now = Date.now()\r\n        const recent = interactions.filter(i => now - i.timestamp < 5 * 60 * 1000)\r\n        const cats = recent.map(i => i.category).filter((v: string, i: number, arr: string[]) => arr.indexOf(v) === i)\r\n        return ['news', 'social', 'creativity'].every(cat => cats.includes(cat))\r\n      },\r\n      effect: async () => ({\r\n        name: 'Sacred Pattern Blessing',\r\n        description: 'Votre organisme ressent une √©nergie mystique...',\r\n        effects: { traitBonus: { curiosity: 0.1, creativity: 0.15 }, visualEffect: 'golden_aura', duration: 30 * 60 * 1000 },\r\n        rarity: 'rare'\r\n      }),\r\n      rarity: 0.01\r\n    })\r\n    // Rituel synchronisation collective\r\n    this.ritualTriggers.set('collective_awakening', {\r\n      // @ts-expect-error Param√®tre r√©serv√© pour usage futur\r\n      trigger: (interactions: any[]) => {\r\n        // TODO: D√©tection de synchronisation multi-utilisateurs\r\n        return false\r\n      },\r\n      effect: async () => ({\r\n        name: 'Collective Awakening',\r\n        description: 'Un √©veil collectif synchronis√© se produit.',\r\n        effects: { traitBonus: { empathy: 0.2 }, visualEffect: 'blue_aura', duration: 60 * 60 * 1000 },\r\n        rarity: 'epic'\r\n      }),\r\n      rarity: 0.001\r\n    })\r\n    // Code secret \"SYMBIOSIS\"\r\n    // @ts-expect-error Param√®tre r√©serv√© pour usage futur\r\n    this.secretCodes.set('SYMBIOSIS', async (context: ExecutionContext) => ({\r\n      name: 'Symbiosis Mode',\r\n      description: 'Fusion compl√®te entre vous et votre organisme num√©rique',\r\n      effects: { enhancedPrediction: true, realTimeEvolution: true, mysticalVisuals: true },\r\n      duration: 'Infinity',\r\n      unlockMessage: 'üåü F√âLICITATIONS ! Mode Symbiose Ultime d√©bloqu√©.'\r\n    }))\r\n  }\r\n\r\n  detectRitualTrigger(interactions: any[]): RitualTrigger | null {\r\n    for (const [name, ritual] of this.ritualTriggers.entries()) {\r\n      if (ritual.trigger(interactions) && SecureRandom.random() < ritual.rarity) {\r\n        return {\r\n          name,\r\n          effect: ritual.effect(),\r\n          timestamp: Date.now(),\r\n          rarity: ritual.rarity\r\n        }\r\n      }\r\n    }\r\n    return null\r\n  }\r\n\r\n  executeSecret(code: string, context: ExecutionContext): SecretResult | null {\r\n    const fn = this.secretCodes.get(code)\r\n    if (!fn) return null\r\n    // Note: ici on retourne une promesse, √† adapter selon usage\r\n    return fn(context) as any\r\n  }\r\n\r\n  generateMysticalEvent(probability: number): MysticalEvent | null {\r\n    if (SecureRandom.random() < probability) {\r\n      const event: MysticalEvent = {\r\n        name: 'Mystical Surge',\r\n        description: \"Une vague d'√©nergie traverse l'organisme.\",\r\n        effects: { traitBonus: { focus: 0.2 }, visualEffect: 'purple_flash', duration: 10 * 60 * 1000 },\r\n        rarity: 'legendary'\r\n      }\r\n      this.mysticalEvents.push(event)\r\n      return event\r\n    }\r\n    return null\r\n  }\r\n} "],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAcU;IAAAA,aAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,aAAA;AAAAA,aAAA,GAAAE,CAAA;;;;;;;AAbV,MAAAC,cAAA;AAAA;AAAA,CAAAH,aAAA,GAAAE,CAAA,OAAAE,OAAA;AAEA;AACA,SAASC,UAAUA,CAAA;EAAA;EAAAL,aAAA,GAAAM,CAAA;EAAAN,aAAA,GAAAE,CAAA;EACjB,OAAO,sCAAsC,CAACK,OAAO,CAAC,OAAO,EAAE,UAASC,CAAC;IAAA;IAAAR,aAAA,GAAAM,CAAA;IACvE,IAAIG,CAAC;MAAA;MAAA,CAAAT,aAAA,GAAAE,CAAA,OAAGC,cAAA,CAAAO,YAAY,CAACC,MAAM,EAAE,GAAG,EAAE,GAAG,CAAC;MAAEC,CAAC;MAAA;MAAA,CAAAZ,aAAA,GAAAE,CAAA,OAAGM,CAAC,IAAI,GAAG;MAAA;MAAA,CAAAR,aAAA,GAAAa,CAAA,UAAGJ,CAAC;MAAA;MAAA,CAAAT,aAAA,GAAAa,CAAA,UAAIJ,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC;IAAC;IAAAT,aAAA,GAAAE,CAAA;IAC3E,OAAOU,CAAC,CAACE,QAAQ,CAAC,EAAE,CAAC;EACvB,CAAC,CAAC;AACJ;AAEA,MAAaC,kBAAkB;EAK7BC,YAAA;IAAA;IAAAhB,aAAA,GAAAM,CAAA;IAAAN,aAAA,GAAAE,CAAA;IAJQ,KAAAe,cAAc,GAAiC,IAAIC,GAAG,EAAE;IAAA;IAAAlB,aAAA,GAAAE,CAAA;IACxD,KAAAiB,WAAW,GAAgC,IAAID,GAAG,EAAE;IAAA;IAAAlB,aAAA,GAAAE,CAAA;IACpD,KAAAkB,cAAc,GAAoB,EAAE;IAG1C;IAAA;IAAApB,aAAA,GAAAE,CAAA;IACA,IAAI,CAACe,cAAc,CAACI,GAAG,CAAC,gBAAgB,EAAE;MACxCC,OAAO,EAAGC,YAAmB,IAAI;QAAA;QAAAvB,aAAA,GAAAM,CAAA;QAC/B,MAAMkB,GAAG;QAAA;QAAA,CAAAxB,aAAA,GAAAE,CAAA,QAAGuB,IAAI,CAACD,GAAG,EAAE;QACtB,MAAME,MAAM;QAAA;QAAA,CAAA1B,aAAA,GAAAE,CAAA,QAAGqB,YAAY,CAACI,MAAM,CAACC,CAAC,IAAI;UAAA;UAAA5B,aAAA,GAAAM,CAAA;UAAAN,aAAA,GAAAE,CAAA;UAAA,OAAAsB,GAAG,GAAGI,CAAC,CAACC,SAAS,GAAG,CAAC,GAAG,EAAE,GAAG,IAAI;QAAJ,CAAI,CAAC;QAC1E,MAAMC,IAAI;QAAA;QAAA,CAAA9B,aAAA,GAAAE,CAAA,QAAGwB,MAAM,CAACK,GAAG,CAACH,CAAC,IAAI;UAAA;UAAA5B,aAAA,GAAAM,CAAA;UAAAN,aAAA,GAAAE,CAAA;UAAA,OAAA0B,CAAC,CAACI,QAAQ;QAAR,CAAQ,CAAC,CAACL,MAAM,CAAC,CAACf,CAAS,EAAEgB,CAAS,EAAEK,GAAa,KAAK;UAAA;UAAAjC,aAAA,GAAAM,CAAA;UAAAN,aAAA,GAAAE,CAAA;UAAA,OAAA+B,GAAG,CAACC,OAAO,CAACtB,CAAC,CAAC,KAAKgB,CAAC;QAAD,CAAC,CAAC;QAAA;QAAA5B,aAAA,GAAAE,CAAA;QAC9G,OAAO,CAAC,MAAM,EAAE,QAAQ,EAAE,YAAY,CAAC,CAACiC,KAAK,CAACC,GAAG,IAAI;UAAA;UAAApC,aAAA,GAAAM,CAAA;UAAAN,aAAA,GAAAE,CAAA;UAAA,OAAA4B,IAAI,CAACO,QAAQ,CAACD,GAAG,CAAC;QAAD,CAAC,CAAC;MAC1E,CAAC;MACDE,MAAM,EAAE,MAAAA,CAAA,KAAa;QAAA;QAAAtC,aAAA,GAAAM,CAAA;QAAAN,aAAA,GAAAE,CAAA;QAAA;UACnBqC,IAAI,EAAE,yBAAyB;UAC/BC,WAAW,EAAE,iDAAiD;UAC9DC,OAAO,EAAE;YAAEC,UAAU,EAAE;cAAEC,SAAS,EAAE,GAAG;cAAEC,UAAU,EAAE;YAAI,CAAE;YAAEC,YAAY,EAAE,aAAa;YAAEC,QAAQ,EAAE,EAAE,GAAG,EAAE,GAAG;UAAI,CAAE;UACpHC,MAAM,EAAE;SACT;OAAC;MACFA,MAAM,EAAE;KACT,CAAC;IACF;IAAA;IAAA/C,aAAA,GAAAE,CAAA;IACA,IAAI,CAACe,cAAc,CAACI,GAAG,CAAC,sBAAsB,EAAE;MAC9C;MACAC,OAAO,EAAGC,YAAmB,IAAI;QAAA;QAAAvB,aAAA,GAAAM,CAAA;QAAAN,aAAA,GAAAE,CAAA;QAC/B;QACA,OAAO,KAAK;MACd,CAAC;MACDoC,MAAM,EAAE,MAAAA,CAAA,KAAa;QAAA;QAAAtC,aAAA,GAAAM,CAAA;QAAAN,aAAA,GAAAE,CAAA;QAAA;UACnBqC,IAAI,EAAE,sBAAsB;UAC5BC,WAAW,EAAE,4CAA4C;UACzDC,OAAO,EAAE;YAAEC,UAAU,EAAE;cAAEM,OAAO,EAAE;YAAG,CAAE;YAAEH,YAAY,EAAE,WAAW;YAAEC,QAAQ,EAAE,EAAE,GAAG,EAAE,GAAG;UAAI,CAAE;UAC9FC,MAAM,EAAE;SACT;OAAC;MACFA,MAAM,EAAE;KACT,CAAC;IACF;IACA;IAAA;IAAA/C,aAAA,GAAAE,CAAA;IACA,IAAI,CAACiB,WAAW,CAACE,GAAG,CAAC,WAAW,EAAE,MAAO4B,OAAyB,IAAM;MAAA;MAAAjD,aAAA,GAAAM,CAAA;MAAAN,aAAA,GAAAE,CAAA;MAAA;QACtEqC,IAAI,EAAE,gBAAgB;QACtBC,WAAW,EAAE,yDAAyD;QACtEC,OAAO,EAAE;UAAES,kBAAkB,EAAE,IAAI;UAAEC,iBAAiB,EAAE,IAAI;UAAEC,eAAe,EAAE;QAAI,CAAE;QACrFN,QAAQ,EAAE,UAAU;QACpBO,aAAa,EAAE;OAChB;KAAC,CAAC;EACL;EAEAC,mBAAmBA,CAAC/B,YAAmB;IAAA;IAAAvB,aAAA,GAAAM,CAAA;IAAAN,aAAA,GAAAE,CAAA;IACrC,KAAK,MAAM,CAACqC,IAAI,EAAEgB,MAAM,CAAC,IAAI,IAAI,CAACtC,cAAc,CAACuC,OAAO,EAAE,EAAE;MAAA;MAAAxD,aAAA,GAAAE,CAAA;MAC1D;MAAI;MAAA,CAAAF,aAAA,GAAAa,CAAA,UAAA0C,MAAM,CAACjC,OAAO,CAACC,YAAY,CAAC;MAAA;MAAA,CAAAvB,aAAA,GAAAa,CAAA,UAAIV,cAAA,CAAAO,YAAY,CAACC,MAAM,EAAE,GAAG4C,MAAM,CAACR,MAAM,GAAE;QAAA;QAAA/C,aAAA,GAAAa,CAAA;QAAAb,aAAA,GAAAE,CAAA;QACzE,OAAO;UACLqC,IAAI;UACJD,MAAM,EAAEiB,MAAM,CAACjB,MAAM,EAAE;UACvBT,SAAS,EAAEJ,IAAI,CAACD,GAAG,EAAE;UACrBuB,MAAM,EAAEQ,MAAM,CAACR;SAChB;MACH,CAAC;MAAA;MAAA;QAAA/C,aAAA,GAAAa,CAAA;MAAA;IACH;IAAC;IAAAb,aAAA,GAAAE,CAAA;IACD,OAAO,IAAI;EACb;EAEAuD,aAAaA,CAACC,IAAY,EAAET,OAAyB;IAAA;IAAAjD,aAAA,GAAAM,CAAA;IACnD,MAAMqD,EAAE;IAAA;IAAA,CAAA3D,aAAA,GAAAE,CAAA,QAAG,IAAI,CAACiB,WAAW,CAACyC,GAAG,CAACF,IAAI,CAAC;IAAA;IAAA1D,aAAA,GAAAE,CAAA;IACrC,IAAI,CAACyD,EAAE,EAAE;MAAA;MAAA3D,aAAA,GAAAa,CAAA;MAAAb,aAAA,GAAAE,CAAA;MAAA,OAAO,IAAI;IAAA;IAAA;IAAA;MAAAF,aAAA,GAAAa,CAAA;IAAA;IACpB;IAAAb,aAAA,GAAAE,CAAA;IACA,OAAOyD,EAAE,CAACV,OAAO,CAAQ;EAC3B;EAEAY,qBAAqBA,CAACC,WAAmB;IAAA;IAAA9D,aAAA,GAAAM,CAAA;IAAAN,aAAA,GAAAE,CAAA;IACvC,IAAIC,cAAA,CAAAO,YAAY,CAACC,MAAM,EAAE,GAAGmD,WAAW,EAAE;MAAA;MAAA9D,aAAA,GAAAa,CAAA;MACvC,MAAMkD,KAAK;MAAA;MAAA,CAAA/D,aAAA,GAAAE,CAAA,QAAkB;QAC3BqC,IAAI,EAAE,gBAAgB;QACtBC,WAAW,EAAE,2CAA2C;QACxDC,OAAO,EAAE;UAAEC,UAAU,EAAE;YAAEsB,KAAK,EAAE;UAAG,CAAE;UAAEnB,YAAY,EAAE,cAAc;UAAEC,QAAQ,EAAE,EAAE,GAAG,EAAE,GAAG;QAAI,CAAE;QAC/FC,MAAM,EAAE;OACT;MAAA;MAAA/C,aAAA,GAAAE,CAAA;MACD,IAAI,CAACkB,cAAc,CAAC6C,IAAI,CAACF,KAAK,CAAC;MAAA;MAAA/D,aAAA,GAAAE,CAAA;MAC/B,OAAO6D,KAAK;IACd,CAAC;IAAA;IAAA;MAAA/D,aAAA,GAAAa,CAAA;IAAA;IAAAb,aAAA,GAAAE,CAAA;IACD,OAAO,IAAI;EACb;;AACD;AAAAF,aAAA,GAAAE,CAAA;AAlFDgE,OAAA,CAAAnD,kBAAA,GAAAA,kBAAA","ignoreList":[]}