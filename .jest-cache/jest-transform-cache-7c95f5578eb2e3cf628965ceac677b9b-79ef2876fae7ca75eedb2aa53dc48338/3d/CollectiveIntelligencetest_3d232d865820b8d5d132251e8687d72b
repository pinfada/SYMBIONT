662dbc6e759c9a9733efd9f40175cdab
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const collective_intelligence_1 = require("../src/social/collective-intelligence");
describe('CollectiveIntelligence', () => {
    it('propose, vote et dÃ©clenche une mutation collective', () => {
        const onMutation = jest.fn();
        const ci = new collective_intelligence_1.CollectiveIntelligence(onMutation);
        const mutation = { id: 'mut1', data: 42 };
        ci.proposeMutation(mutation, 'peer1');
        ci.vote('mut1', 'peer2');
        expect(ci.aggregateVotes('mut1')).toBe(2);
        const triggered = ci.triggerCollectiveMutation('mut1', 2);
        expect(triggered).toBe(true);
        expect(onMutation).toHaveBeenCalledWith('mut1');
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL21udC9jL1VzZXJzL21fb2xpL1Byb2pldHMvU1lNQklPTlQvX190ZXN0c19fL0NvbGxlY3RpdmVJbnRlbGxpZ2VuY2UudGVzdC50cyIsIm1hcHBpbmdzIjoiOztBQUFBLG1GQUE4RTtBQUU5RSxRQUFRLENBQUMsd0JBQXdCLEVBQUUsR0FBRyxFQUFFO0lBQ3RDLEVBQUUsQ0FBQyxvREFBb0QsRUFBRSxHQUFHLEVBQUU7UUFDNUQsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFBO1FBQzVCLE1BQU0sRUFBRSxHQUFHLElBQUksZ0RBQXNCLENBQUMsVUFBVSxDQUFDLENBQUE7UUFDakQsTUFBTSxRQUFRLEdBQUcsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsQ0FBQTtRQUN6QyxFQUFFLENBQUMsZUFBZSxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQTtRQUNyQyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQTtRQUN4QixNQUFNLENBQUMsRUFBRSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUN6QyxNQUFNLFNBQVMsR0FBRyxFQUFFLENBQUMseUJBQXlCLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFBO1FBQ3pELE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDNUIsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxDQUFBO0lBQ2pELENBQUMsQ0FBQyxDQUFBO0FBQ0osQ0FBQyxDQUFDLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL21udC9jL1VzZXJzL21fb2xpL1Byb2pldHMvU1lNQklPTlQvX190ZXN0c19fL0NvbGxlY3RpdmVJbnRlbGxpZ2VuY2UudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb2xsZWN0aXZlSW50ZWxsaWdlbmNlIH0gZnJvbSAnLi4vc3JjL3NvY2lhbC9jb2xsZWN0aXZlLWludGVsbGlnZW5jZSdcclxuXHJcbmRlc2NyaWJlKCdDb2xsZWN0aXZlSW50ZWxsaWdlbmNlJywgKCkgPT4ge1xyXG4gIGl0KCdwcm9wb3NlLCB2b3RlIGV0IGTDqWNsZW5jaGUgdW5lIG11dGF0aW9uIGNvbGxlY3RpdmUnLCAoKSA9PiB7XHJcbiAgICBjb25zdCBvbk11dGF0aW9uID0gamVzdC5mbigpXHJcbiAgICBjb25zdCBjaSA9IG5ldyBDb2xsZWN0aXZlSW50ZWxsaWdlbmNlKG9uTXV0YXRpb24pXHJcbiAgICBjb25zdCBtdXRhdGlvbiA9IHsgaWQ6ICdtdXQxJywgZGF0YTogNDIgfVxyXG4gICAgY2kucHJvcG9zZU11dGF0aW9uKG11dGF0aW9uLCAncGVlcjEnKVxyXG4gICAgY2kudm90ZSgnbXV0MScsICdwZWVyMicpXHJcbiAgICBleHBlY3QoY2kuYWdncmVnYXRlVm90ZXMoJ211dDEnKSkudG9CZSgyKVxyXG4gICAgY29uc3QgdHJpZ2dlcmVkID0gY2kudHJpZ2dlckNvbGxlY3RpdmVNdXRhdGlvbignbXV0MScsIDIpXHJcbiAgICBleHBlY3QodHJpZ2dlcmVkKS50b0JlKHRydWUpXHJcbiAgICBleHBlY3Qob25NdXRhdGlvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ211dDEnKVxyXG4gIH0pXHJcbn0pICJdLCJ2ZXJzaW9uIjozfQ==