{"version":3,"names":["cov_23eb7vvd04","actualCoverage","s","MessageType","f","b","exports","MessageBus","constructor","_channel","on","_type","_handler","send","_message","subscribe","default"],"sources":["/mnt/c/Users/m_oli/Projets/SYMBIONT/src/shared/messaging/MessageBus.ts"],"sourcesContent":["// Centralisation des types de messages et de l'interface Message\r\nexport enum MessageType {\r\n  PAGE_VISIT = 'PAGE_VISIT',\r\n  SCROLL_EVENT = 'SCROLL_EVENT',\r\n  ORGANISM_UPDATE = 'ORGANISM_UPDATE',\r\n  ORGANISM_MUTATE = 'ORGANISM_MUTATE',\r\n  ORGANISM_STATE_CHANGE = 'ORGANISM_STATE_CHANGE',\r\n  WEBGL_INIT = 'WEBGL_INIT',\r\n  WEBGL_ERROR = 'WEBGL_ERROR',\r\n  WEBGL_INITIALIZED = 'WEBGL_INITIALIZED',\r\n  PERFORMANCE_UPDATE = 'PERFORMANCE_UPDATE',\r\n  GENERATE_INVITATION = 'GENERATE_INVITATION',\r\n  INVITATION_GENERATED = 'INVITATION_GENERATED',\r\n  CONSUME_INVITATION = 'CONSUME_INVITATION',\r\n  INVITATION_CONSUMED = 'INVITATION_CONSUMED',\r\n  CHECK_INVITATION = 'CHECK_INVITATION',\r\n  INVITATION_CHECKED = 'INVITATION_CHECKED',\r\n  MURMUR = 'MURMUR',\r\n  GET_INVITER = 'GET_INVITER',\r\n  INVITER_RESULT = 'INVITER_RESULT',\r\n  GET_INVITEES = 'GET_INVITEES',\r\n  INVITEES_RESULT = 'INVITEES_RESULT',\r\n  GET_INVITATION_HISTORY = 'GET_INVITATION_HISTORY',\r\n  INVITATION_HISTORY_RESULT = 'INVITATION_HISTORY_RESULT',\r\n  INTERACTION_DETECTED = 'INTERACTION_DETECTED',\r\n  // --- Rituels collaboratifs ---\r\n  REQUEST_SHARED_MUTATION = 'REQUEST_SHARED_MUTATION',\r\n  SHARED_MUTATION_CODE = 'SHARED_MUTATION_CODE',\r\n  ACCEPT_SHARED_MUTATION = 'ACCEPT_SHARED_MUTATION',\r\n  SHARED_MUTATION_RESULT = 'SHARED_MUTATION_RESULT',\r\n  COLLECTIVE_WAKE_REQUEST = 'COLLECTIVE_WAKE_REQUEST',\r\n  COLLECTIVE_WAKE_RESULT = 'COLLECTIVE_WAKE_RESULT',\r\n  CONTEXTUAL_INVITATION = 'CONTEXTUAL_INVITATION',\r\n  SECRET_RITUAL_TRIGGERED = 'SECRET_RITUAL_TRIGGERED',\r\n  SECRET_CODE_ENTERED = 'SECRET_CODE_ENTERED',\r\n}\r\n\r\nexport interface Message {\r\n  type: MessageType;\r\n  payload?: any;\r\n  target?: string;\r\n  timestamp?: number;\r\n  source?: string;\r\n  id?: string;\r\n}\r\n\r\nexport class MessageBus {\r\n    constructor(_channel?: string) {}\r\n    on(_type: MessageType, _handler: (message: any) => void): void {}\r\n    send(_message: any): void {}\r\n    subscribe(_type: MessageType, _handler: (message: any) => void): void {\r\n      this.on(_type, _handler);\r\n    }\r\n}\r\n\r\nexport default MessageBus; "],"mappings":"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","ignoreList":[]}