9b018632794d03e15b0b8920b620c528
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const NeuralMeshAsync_1 = require("../src/core/NeuralMeshAsync");
const NeuralMesh_1 = require("../src/core/NeuralMesh");
describe.skip('Neural Performance Tests', () => {
    let asyncMesh;
    let syncMesh;
    beforeEach(() => {
        asyncMesh = new NeuralMeshAsync_1.NeuralMeshAsync('test-network');
        syncMesh = new NeuralMesh_1.NeuralMesh();
    });
    afterEach(async () => {
        if (asyncMesh) {
            await asyncMesh.suspend();
        }
    });
    it('should initialize within reasonable time', async () => {
        const startTime = performance.now();
        await asyncMesh.initialize();
        const endTime = performance.now();
        const initTime = endTime - startTime;
        expect(initTime).toBeLessThan(1000); // Should init within 1 second
    });
    it('should track performance metrics', async () => {
        await asyncMesh.initialize();
        // Stimulate network
        asyncMesh.stimulate('sensory_input', 0.8);
        asyncMesh.stimulate('memory_input', 0.6);
        // Perform propagation
        await asyncMesh.propagate();
        const metrics = asyncMesh.getPerformanceMetrics();
        expect(metrics.operationCount).toBeGreaterThan(0);
        expect(metrics.lastPropagationTime).toBeGreaterThanOrEqual(0);
        expect(metrics.averageProcessingTime).toBeGreaterThanOrEqual(0);
    });
    it('should handle mutations efficiently', async () => {
        await asyncMesh.initialize();
        const startTime = performance.now();
        await asyncMesh.mutate(0.1);
        const endTime = performance.now();
        expect(endTime - startTime).toBeLessThan(100); // Should be fast
    });
    it('should report memory usage', async () => {
        await asyncMesh.initialize();
        const memoryUsage = await asyncMesh.getMemoryUsage();
        expect(memoryUsage).toBeGreaterThan(0);
        expect(memoryUsage).toBeLessThanOrEqual(1); // Normalized to 0-1
    });
    it('should report CPU usage', async () => {
        await asyncMesh.initialize();
        const cpuUsage = await asyncMesh.getCPUUsage();
        expect(cpuUsage).toBeGreaterThanOrEqual(0);
        expect(cpuUsage).toBeLessThanOrEqual(1); // Normalized to 0-1
    });
    it('should handle large networks', async () => {
        // Create a larger network
        for (let i = 0; i < 50; i++) {
            asyncMesh.addNode(`node_${i}`, i < 10 ? 'input' : i > 40 ? 'output' : 'hidden');
        }
        // Add connections
        for (let i = 0; i < 40; i++) {
            for (let j = 10; j < 50; j++) {
                if (Math.random() < 0.2) { // 20% connectivity
                    asyncMesh.addConnection(`node_${i}`, `node_${j}`, Math.random() - 0.5);
                }
            }
        }
        await asyncMesh.initialize();
        const startTime = performance.now();
        await asyncMesh.propagate();
        const endTime = performance.now();
        // Should complete within reasonable time
        expect(endTime - startTime).toBeLessThan(300); // 300ms max
    });
    it('should maintain worker readiness status', async () => {
        await asyncMesh.initialize();
        const metrics = asyncMesh.getPerformanceMetrics();
        expect(typeof metrics.workerReady).toBe('boolean');
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL21udC9jL1VzZXJzL21fb2xpL1Byb2pldHMvU1lNQklPTlQvX190ZXN0c19fL05ldXJhbFBlcmZvcm1hbmNlLnRlc3Quc2tpcC50cyIsIm1hcHBpbmdzIjoiOztBQUFBLGlFQUE4RDtBQUM5RCx1REFBb0Q7QUFFcEQsUUFBUSxDQUFDLElBQUksQ0FBQywwQkFBMEIsRUFBRSxHQUFHLEVBQUU7SUFDN0MsSUFBSSxTQUEwQixDQUFDO0lBQy9CLElBQUksUUFBb0IsQ0FBQztJQUV6QixVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ2QsU0FBUyxHQUFHLElBQUksaUNBQWUsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUNoRCxRQUFRLEdBQUcsSUFBSSx1QkFBVSxFQUFFLENBQUM7SUFDOUIsQ0FBQyxDQUFDLENBQUM7SUFFSCxTQUFTLENBQUMsS0FBSyxJQUFJLEVBQUU7UUFDbkIsSUFBSSxTQUFTLEVBQUUsQ0FBQztZQUNkLE1BQU0sU0FBUyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQzVCLENBQUM7SUFDSCxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQywwQ0FBMEMsRUFBRSxLQUFLLElBQUksRUFBRTtRQUN4RCxNQUFNLFNBQVMsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDcEMsTUFBTSxTQUFTLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDN0IsTUFBTSxPQUFPLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBRWxDLE1BQU0sUUFBUSxHQUFHLE9BQU8sR0FBRyxTQUFTLENBQUM7UUFDckMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLDhCQUE4QjtJQUNyRSxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxrQ0FBa0MsRUFBRSxLQUFLLElBQUksRUFBRTtRQUNoRCxNQUFNLFNBQVMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUU3QixvQkFBb0I7UUFDcEIsU0FBUyxDQUFDLFNBQVMsQ0FBQyxlQUFlLEVBQUUsR0FB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QUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsRUFBRSxFQUFFLFFBQVEsQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDO2dCQUN6RSxDQUFDO1lBQ0gsQ0FBQztRQUNILENBQUM7UUFFRCxNQUFNLFNBQVMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUU3QixNQUFNLFNBQVMsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDcEMsTUFBTSxTQUFTLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDNUIsTUFBTSxPQUFPLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBRWxDLHlDQUF5QztRQUN6QyxNQUFNLENBQUMsT0FBTyxHQUFHLFNBQVMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLFlBQVk7SUFDN0QsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMseUNBQXlDLEVBQUUsS0FBSyxJQUFJLEVBQUU7UUFDdkQsTUFBTSxTQUFTLENBQUMsVUFBVSxFQUFFLENBQUM7UUFFN0IsTUFBTSxPQUFPLEdBQUcsU0FBUyxDQUFDLHFCQUFxQixFQUFFLENBQUM7UUFDbEQsTUFBTSxDQUFDLE9BQU8sT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUNyRCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9tbnQvYy9Vc2Vycy9tX29saS9Qcm9qZXRzL1NZTUJJT05UL19fdGVzdHNfXy9OZXVyYWxQZXJmb3JtYW5jZS50ZXN0LnNraXAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV1cmFsTWVzaEFzeW5jIH0gZnJvbSAnLi4vc3JjL2NvcmUvTmV1cmFsTWVzaEFzeW5jJztcclxuaW1wb3J0IHsgTmV1cmFsTWVzaCB9IGZyb20gJy4uL3NyYy9jb3JlL05ldXJhbE1lc2gnO1xyXG5cclxuZGVzY3JpYmUuc2tpcCgnTmV1cmFsIFBlcmZvcm1hbmNlIFRlc3RzJywgKCkgPT4ge1xyXG4gIGxldCBhc3luY01lc2g6IE5ldXJhbE1lc2hBc3luYztcclxuICBsZXQgc3luY01lc2g6IE5ldXJhbE1lc2g7XHJcbiAgXHJcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICBhc3luY01lc2ggPSBuZXcgTmV1cmFsTWVzaEFzeW5jKCd0ZXN0LW5ldHdvcmsnKTtcclxuICAgIHN5bmNNZXNoID0gbmV3IE5ldXJhbE1lc2goKTtcclxuICB9KTtcclxuXHJcbiAgYWZ0ZXJFYWNoKGFzeW5jICgpID0+IHtcclxuICAgIGlmIChhc3luY01lc2gpIHtcclxuICAgICAgYXdhaXQgYXN5bmNNZXNoLnN1c3BlbmQoKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHdpdGhpbiByZWFzb25hYmxlIHRpbWUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgIGF3YWl0IGFzeW5jTWVzaC5pbml0aWFsaXplKCk7XHJcbiAgICBjb25zdCBlbmRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICBcclxuICAgIGNvbnN0IGluaXRUaW1lID0gZW5kVGltZSAtIHN0YXJ0VGltZTtcclxuICAgIGV4cGVjdChpbml0VGltZSkudG9CZUxlc3NUaGFuKDEwMDApOyAvLyBTaG91bGQgaW5pdCB3aXRoaW4gMSBzZWNvbmRcclxuICB9KTtcclxuXHJcbiAgaXQoJ3Nob3VsZCB0cmFjayBwZXJmb3JtYW5jZSBtZXRyaWNzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgYXdhaXQgYXN5bmNNZXNoLmluaXRpYWxpemUoKTtcclxuICAgIFxyXG4gICAgLy8gU3RpbXVsYXRlIG5ldHdvcmtcclxuICAgIGFzeW5jTWVzaC5zdGltdWxhdGUoJ3NlbnNvcnlfaW5wdXQnLCAwLjgpO1xyXG4gICAgYXN5bmNNZXNoLnN0aW11bGF0ZSgnbWVtb3J5X2lucHV0JywgMC42KTtcclxuICAgIFxyXG4gICAgLy8gUGVyZm9ybSBwcm9wYWdhdGlvblxyXG4gICAgYXdhaXQgYXN5bmNNZXNoLnByb3BhZ2F0ZSgpO1xyXG4gICAgXHJcbiAgICBjb25zdCBtZXRyaWNzID0gYXN5bmNNZXNoLmdldFBlcmZvcm1hbmNlTWV0cmljcygpO1xyXG4gICAgZXhwZWN0KG1ldHJpY3Mub3BlcmF0aW9uQ291bnQpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgIGV4cGVjdChtZXRyaWNzLmxhc3RQcm9wYWdhdGlvblRpbWUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgICBleHBlY3QobWV0cmljcy5hdmVyYWdlUHJvY2Vzc2luZ1RpbWUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdzaG91bGQgaGFuZGxlIG11dGF0aW9ucyBlZmZpY2llbnRseScsIGFzeW5jICgpID0+IHtcclxuICAgIGF3YWl0IGFzeW5jTWVzaC5pbml0aWFsaXplKCk7XHJcbiAgICBcclxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgYXdhaXQgYXN5bmNNZXNoLm11dGF0ZSgwLjEpO1xyXG4gICAgY29uc3QgZW5kVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgXHJcbiAgICBleHBlY3QoZW5kVGltZSAtIHN0YXJ0VGltZSkudG9CZUxlc3NUaGFuKDEwMCk7IC8vIFNob3VsZCBiZSBmYXN0XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdzaG91bGQgcmVwb3J0IG1lbW9yeSB1c2FnZScsIGFzeW5jICgpID0+IHtcclxuICAgIGF3YWl0IGFzeW5jTWVzaC5pbml0aWFsaXplKCk7XHJcbiAgICBcclxuICAgIGNvbnN0IG1lbW9yeVVzYWdlID0gYXdhaXQgYXN5bmNNZXNoLmdldE1lbW9yeVVzYWdlKCk7XHJcbiAgICBleHBlY3QobWVtb3J5VXNhZ2UpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgIGV4cGVjdChtZW1vcnlVc2FnZSkudG9CZUxlc3NUaGFuT3JFcXVhbCgxKTsgLy8gTm9ybWFsaXplZCB0byAwLTFcclxuICB9KTtcclxuXHJcbiAgaXQoJ3Nob3VsZCByZXBvcnQgQ1BVIHVzYWdlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgYXdhaXQgYXN5bmNNZXNoLmluaXRpYWxpemUoKTtcclxuICAgIFxyXG4gICAgY29uc3QgY3B1VXNhZ2UgPSBhd2FpdCBhc3luY01lc2guZ2V0Q1BVVXNhZ2UoKTtcclxuICAgIGV4cGVjdChjcHVVc2FnZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgIGV4cGVjdChjcHVVc2FnZSkudG9CZUxlc3NUaGFuT3JFcXVhbCgxKTsgLy8gTm9ybWFsaXplZCB0byAwLTFcclxuICB9KTtcclxuXHJcbiAgaXQoJ3Nob3VsZCBoYW5kbGUgbGFyZ2UgbmV0d29ya3MnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAvLyBDcmVhdGUgYSBsYXJnZXIgbmV0d29ya1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1MDsgaSsrKSB7XHJcbiAgICAgIGFzeW5jTWVzaC5hZGROb2RlKGBub2RlXyR7aX1gLCBpIDwgMTAgPyAnaW5wdXQnIDogaSA+IDQwID8gJ291dHB1dCcgOiAnaGlkZGVuJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEFkZCBjb25uZWN0aW9uc1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0MDsgaSsrKSB7XHJcbiAgICAgIGZvciAobGV0IGogPSAxMDsgaiA8IDUwOyBqKyspIHtcclxuICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMikgeyAvLyAyMCUgY29ubmVjdGl2aXR5XHJcbiAgICAgICAgICBhc3luY01lc2guYWRkQ29ubmVjdGlvbihgbm9kZV8ke2l9YCwgYG5vZGVfJHtqfWAsIE1hdGgucmFuZG9tKCkgLSAwLjUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBhd2FpdCBhc3luY01lc2guaW5pdGlhbGl6ZSgpO1xyXG4gICAgXHJcbiAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgIGF3YWl0IGFzeW5jTWVzaC5wcm9wYWdhdGUoKTtcclxuICAgIGNvbnN0IGVuZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgIFxyXG4gICAgLy8gU2hvdWxkIGNvbXBsZXRlIHdpdGhpbiByZWFzb25hYmxlIHRpbWVcclxuICAgIGV4cGVjdChlbmRUaW1lIC0gc3RhcnRUaW1lKS50b0JlTGVzc1RoYW4oMzAwKTsgLy8gMzAwbXMgbWF4XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdzaG91bGQgbWFpbnRhaW4gd29ya2VyIHJlYWRpbmVzcyBzdGF0dXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBhd2FpdCBhc3luY01lc2guaW5pdGlhbGl6ZSgpO1xyXG4gICAgXHJcbiAgICBjb25zdCBtZXRyaWNzID0gYXN5bmNNZXNoLmdldFBlcmZvcm1hbmNlTWV0cmljcygpO1xyXG4gICAgZXhwZWN0KHR5cGVvZiBtZXRyaWNzLndvcmtlclJlYWR5KS50b0JlKCdib29sZWFuJyk7XHJcbiAgfSk7XHJcbn0pOyAiXSwidmVyc2lvbiI6M30=