07ad93df7a7ddf86fcbd3cded25ea76f
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// Tests unitaires pour les opérations sécurisées
const safeOperations_1 = require("../safeOperations");
// Mock DOM environment for tests
const mockElement = (className) => ({
    className,
    tagName: 'DIV'
});
describe('SafeOperations Tests', () => {
    describe('safeAverage', () => {
        test('should return 0 for empty array', () => {
            expect((0, safeOperations_1.safeAverage)([])).toBe(0);
        });
        test('should return 0 for null/undefined', () => {
            expect((0, safeOperations_1.safeAverage)(null)).toBe(0);
            expect((0, safeOperations_1.safeAverage)(undefined)).toBe(0);
        });
        test('should calculate correct average', () => {
            expect((0, safeOperations_1.safeAverage)([1, 2, 3, 4, 5])).toBe(3);
            expect((0, safeOperations_1.safeAverage)([10, 20])).toBe(15);
        });
    });
    describe('safeRatio', () => {
        test('should return 0 when denominator is 0', () => {
            expect((0, safeOperations_1.safeRatio)(10, 0)).toBe(0);
        });
        test('should calculate correct ratio', () => {
            expect((0, safeOperations_1.safeRatio)(10, 2)).toBe(5);
            expect((0, safeOperations_1.safeRatio)(0, 5)).toBe(0);
        });
    });
    describe('safeGetClasses', () => {
        test('should return empty array for null/undefined', () => {
            expect((0, safeOperations_1.safeGetClasses)(null)).toEqual([]);
            expect((0, safeOperations_1.safeGetClasses)(undefined)).toEqual([]);
        });
        test('should return empty array for element without className', () => {
            const element = mockElement();
            expect((0, safeOperations_1.safeGetClasses)(element)).toEqual([]);
        });
        test('should split and filter classes correctly', () => {
            const element = mockElement('class1 class2  class3 ');
            expect((0, safeOperations_1.safeGetClasses)(element)).toEqual(['class1', 'class2', 'class3']);
        });
        test('should handle non-string className', () => {
            const element = { className: 123 };
            expect((0, safeOperations_1.safeGetClasses)(element)).toEqual([]);
        });
    });
    describe('safeSplit', () => {
        test('should return empty array for non-string input', () => {
            expect((0, safeOperations_1.safeSplit)(null, ' ')).toEqual([]);
            expect((0, safeOperations_1.safeSplit)(undefined, ' ')).toEqual([]);
            expect((0, safeOperations_1.safeSplit)(123, ' ')).toEqual([]);
        });
        test('should split string correctly', () => {
            expect((0, safeOperations_1.safeSplit)('a b c', ' ')).toEqual(['a', 'b', 'c']);
            expect((0, safeOperations_1.safeSplit)('hello,world', ',')).toEqual(['hello', 'world']);
        });
    });
    describe('safeLength', () => {
        test('should return 0 for null/undefined', () => {
            expect((0, safeOperations_1.safeLength)(null)).toBe(0);
            expect((0, safeOperations_1.safeLength)(undefined)).toBe(0);
        });
        test('should return 0 for non-objects', () => {
            expect((0, safeOperations_1.safeLength)('string')).toBe(0);
            expect((0, safeOperations_1.safeLength)(123)).toBe(0);
        });
        test('should return length for arrays', () => {
            expect((0, safeOperations_1.safeLength)([1, 2, 3])).toBe(3);
            expect((0, safeOperations_1.safeLength)([])).toBe(0);
        });
    });
    describe('safeJsonParse', () => {
        test('should return default for invalid JSON', () => {
            expect((0, safeOperations_1.safeJsonParse)('invalid json', 'default')).toBe('default');
            expect((0, safeOperations_1.safeJsonParse)('', 'default')).toBe('default');
            expect((0, safeOperations_1.safeJsonParse)(null, 'default')).toBe('default');
        });
        test('should parse valid JSON', () => {
            expect((0, safeOperations_1.safeJsonParse)('{"key": "value"}', {})).toEqual({ key: 'value' });
            expect((0, safeOperations_1.safeJsonParse)('[1,2,3]', [])).toEqual([1, 2, 3]);
        });
        test('should handle null values correctly', () => {
            expect((0, safeOperations_1.safeJsonParse)('null', 'default')).toBe('default');
        });
    });
    describe('safeGet', () => {
        test('should return default for null/undefined object', () => {
            expect((0, safeOperations_1.safeGet)(null, 'path', 'default')).toBe('default');
            expect((0, safeOperations_1.safeGet)(undefined, 'path', 'default')).toBe('default');
        });
        test('should return default for non-existent path', () => {
            const obj = { a: { b: 'value' } };
            expect((0, safeOperations_1.safeGet)(obj, 'a.c', 'default')).toBe('default');
            expect((0, safeOperations_1.safeGet)(obj, 'x.y.z', 'default')).toBe('default');
        });
        test('should return correct value for valid path', () => {
            const obj = { a: { b: { c: 'found' } } };
            expect((0, safeOperations_1.safeGet)(obj, 'a.b.c', 'default')).toBe('found');
            expect((0, safeOperations_1.safeGet)(obj, 'a.b', 'default')).toEqual({ c: 'found' });
        });
    });
    describe('safeLimitArray', () => {
        test('should return empty array for null/undefined', () => {
            expect((0, safeOperations_1.safeLimitArray)(null, 5)).toEqual([]);
            expect((0, safeOperations_1.safeLimitArray)(undefined, 5)).toEqual([]);
        });
        test('should return original array if within limit', () => {
            const arr = [1, 2, 3];
            expect((0, safeOperations_1.safeLimitArray)(arr, 5)).toEqual([1, 2, 3]);
        });
        test('should limit array to max size from end', () => {
            const arr = [1, 2, 3, 4, 5, 6];
            expect((0, safeOperations_1.safeLimitArray)(arr, 3)).toEqual([4, 5, 6]);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL21udC9jL1VzZXJzL21fb2xpL1Byb2pldHMvU1lNQklPTlQvc3JjL3NoYXJlZC91dGlscy9fX3Rlc3RzX18vc2FmZU9wZXJhdGlvbnMudGVzdC50cyIsIm1hcHBpbmdzIjoiOztBQUFBLGlEQUFpRDtBQUNqRCxzREFTMkI7QUFFM0IsaUNBQWlDO0FBQ2pDLE1BQU0sV0FBVyxHQUFHLENBQUMsU0FBa0IsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUMzQyxTQUFTO0lBQ1QsT0FBTyxFQUFFLEtBQUs7Q0FDSCxDQUFBLENBQUM7QUFFZCxRQUFRLENBQUMsc0JBQXNCLEVBQUUsR0FBRyxFQUFFO0lBRXBDLFFBQVEsQ0FBQyxhQUFhLEVBQUUsR0FBRyxFQUFFO1FBQzNCLElBQUksQ0FBQyxpQ0FBaUMsRUFBRSxHQUFHLEVBQUU7WUFDM0MsTUFBTSxDQUFDLElBQUEsNEJBQVcsRUFBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNsQyxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxvQ0FBb0MsRUFBRSxHQUFHLEVBQUU7WUFDOUMsTUFBTSxDQUFDLElBQUEsNEJBQVcsRUFBQyxJQUFXLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN6QyxNQUFNLENBQUMsSUFBQSw0QkFBVyxFQUFDLFNBQWdCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNoRCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxrQ0FBa0MsRUFBRSxHQUFHLEVBQUU7WUFDNUMsTUFBTSxDQUFDLElBQUEsNEJBQVcsRUFBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzdDLE1BQU0sQ0FBQyxJQUFBLDRCQUFXLEVBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxD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cmVkL3V0aWxzL19fdGVzdHNfXy9zYWZlT3BlcmF0aW9ucy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRlc3RzIHVuaXRhaXJlcyBwb3VyIGxlcyBvcMOpcmF0aW9ucyBzw6ljdXJpc8OpZXNcclxuaW1wb3J0IHtcclxuICBzYWZlQXZlcmFnZSxcclxuICBzYWZlUmF0aW8sXHJcbiAgc2FmZUdldENsYXNzZXMsXHJcbiAgc2FmZVNwbGl0LFxyXG4gIHNhZmVMZW5ndGgsXHJcbiAgc2FmZUpzb25QYXJzZSxcclxuICBzYWZlR2V0LFxyXG4gIHNhZmVMaW1pdEFycmF5XHJcbn0gZnJvbSAnLi4vc2FmZU9wZXJhdGlvbnMnO1xyXG5cclxuLy8gTW9jayBET00gZW52aXJvbm1lbnQgZm9yIHRlc3RzXHJcbmNvbnN0IG1vY2tFbGVtZW50ID0gKGNsYXNzTmFtZT86IHN0cmluZykgPT4gKHtcclxuICBjbGFzc05hbWUsXHJcbiAgdGFnTmFtZTogJ0RJVidcclxufSBhcyBFbGVtZW50KTtcclxuXHJcbmRlc2NyaWJlKCdTYWZlT3BlcmF0aW9ucyBUZXN0cycsICgpID0+IHtcclxuICBcclxuICBkZXNjcmliZSgnc2FmZUF2ZXJhZ2UnLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIDAgZm9yIGVtcHR5IGFycmF5JywgKCkgPT4ge1xyXG4gICAgICBleHBlY3Qoc2FmZUF2ZXJhZ2UoW10pKS50b0JlKDApO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gMCBmb3IgbnVsbC91bmRlZmluZWQnLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChzYWZlQXZlcmFnZShudWxsIGFzIGFueSkpLnRvQmUoMCk7XHJcbiAgICAgIGV4cGVjdChzYWZlQXZlcmFnZSh1bmRlZmluZWQgYXMgYW55KSkudG9CZSgwKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICB0ZXN0KCdzaG91bGQgY2FsY3VsYXRlIGNvcnJlY3QgYXZlcmFnZScsICgpID0+IHtcclxuICAgICAgZXhwZWN0KHNhZmVBdmVyYWdlKFsxLCAyLCAzLCA0LCA1XSkpLnRvQmUoMyk7XHJcbiAgICAgIGV4cGVjdChzYWZlQXZlcmFnZShbMTAsIDIwXSkpLnRvQmUoMTUpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdzYWZlUmF0aW8nLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIDAgd2hlbiBkZW5vbWluYXRvciBpcyAwJywgKCkgPT4ge1xyXG4gICAgICBleHBlY3Qoc2FmZVJhdGlvKDEwLCAwKSkudG9CZSgwKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICB0ZXN0KCdzaG91bGQgY2FsY3VsYXRlIGNvcnJlY3QgcmF0aW8nLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChzYWZlUmF0aW8oMTAsIDIpKS50b0JlKDUpO1xyXG4gICAgICBleHBlY3Qoc2FmZVJhdGlvKDAsIDUpKS50b0JlKDApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdzYWZlR2V0Q2xhc3NlcycsICgpID0+IHtcclxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gZW1wdHkgYXJyYXkgZm9yIG51bGwvdW5kZWZpbmVkJywgKCkgPT4ge1xyXG4gICAgICBleHBlY3Qoc2FmZUdldENsYXNzZXMobnVsbCkpLnRvRXF1YWwoW10pO1xyXG4gICAgICBleHBlY3Qoc2FmZUdldENsYXNzZXModW5kZWZpbmVkKSkudG9FcXVhbChbXSk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBlbXB0eSBhcnJheSBmb3IgZWxlbWVudCB3aXRob3V0IGNsYXNzTmFtZScsICgpID0+IHtcclxuICAgICAgY29uc3QgZWxlbWVudCA9IG1vY2tFbGVtZW50KCk7XHJcbiAgICAgIGV4cGVjdChzYWZlR2V0Q2xhc3NlcyhlbGVtZW50KSkudG9FcXVhbChbXSk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgdGVzdCgnc2hvdWxkIHNwbGl0IGFuZCBmaWx0ZXIgY2xhc3NlcyBjb3JyZWN0bHknLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBtb2NrRWxlbWVudCgnY2xhc3MxIGNsYXNzMiAgY2xhc3MzICcpO1xyXG4gICAgICBleHBlY3Qoc2FmZUdldENsYXNzZXMoZWxlbWVudCkpLnRvRXF1YWwoWydjbGFzczEnLCAnY2xhc3MyJywgJ2NsYXNzMyddKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIG5vbi1zdHJpbmcgY2xhc3NOYW1lJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBlbGVtZW50ID0geyBjbGFzc05hbWU6IDEyMyB9IGFzIGFueTtcclxuICAgICAgZXhwZWN0KHNhZmVHZXRDbGFzc2VzKGVsZW1lbnQpKS50b0VxdWFsKFtdKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnc2FmZVNwbGl0JywgKCkgPT4ge1xyXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBlbXB0eSBhcnJheSBmb3Igbm9uLXN0cmluZyBpbnB1dCcsICgpID0+IHtcclxuICAgICAgZXhwZWN0KHNhZmVTcGxpdChudWxsLCAnICcpKS50b0VxdWFsKFtdKTtcclxuICAgICAgZXhwZWN0KHNhZmVTcGxpdCh1bmRlZmluZWQsICcgJykpLnRvRXF1YWwoW10pO1xyXG4gICAgICBleHBlY3Qoc2FmZVNwbGl0KDEyMywgJyAnKSkudG9FcXVhbChbXSk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgdGVzdCgnc2hvdWxkIHNwbGl0IHN0cmluZyBjb3JyZWN0bHknLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChzYWZlU3BsaXQoJ2EgYiBjJywgJyAnKSkudG9FcXVhbChbJ2EnLCAnYicsICdjJ10pO1xyXG4gICAgICBleHBlY3Qoc2FmZVNwbGl0KCdoZWxsbyx3b3JsZCcsICcsJykpLnRvRXF1YWwoWydoZWxsbycsICd3b3JsZCddKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnc2FmZUxlbmd0aCcsICgpID0+IHtcclxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gMCBmb3IgbnVsbC91bmRlZmluZWQnLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChzYWZlTGVuZ3RoKG51bGwpKS50b0JlKDApO1xyXG4gICAgICBleHBlY3Qoc2FmZUxlbmd0aCh1bmRlZmluZWQpKS50b0JlKDApO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gMCBmb3Igbm9uLW9iamVjdHMnLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChzYWZlTGVuZ3RoKCdzdHJpbmcnKSkudG9CZSgwKTtcclxuICAgICAgZXhwZWN0KHNhZmVMZW5ndGgoMTIzKSkudG9CZSgwKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIGxlbmd0aCBmb3IgYXJyYXlzJywgKCkgPT4ge1xyXG4gICAgICBleHBlY3Qoc2FmZUxlbmd0aChbMSwgMiwgM10pKS50b0JlKDMpO1xyXG4gICAgICBleHBlY3Qoc2FmZUxlbmd0aChbXSkpLnRvQmUoMCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ3NhZmVKc29uUGFyc2UnLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIGRlZmF1bHQgZm9yIGludmFsaWQgSlNPTicsICgpID0+IHtcclxuICAgICAgZXhwZWN0KHNhZmVKc29uUGFyc2UoJ2ludmFsaWQganNvbicsICdkZWZhdWx0JykpLnRvQmUoJ2RlZmF1bHQnKTtcclxuICAgICAgZXhwZWN0KHNhZmVKc29uUGFyc2UoJycsICdkZWZhdWx0JykpLnRvQmUoJ2RlZmF1bHQnKTtcclxuICAgICAgZXhwZWN0KHNhZmVKc29uUGFyc2UobnVsbCBhcyBhbnksICdkZWZhdWx0JykpLnRvQmUoJ2RlZmF1bHQnKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICB0ZXN0KCdzaG91bGQgcGFyc2UgdmFsaWQgSlNPTicsICgpID0+IHtcclxuICAgICAgZXhwZWN0KHNhZmVKc29uUGFyc2UoJ3tcImtleVwiOiBcInZhbHVlXCJ9Jywge30pKS50b0VxdWFsKHsga2V5OiAndmFsdWUnIH0pO1xyXG4gICAgICBleHBlY3Qoc2FmZUpzb25QYXJzZSgnWzEsMiwzXScsIFtdKSkudG9FcXVhbChbMSwgMiwgM10pO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbnVsbCB2YWx1ZXMgY29ycmVjdGx5JywgKCkgPT4ge1xyXG4gICAgICBleHBlY3Qoc2FmZUpzb25QYXJzZSgnbnVsbCcsICdkZWZhdWx0JykpLnRvQmUoJ2RlZmF1bHQnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnc2FmZUdldCcsICgpID0+IHtcclxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gZGVmYXVsdCBmb3IgbnVsbC91bmRlZmluZWQgb2JqZWN0JywgKCkgPT4ge1xyXG4gICAgICBleHBlY3Qoc2FmZUdldChudWxsLCAncGF0aCcsICdkZWZhdWx0JykpLnRvQmUoJ2RlZmF1bHQnKTtcclxuICAgICAgZXhwZWN0KHNhZmVHZXQodW5kZWZpbmVkLCAncGF0aCcsICdkZWZhdWx0JykpLnRvQmUoJ2RlZmF1bHQnKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIGRlZmF1bHQgZm9yIG5vbi1leGlzdGVudCBwYXRoJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBvYmogPSB7IGE6IHsgYjogJ3ZhbHVlJyB9IH07XHJcbiAgICAgIGV4cGVjdChzYWZlR2V0KG9iaiwgJ2EuYycsICdkZWZhdWx0JykpLnRvQmUoJ2RlZmF1bHQnKTtcclxuICAgICAgZXhwZWN0KHNhZmVHZXQob2JqLCAneC55LnonLCAnZGVmYXVsdCcpKS50b0JlKCdkZWZhdWx0Jyk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBjb3JyZWN0IHZhbHVlIGZvciB2YWxpZCBwYXRoJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBvYmogPSB7IGE6IHsgYjogeyBjOiAnZm91bmQnIH0gfSB9O1xyXG4gICAgICBleHBlY3Qoc2FmZUdldChvYmosICdhLmIuYycsICdkZWZhdWx0JykpLnRvQmUoJ2ZvdW5kJyk7XHJcbiAgICAgIGV4cGVjdChzYWZlR2V0KG9iaiwgJ2EuYicsICdkZWZhdWx0JykpLnRvRXF1YWwoeyBjOiAnZm91bmQnIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdzYWZlTGltaXRBcnJheScsICgpID0+IHtcclxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gZW1wdHkgYXJyYXkgZm9yIG51bGwvdW5kZWZpbmVkJywgKCkgPT4ge1xyXG4gICAgICBleHBlY3Qoc2FmZUxpbWl0QXJyYXkobnVsbCBhcyBhbnksIDUpKS50b0VxdWFsKFtdKTtcclxuICAgICAgZXhwZWN0KHNhZmVMaW1pdEFycmF5KHVuZGVmaW5lZCBhcyBhbnksIDUpKS50b0VxdWFsKFtdKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIG9yaWdpbmFsIGFycmF5IGlmIHdpdGhpbiBsaW1pdCcsICgpID0+IHtcclxuICAgICAgY29uc3QgYXJyID0gWzEsIDIsIDNdO1xyXG4gICAgICBleHBlY3Qoc2FmZUxpbWl0QXJyYXkoYXJyLCA1KSkudG9FcXVhbChbMSwgMiwgM10pO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHRlc3QoJ3Nob3VsZCBsaW1pdCBhcnJheSB0byBtYXggc2l6ZSBmcm9tIGVuZCcsICgpID0+IHtcclxuICAgICAgY29uc3QgYXJyID0gWzEsIDIsIDMsIDQsIDUsIDZdO1xyXG4gICAgICBleHBlY3Qoc2FmZUxpbWl0QXJyYXkoYXJyLCAzKSkudG9FcXVhbChbNCwgNSwgNl0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pOyAiXSwidmVyc2lvbiI6M30=