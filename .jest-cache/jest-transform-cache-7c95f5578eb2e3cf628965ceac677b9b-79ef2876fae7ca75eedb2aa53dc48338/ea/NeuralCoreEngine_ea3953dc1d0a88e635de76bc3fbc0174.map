{"version":3,"names":["cov_1iqcwmdb4n","actualCoverage","s","HebbieanLearningSystem_1","require","BehaviorPredictor_1","GeneticMutator_1","ErrorHandler_1","NeuralCoreEngine","constructor","memoryBank","f","initialized","organisms","Map","hebbian","HebbieanLearningSystem","predictor","BehaviorPredictor","mutator","GeneticMutator","initialize","console","log","error","errorHandler","logSimpleError","createOrganism","userId","dna","generateDNA","organism","id","generation","health","energy","consciousness","traits","curiosity","Math","random","focus","rhythm","empathy","creativity","harmony","wisdom","mutations","socialConnections","memoryFragments","birthTime","Date","now","lastMutation","createdAt","set","saveOrganismState","evolveOrganism","behaviorData","get","b","history","loadOrganismHistory","states","length","loadedOrganism","Error","learningResult","updateWeights","pattern","intensity","timeSpent","interactions","mutation","generateMutation","push","newPatterns","patternMutation","randomMutation","applyMutation","predictNextAction","context","prediction","enrichedPrediction","action","confidence","calculateConfidence","alternatives","generateSuggestions","reasoning","toFixed","hash","simpleHash","genes","i","floor","str","char","charCodeAt","abs","trait","currentValue","newValue","max","min","delta","experienceBonus","focusBonus","wisdomBonus","suggestions","slice","getOrganism","loadOrganism","getAllOrganisms","Array","from","values","isInitialized","exports"],"sources":["/mnt/c/Users/m_oli/Projets/SYMBIONT/src/neural/NeuralCoreEngine.ts"],"sourcesContent":["import { OrganismMemoryBank } from '../background/OrganismMemoryBank'\r\nimport { HebbieanLearningSystem } from './HebbieanLearningSystem'\r\nimport { BehaviorPredictor } from '../behavioral/core/BehaviorPredictor'\r\nimport { GeneticMutator } from './GeneticMutator'\r\nimport { OrganismState, BehaviorPattern, Mutation, PageContext, ActionPrediction } from '../shared/types/organism'\r\nimport { errorHandler } from '../core/utils/ErrorHandler'\r\n\r\nexport class NeuralCoreEngine {\r\n  private organisms: Map<string, OrganismState>\r\n  private hebbian: HebbieanLearningSystem\r\n  private predictor: BehaviorPredictor\r\n  private mutator: GeneticMutator\r\n  private memoryBank: OrganismMemoryBank\r\n  private initialized: boolean = false\r\n\r\n  constructor(memoryBank: OrganismMemoryBank) {\r\n    this.memoryBank = memoryBank\r\n    this.organisms = new Map()\r\n    this.hebbian = new HebbieanLearningSystem()\r\n    this.predictor = new BehaviorPredictor()\r\n    this.mutator = new GeneticMutator()\r\n    this.initialize()\r\n  }\r\n\r\n  private async initialize(): Promise<void> {\r\n    try {\r\n      // Charger les organismes depuis la m√©moire (utiliser la m√©thode existante)\r\n      // Note: Comme retrieveOrganisms n'existe pas, on va cr√©er une logique alternative\r\n      this.initialized = true\r\n      console.log(`üß† NeuralCoreEngine initialis√©`)\r\n    } catch (error) {\r\n      errorHandler.logSimpleError('NeuralCoreEngine', 'initialize', error, 'warning')\r\n      this.initialized = true // Continue m√™me en cas d'erreur\r\n    }\r\n  }\r\n\r\n  async createOrganism(userId: string): Promise<OrganismState> {\r\n    try {\r\n      // G√©n√©rer un ADN unique bas√© sur l'ID utilisateur et un timestamp\r\n      const dna = this.generateDNA(userId)\r\n      \r\n      // Cr√©er un nouvel organisme avec des traits al√©atoires mais √©quilibr√©s\r\n      const organism: OrganismState = {\r\n        id: userId,\r\n        dna,\r\n        generation: 1,\r\n        health: 1.0,\r\n        energy: 1.0,\r\n        consciousness: 0.5,\r\n        traits: {\r\n          curiosity: 0.4 + Math.random() * 0.2,      // 0.4-0.6\r\n          focus: 0.4 + Math.random() * 0.2,          // 0.4-0.6\r\n          rhythm: 0.4 + Math.random() * 0.2,         // 0.4-0.6\r\n          empathy: 0.4 + Math.random() * 0.2,        // 0.4-0.6\r\n          creativity: 0.4 + Math.random() * 0.2,     // 0.4-0.6\r\n          energy: 0.4 + Math.random() * 0.2,         // 0.4-0.6\r\n          harmony: 0.4 + Math.random() * 0.2,        // 0.4-0.6\r\n          wisdom: 0.1 + Math.random() * 0.1          // 0.1-0.2 (plus rare)\r\n        },\r\n        mutations: [],\r\n        socialConnections: [],\r\n        memoryFragments: [],\r\n        birthTime: Date.now(),\r\n        lastMutation: null,\r\n        createdAt: Date.now()\r\n      }\r\n\r\n      // Sauvegarder dans la m√©moire (utiliser la m√©thode existante)\r\n      this.organisms.set(userId, organism)\r\n      await this.memoryBank.saveOrganismState(userId, organism)\r\n\r\n      console.log(`üå± Nouvel organisme cr√©√© pour ${userId}`)\r\n      return organism\r\n    } catch (error) {\r\n      errorHandler.logSimpleError('NeuralCoreEngine', 'createOrganism', error, 'error')\r\n      throw error\r\n    }\r\n  }\r\n\r\n  async evolveOrganism(id: string, behaviorData: BehaviorPattern[]): Promise<Mutation[]> {\r\n    try {\r\n      const organism = this.organisms.get(id)\r\n      if (!organism) {\r\n        // Essayer de charger depuis la m√©moire\r\n        const history = await this.memoryBank.loadOrganismHistory(id)\r\n        if (history.states.length > 0) {\r\n          const loadedOrganism = history.states[0]\r\n          this.organisms.set(id, loadedOrganism)\r\n          return this.evolveOrganism(id, behaviorData) // Retry\r\n        }\r\n        throw new Error(`Organisme ${id} non trouv√©`)\r\n      }\r\n\r\n      // Analyser les patterns de comportement avec le syst√®me Hebbien\r\n      const learningResult = await this.hebbian.updateWeights(behaviorData)\r\n      const mutations: Mutation[] = []\r\n      \r\n      // Mutation de traits bas√©e sur l'activit√©\r\n      for (const pattern of behaviorData) {\r\n        // Analyser l'intensit√© d'interaction (timeSpent + interactions)\r\n        const intensity = (pattern.timeSpent / 60000) + (pattern.interactions * 0.1) // Normaliser\r\n        if (intensity > 0.7) { // Pattern intense\r\n          const mutation = this.mutator.generateMutation('curiosity', 'high_activity')\r\n          if (mutation) {\r\n            mutations.push(mutation)\r\n          }\r\n        }\r\n      }\r\n\r\n      // Mutation bas√©e sur l'apprentissage Hebbien\r\n      if (learningResult.newPatterns.length > 0) {\r\n        const patternMutation = this.mutator.generateMutation('focus', 'pattern_learning')\r\n        if (patternMutation) {\r\n          mutations.push(patternMutation)\r\n        }\r\n      }\r\n\r\n      // Mutation al√©atoire occasionnelle (1% de chance)\r\n      if (Math.random() < 0.01) {\r\n        const randomMutation = this.mutator.generateMutation('energy', 'random')\r\n        if (randomMutation) {\r\n          mutations.push(randomMutation)\r\n        }\r\n      }\r\n\r\n      // Appliquer les mutations √† l'organisme\r\n      for (const mutation of mutations) {\r\n        this.applyMutation(organism, mutation)\r\n      }\r\n\r\n      // Mettre √† jour l'organisme\r\n      organism.lastMutation = Date.now()\r\n      organism.mutations.push(...mutations)\r\n      this.organisms.set(id, organism)\r\n      \r\n      // Sauvegarder\r\n      await this.memoryBank.saveOrganismState(id, organism)\r\n\r\n      console.log(`üß¨ ${mutations.length} mutations appliqu√©es √† l'organisme ${id}`)\r\n      return mutations\r\n    } catch (error) {\r\n      errorHandler.logSimpleError('NeuralCoreEngine', 'evolveOrganism', error, 'error')\r\n      return []\r\n    }\r\n  }\r\n\r\n  async predictNextAction(id: string, context: PageContext): Promise<ActionPrediction> {\r\n    try {\r\n      const organism = this.organisms.get(id)\r\n      if (!organism) {\r\n        throw new Error(`Organisme ${id} non trouv√©`)\r\n      }\r\n\r\n      // Utiliser le pr√©dicteur comportemental (m√©thode existante)\r\n      const prediction = this.predictor.predictNextAction(organism, context)\r\n      \r\n      // Enrichir avec les traits de l'organisme\r\n      const enrichedPrediction: ActionPrediction = {\r\n        action: prediction.action || 'browse',\r\n        confidence: this.calculateConfidence(organism, context),\r\n        alternatives: this.generateSuggestions(organism, context),\r\n        reasoning: `Bas√© sur les traits: curiosit√©=${organism.traits.curiosity.toFixed(2)}, focus=${organism.traits.focus.toFixed(2)}`\r\n      }\r\n\r\n      console.log(`üîÆ Pr√©diction g√©n√©r√©e pour ${id}: ${enrichedPrediction.action}`)\r\n      return enrichedPrediction\r\n    } catch (error) {\r\n      errorHandler.logSimpleError('NeuralCoreEngine', 'predictNextAction', error, 'error')\r\n      \r\n      // Pr√©diction fallback\r\n      return {\r\n        action: 'browse',\r\n        confidence: 0.3,\r\n        alternatives: ['browse', 'search'],\r\n        reasoning: 'Fallback prediction due to error'\r\n      }\r\n    }\r\n  }\r\n\r\n  // M√©thodes utilitaires priv√©es\r\n  private generateDNA(userId: string): string {\r\n    let hash = this.simpleHash(userId + Date.now())\r\n    const genes = ['A', 'T', 'G', 'C']\r\n    let dna = 'SYM'\r\n    \r\n    for (let i = 0; i < 16; i++) {\r\n      dna += genes[hash % 4]\r\n      hash = Math.floor(hash / 4)\r\n    }\r\n    \r\n    return dna\r\n  }\r\n\r\n  private simpleHash(str: string): number {\r\n    let hash = 0\r\n    for (let i = 0; i < str.length; i++) {\r\n      const char = str.charCodeAt(i)\r\n      hash = ((hash << 5) - hash) + char\r\n      hash = hash & hash // Convert to 32-bit integer\r\n    }\r\n    return Math.abs(hash)\r\n  }\r\n\r\n  private applyMutation(organism: OrganismState, mutation: Mutation): void {\r\n    // Appliquer la mutation bas√©e sur le trait\r\n    if (organism.traits[mutation.trait]) {\r\n      const currentValue = organism.traits[mutation.trait]\r\n      const newValue = Math.max(0, Math.min(1, currentValue + mutation.delta))\r\n      organism.traits[mutation.trait] = newValue\r\n    }\r\n  }\r\n\r\n  // @ts-expect-error Param√®tre r√©serv√© pour usage futur\r\n  private calculateConfidence(organism: OrganismState, context: PageContext): number {\r\n    // Base confidence sur l'exp√©rience (nombre de mutations = exp√©rience)\r\n    const experienceBonus = Math.min(0.3, organism.mutations.length * 0.01)\r\n    \r\n    // Bonus pour les traits pertinents\r\n    const focusBonus = organism.traits.focus * 0.2\r\n    const wisdomBonus = (organism.traits.wisdom || 0.1) * 0.3\r\n    \r\n    return Math.min(0.95, 0.4 + experienceBonus + focusBonus + wisdomBonus)\r\n  }\r\n\r\n  // @ts-expect-error Param√®tre r√©serv√© pour usage futur\r\n  private generateSuggestions(organism: OrganismState, context: PageContext): string[] {\r\n    const suggestions = ['browse']\r\n    \r\n    if (organism.traits.curiosity > 0.6) {\r\n      suggestions.push('explore', 'discover')\r\n    }\r\n    if (organism.traits.focus > 0.7) {\r\n      suggestions.push('focus', 'deep_read')\r\n    }\r\n    if (organism.traits.creativity > 0.6) {\r\n      suggestions.push('create', 'imagine')\r\n    }\r\n    \r\n    return suggestions.slice(0, 3) // Limiter √† 3 suggestions\r\n  }\r\n\r\n  // M√©thodes publiques pour l'acc√®s aux organismes\r\n  getOrganism(id: string): OrganismState | undefined {\r\n    return this.organisms.get(id)\r\n  }\r\n\r\n  async loadOrganism(id: string): Promise<OrganismState | null> {\r\n    try {\r\n      const history = await this.memoryBank.loadOrganismHistory(id)\r\n      if (history.states.length > 0) {\r\n        const organism = history.states[0]\r\n        this.organisms.set(id, organism)\r\n        return organism\r\n      }\r\n      return null\r\n    } catch (error) {\r\n      errorHandler.logSimpleError('NeuralCoreEngine', 'loadOrganism', error, 'error')\r\n      return null\r\n    }\r\n  }\r\n\r\n  getAllOrganisms(): OrganismState[] {\r\n    return Array.from(this.organisms.values())\r\n  }\r\n\r\n  async isInitialized(): Promise<boolean> {\r\n    return this.initialized\r\n  }\r\n} "],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAqBQ;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAAAA,cAAA,GAAAE,CAAA;;;;;;;AApBR,MAAAC,wBAAA;AAAA;AAAA,CAAAH,cAAA,GAAAE,CAAA,OAAAE,OAAA;AACA,MAAAC,mBAAA;AAAA;AAAA,CAAAL,cAAA,GAAAE,CAAA,OAAAE,OAAA;AACA,MAAAE,gBAAA;AAAA;AAAA,CAAAN,cAAA,GAAAE,CAAA,OAAAE,OAAA;AAEA,MAAAG,cAAA;AAAA;AAAA,CAAAP,cAAA,GAAAE,CAAA,OAAAE,OAAA;AAEA,MAAaI,gBAAgB;EAQ3BC,YAAYC,UAA8B;IAAA;IAAAV,cAAA,GAAAW,CAAA;IAAAX,cAAA,GAAAE,CAAA;IAFlC,KAAAU,WAAW,GAAY,KAAK;IAAA;IAAAZ,cAAA,GAAAE,CAAA;IAGlC,IAAI,CAACQ,UAAU,GAAGA,UAAU;IAAA;IAAAV,cAAA,GAAAE,CAAA;IAC5B,IAAI,CAACW,SAAS,GAAG,IAAIC,GAAG,EAAE;IAAA;IAAAd,cAAA,GAAAE,CAAA;IAC1B,IAAI,CAACa,OAAO,GAAG,IAAIZ,wBAAA,CAAAa,sBAAsB,EAAE;IAAA;IAAAhB,cAAA,GAAAE,CAAA;IAC3C,IAAI,CAACe,SAAS,GAAG,IAAIZ,mBAAA,CAAAa,iBAAiB,EAAE;IAAA;IAAAlB,cAAA,GAAAE,CAAA;IACxC,IAAI,CAACiB,OAAO,GAAG,IAAIb,gBAAA,CAAAc,cAAc,EAAE;IAAA;IAAApB,cAAA,GAAAE,CAAA;IACnC,IAAI,CAACmB,UAAU,EAAE;EACnB;EAEQ,MAAMA,UAAUA,CAAA;IAAA;IAAArB,cAAA,GAAAW,CAAA;IAAAX,cAAA,GAAAE,CAAA;IACtB,IAAI;MAAA;MAAAF,cAAA,GAAAE,CAAA;MACF;MACA;MACA,IAAI,CAACU,WAAW,GAAG,IAAI;MAAA;MAAAZ,cAAA,GAAAE,CAAA;MACvBoB,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;IAC/C,CAAC,CAAC,OAAOC,KAAK,EAAE;MAAA;MAAAxB,cAAA,GAAAE,CAAA;MACdK,cAAA,CAAAkB,YAAY,CAACC,cAAc,CAAC,kBAAkB,EAAE,YAAY,EAAEF,KAAK,EAAE,SAAS,CAAC;MAAA;MAAAxB,cAAA,GAAAE,CAAA;MAC/E,IAAI,CAACU,WAAW,GAAG,IAAI,EAAC;IAC1B;EACF;EAEA,MAAMe,cAAcA,CAACC,MAAc;IAAA;IAAA5B,cAAA,GAAAW,CAAA;IAAAX,cAAA,GAAAE,CAAA;IACjC,IAAI;MACF;MACA,MAAM2B,GAAG;MAAA;MAAA,CAAA7B,cAAA,GAAAE,CAAA,QAAG,IAAI,CAAC4B,WAAW,CAACF,MAAM,CAAC;MAEpC;MACA,MAAMG,QAAQ;MAAA;MAAA,CAAA/B,cAAA,GAAAE,CAAA,QAAkB;QAC9B8B,EAAE,EAAEJ,MAAM;QACVC,GAAG;QACHI,UAAU,EAAE,CAAC;QACbC,MAAM,EAAE,GAAG;QACXC,MAAM,EAAE,GAAG;QACXC,aAAa,EAAE,GAAG;QAClBC,MAAM,EAAE;UACNC,SAAS,EAAE,GAAG,GAAGC,IAAI,CAACC,MAAM,EAAE,GAAG,GAAG;UAAO;UAC3CC,KAAK,EAAE,GAAG,GAAGF,IAAI,CAACC,MAAM,EAAE,GAAG,GAAG;UAAW;UAC3CE,MAAM,EAAE,GAAG,GAAGH,IAAI,CAACC,MAAM,EAAE,GAAG,GAAG;UAAU;UAC3CG,OAAO,EAAE,GAAG,GAAGJ,IAAI,CAACC,MAAM,EAAE,GAAG,GAAG;UAAS;UAC3CI,UAAU,EAAE,GAAG,GAAGL,IAAI,CAACC,MAAM,EAAE,GAAG,GAAG;UAAM;UAC3CL,MAAM,EAAE,GAAG,GAAGI,IAAI,CAACC,MAAM,EAAE,GAAG,GAAG;UAAU;UAC3CK,OAAO,EAAE,GAAG,GAAGN,IAAI,CAACC,MAAM,EAAE,GAAG,GAAG;UAAS;UAC3CM,MAAM,EAAE,GAAG,GAAGP,IAAI,CAACC,MAAM,EAAE,GAAG,GAAG,CAAU;SAC5C;QACDO,SAAS,EAAE,EAAE;QACbC,iBAAiB,EAAE,EAAE;QACrBC,eAAe,EAAE,EAAE;QACnBC,SAAS,EAAEC,IAAI,CAACC,GAAG,EAAE;QACrBC,YAAY,EAAE,IAAI;QAClBC,SAAS,EAAEH,IAAI,CAACC,GAAG;OACpB;MAED;MAAA;MAAApD,cAAA,GAAAE,CAAA;MACA,IAAI,CAACW,SAAS,CAAC0C,GAAG,CAAC3B,MAAM,EAAEG,QAAQ,CAAC;MAAA;MAAA/B,cAAA,GAAAE,CAAA;MACpC,MAAM,IAAI,CAACQ,UAAU,CAAC8C,iBAAiB,CAAC5B,MAAM,EAAEG,QAAQ,CAAC;MAAA;MAAA/B,cAAA,GAAAE,CAAA;MAEzDoB,OAAO,CAACC,GAAG,CAAC,iCAAiCK,MAAM,EAAE,CAAC;MAAA;MAAA5B,cAAA,GAAAE,CAAA;MACtD,OAAO6B,QAAQ;IACjB,CAAC,CAAC,OAAOP,KAAK,EAAE;MAAA;MAAAxB,cAAA,GAAAE,CAAA;MACdK,cAAA,CAAAkB,YAAY,CAACC,cAAc,CAAC,kBAAkB,EAAE,gBAAgB,EAAEF,KAAK,EAAE,OAAO,CAAC;MAAA;MAAAxB,cAAA,GAAAE,CAAA;MACjF,MAAMsB,KAAK;IACb;EACF;EAEA,MAAMiC,cAAcA,CAACzB,EAAU,EAAE0B,YAA+B;IAAA;IAAA1D,cAAA,GAAAW,CAAA;IAAAX,cAAA,GAAAE,CAAA;IAC9D,IAAI;MACF,MAAM6B,QAAQ;MAAA;MAAA,CAAA/B,cAAA,GAAAE,CAAA,QAAG,IAAI,CAACW,SAAS,CAAC8C,GAAG,CAAC3B,EAAE,CAAC;MAAA;MAAAhC,cAAA,GAAAE,CAAA;MACvC,IAAI,CAAC6B,QAAQ,EAAE;QAAA;QAAA/B,cAAA,GAAA4D,CAAA;QACb;QACA,MAAMC,OAAO;QAAA;QAAA,CAAA7D,cAAA,GAAAE,CAAA,QAAG,MAAM,IAAI,CAACQ,UAAU,CAACoD,mBAAmB,CAAC9B,EAAE,CAAC;QAAA;QAAAhC,cAAA,GAAAE,CAAA;QAC7D,IAAI2D,OAAO,CAACE,MAAM,CAACC,MAAM,GAAG,CAAC,EAAE;UAAA;UAAAhE,cAAA,GAAA4D,CAAA;UAC7B,MAAMK,cAAc;UAAA;UAAA,CAAAjE,cAAA,GAAAE,CAAA,QAAG2D,OAAO,CAACE,MAAM,CAAC,CAAC,CAAC;UAAA;UAAA/D,cAAA,GAAAE,CAAA;UACxC,IAAI,CAACW,SAAS,CAAC0C,GAAG,CAACvB,EAAE,EAAEiC,cAAc,CAAC;UAAA;UAAAjE,cAAA,GAAAE,CAAA;UACtC,OAAO,IAAI,CAACuD,cAAc,CAACzB,EAAE,EAAE0B,YAAY,CAAC,EAAC;QAC/C,CAAC;QAAA;QAAA;UAAA1D,cAAA,GAAA4D,CAAA;QAAA;QAAA5D,cAAA,GAAAE,CAAA;QACD,MAAM,IAAIgE,KAAK,CAAC,aAAalC,EAAE,aAAa,CAAC;MAC/C,CAAC;MAAA;MAAA;QAAAhC,cAAA,GAAA4D,CAAA;MAAA;MAED;MACA,MAAMO,cAAc;MAAA;MAAA,CAAAnE,cAAA,GAAAE,CAAA,QAAG,MAAM,IAAI,CAACa,OAAO,CAACqD,aAAa,CAACV,YAAY,CAAC;MACrE,MAAMX,SAAS;MAAA;MAAA,CAAA/C,cAAA,GAAAE,CAAA,QAAe,EAAE;MAEhC;MAAA;MAAAF,cAAA,GAAAE,CAAA;MACA,KAAK,MAAMmE,OAAO,IAAIX,YAAY,EAAE;QAClC;QACA,MAAMY,SAAS;QAAA;QAAA,CAAAtE,cAAA,GAAAE,CAAA,QAAImE,OAAO,CAACE,SAAS,GAAG,KAAK,GAAKF,OAAO,CAACG,YAAY,GAAG,GAAI,GAAC;QAAA;QAAAxE,cAAA,GAAAE,CAAA;QAC7E,IAAIoE,SAAS,GAAG,GAAG,EAAE;UAAA;UAAAtE,cAAA,GAAA4D,CAAA;UAAE;UACrB,MAAMa,QAAQ;UAAA;UAAA,CAAAzE,cAAA,GAAAE,CAAA,QAAG,IAAI,CAACiB,OAAO,CAACuD,gBAAgB,CAAC,WAAW,EAAE,eAAe,CAAC;UAAA;UAAA1E,cAAA,GAAAE,CAAA;UAC5E,IAAIuE,QAAQ,EAAE;YAAA;YAAAzE,cAAA,GAAA4D,CAAA;YAAA5D,cAAA,GAAAE,CAAA;YACZ6C,SAAS,CAAC4B,IAAI,CAACF,QAAQ,CAAC;UAC1B,CAAC;UAAA;UAAA;YAAAzE,cAAA,GAAA4D,CAAA;UAAA;QACH,CAAC;QAAA;QAAA;UAAA5D,cAAA,GAAA4D,CAAA;QAAA;MACH;MAEA;MAAA;MAAA5D,cAAA,GAAAE,CAAA;MACA,IAAIiE,cAAc,CAACS,WAAW,CAACZ,MAAM,GAAG,CAAC,EAAE;QAAA;QAAAhE,cAAA,GAAA4D,CAAA;QACzC,MAAMiB,eAAe;QAAA;QAAA,CAAA7E,cAAA,GAAAE,CAAA,QAAG,IAAI,CAACiB,OAAO,CAACuD,gBAAgB,CAAC,OAAO,EAAE,kBAAkB,CAAC;QAAA;QAAA1E,cAAA,GAAAE,CAAA;QAClF,IAAI2E,eAAe,EAAE;UAAA;UAAA7E,cAAA,GAAA4D,CAAA;UAAA5D,cAAA,GAAAE,CAAA;UACnB6C,SAAS,CAAC4B,IAAI,CAACE,eAAe,CAAC;QACjC,CAAC;QAAA;QAAA;UAAA7E,cAAA,GAAA4D,CAAA;QAAA;MACH,CAAC;MAAA;MAAA;QAAA5D,cAAA,GAAA4D,CAAA;MAAA;MAED;MAAA5D,cAAA,GAAAE,CAAA;MACA,IAAIqC,IAAI,CAACC,MAAM,EAAE,GAAG,IAAI,EAAE;QAAA;QAAAxC,cAAA,GAAA4D,CAAA;QACxB,MAAMkB,cAAc;QAAA;QAAA,CAAA9E,cAAA,GAAAE,CAAA,QAAG,IAAI,CAACiB,OAAO,CAACuD,gBAAgB,CAAC,QAAQ,EAAE,QAAQ,CAAC;QAAA;QAAA1E,cAAA,GAAAE,CAAA;QACxE,IAAI4E,cAAc,EAAE;UAAA;UAAA9E,cAAA,GAAA4D,CAAA;UAAA5D,cAAA,GAAAE,CAAA;UAClB6C,SAAS,CAAC4B,IAAI,CAACG,cAAc,CAAC;QAChC,CAAC;QAAA;QAAA;UAAA9E,cAAA,GAAA4D,CAAA;QAAA;MACH,CAAC;MAAA;MAAA;QAAA5D,cAAA,GAAA4D,CAAA;MAAA;MAED;MAAA5D,cAAA,GAAAE,CAAA;MACA,KAAK,MAAMuE,QAAQ,IAAI1B,SAAS,EAAE;QAAA;QAAA/C,cAAA,GAAAE,CAAA;QAChC,IAAI,CAAC6E,aAAa,CAAChD,QAAQ,EAAE0C,QAAQ,CAAC;MACxC;MAEA;MAAA;MAAAzE,cAAA,GAAAE,CAAA;MACA6B,QAAQ,CAACsB,YAAY,GAAGF,IAAI,CAACC,GAAG,EAAE;MAAA;MAAApD,cAAA,GAAAE,CAAA;MAClC6B,QAAQ,CAACgB,SAAS,CAAC4B,IAAI,CAAC,GAAG5B,SAAS,CAAC;MAAA;MAAA/C,cAAA,GAAAE,CAAA;MACrC,IAAI,CAACW,SAAS,CAAC0C,GAAG,CAACvB,EAAE,EAAED,QAAQ,CAAC;MAEhC;MAAA;MAAA/B,cAAA,GAAAE,CAAA;MACA,MAAM,IAAI,CAACQ,UAAU,CAAC8C,iBAAiB,CAACxB,EAAE,EAAED,QAAQ,CAAC;MAAA;MAAA/B,cAAA,GAAAE,CAAA;MAErDoB,OAAO,CAACC,GAAG,CAAC,MAAMwB,SAAS,CAACiB,MAAM,uCAAuChC,EAAE,EAAE,CAAC;MAAA;MAAAhC,cAAA,GAAAE,CAAA;MAC9E,OAAO6C,SAAS;IAClB,CAAC,CAAC,OAAOvB,KAAK,EAAE;MAAA;MAAAxB,cAAA,GAAAE,CAAA;MACdK,cAAA,CAAAkB,YAAY,CAACC,cAAc,CAAC,kBAAkB,EAAE,gBAAgB,EAAEF,KAAK,EAAE,OAAO,CAAC;MAAA;MAAAxB,cAAA,GAAAE,CAAA;MACjF,OAAO,EAAE;IACX;EACF;EAEA,MAAM8E,iBAAiBA,CAAChD,EAAU,EAAEiD,OAAoB;IAAA;IAAAjF,cAAA,GAAAW,CAAA;IAAAX,cAAA,GAAAE,CAAA;IACtD,IAAI;MACF,MAAM6B,QAAQ;MAAA;MAAA,CAAA/B,cAAA,GAAAE,CAAA,QAAG,IAAI,CAACW,SAAS,CAAC8C,GAAG,CAAC3B,EAAE,CAAC;MAAA;MAAAhC,cAAA,GAAAE,CAAA;MACvC,IAAI,CAAC6B,QAAQ,EAAE;QAAA;QAAA/B,cAAA,GAAA4D,CAAA;QAAA5D,cAAA,GAAAE,CAAA;QACb,MAAM,IAAIgE,KAAK,CAAC,aAAalC,EAAE,aAAa,CAAC;MAC/C,CAAC;MAAA;MAAA;QAAAhC,cAAA,GAAA4D,CAAA;MAAA;MAED;MACA,MAAMsB,UAAU;MAAA;MAAA,CAAAlF,cAAA,GAAAE,CAAA,QAAG,IAAI,CAACe,SAAS,CAAC+D,iBAAiB,CAACjD,QAAQ,EAAEkD,OAAO,CAAC;MAEtE;MACA,MAAME,kBAAkB;MAAA;MAAA,CAAAnF,cAAA,GAAAE,CAAA,QAAqB;QAC3CkF,MAAM;QAAE;QAAA,CAAApF,cAAA,GAAA4D,CAAA,UAAAsB,UAAU,CAACE,MAAM;QAAA;QAAA,CAAApF,cAAA,GAAA4D,CAAA,UAAI,QAAQ;QACrCyB,UAAU,EAAE,IAAI,CAACC,mBAAmB,CAACvD,QAAQ,EAAEkD,OAAO,CAAC;QACvDM,YAAY,EAAE,IAAI,CAACC,mBAAmB,CAACzD,QAAQ,EAAEkD,OAAO,CAAC;QACzDQ,SAAS,EAAE,kCAAkC1D,QAAQ,CAACM,MAAM,CAACC,SAAS,CAACoD,OAAO,CAAC,CAAC,CAAC,WAAW3D,QAAQ,CAACM,MAAM,CAACI,KAAK,CAACiD,OAAO,CAAC,CAAC,CAAC;OAC7H;MAAA;MAAA1F,cAAA,GAAAE,CAAA;MAEDoB,OAAO,CAACC,GAAG,CAAC,8BAA8BS,EAAE,KAAKmD,kBAAkB,CAACC,MAAM,EAAE,CAAC;MAAA;MAAApF,cAAA,GAAAE,CAAA;MAC7E,OAAOiF,kBAAkB;IAC3B,CAAC,CAAC,OAAO3D,KAAK,EAAE;MAAA;MAAAxB,cAAA,GAAAE,CAAA;MACdK,cAAA,CAAAkB,YAAY,CAACC,cAAc,CAAC,kBAAkB,EAAE,mBAAmB,EAAEF,KAAK,EAAE,OAAO,CAAC;MAEpF;MAAA;MAAAxB,cAAA,GAAAE,CAAA;MACA,OAAO;QACLkF,MAAM,EAAE,QAAQ;QAChBC,UAAU,EAAE,GAAG;QACfE,YAAY,EAAE,CAAC,QAAQ,EAAE,QAAQ,CAAC;QAClCE,SAAS,EAAE;OACZ;IACH;EACF;EAEA;EACQ3D,WAAWA,CAACF,MAAc;IAAA;IAAA5B,cAAA,GAAAW,CAAA;IAChC,IAAIgF,IAAI;IAAA;IAAA,CAAA3F,cAAA,GAAAE,CAAA,QAAG,IAAI,CAAC0F,UAAU,CAAChE,MAAM,GAAGuB,IAAI,CAACC,GAAG,EAAE,CAAC;IAC/C,MAAMyC,KAAK;IAAA;IAAA,CAAA7F,cAAA,GAAAE,CAAA,QAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;IAClC,IAAI2B,GAAG;IAAA;IAAA,CAAA7B,cAAA,GAAAE,CAAA,QAAG,KAAK;IAAA;IAAAF,cAAA,GAAAE,CAAA;IAEf,KAAK,IAAI4F,CAAC;IAAA;IAAA,CAAA9F,cAAA,GAAAE,CAAA,QAAG,CAAC,GAAE4F,CAAC,GAAG,EAAE,EAAEA,CAAC,EAAE,EAAE;MAAA;MAAA9F,cAAA,GAAAE,CAAA;MAC3B2B,GAAG,IAAIgE,KAAK,CAACF,IAAI,GAAG,CAAC,CAAC;MAAA;MAAA3F,cAAA,GAAAE,CAAA;MACtByF,IAAI,GAAGpD,IAAI,CAACwD,KAAK,CAACJ,IAAI,GAAG,CAAC,CAAC;IAC7B;IAAC;IAAA3F,cAAA,GAAAE,CAAA;IAED,OAAO2B,GAAG;EACZ;EAEQ+D,UAAUA,CAACI,GAAW;IAAA;IAAAhG,cAAA,GAAAW,CAAA;IAC5B,IAAIgF,IAAI;IAAA;IAAA,CAAA3F,cAAA,GAAAE,CAAA,QAAG,CAAC;IAAA;IAAAF,cAAA,GAAAE,CAAA;IACZ,KAAK,IAAI4F,CAAC;IAAA;IAAA,CAAA9F,cAAA,GAAAE,CAAA,QAAG,CAAC,GAAE4F,CAAC,GAAGE,GAAG,CAAChC,MAAM,EAAE8B,CAAC,EAAE,EAAE;MACnC,MAAMG,IAAI;MAAA;MAAA,CAAAjG,cAAA,GAAAE,CAAA,QAAG8F,GAAG,CAACE,UAAU,CAACJ,CAAC,CAAC;MAAA;MAAA9F,cAAA,GAAAE,CAAA;MAC9ByF,IAAI,GAAI,CAACA,IAAI,IAAI,CAAC,IAAIA,IAAI,GAAIM,IAAI;MAAA;MAAAjG,cAAA,GAAAE,CAAA;MAClCyF,IAAI,GAAGA,IAAI,GAAGA,IAAI,EAAC;IACrB;IAAC;IAAA3F,cAAA,GAAAE,CAAA;IACD,OAAOqC,IAAI,CAAC4D,GAAG,CAACR,IAAI,CAAC;EACvB;EAEQZ,aAAaA,CAAChD,QAAuB,EAAE0C,QAAkB;IAAA;IAAAzE,cAAA,GAAAW,CAAA;IAAAX,cAAA,GAAAE,CAAA;IAC/D;IACA,IAAI6B,QAAQ,CAACM,MAAM,CAACoC,QAAQ,CAAC2B,KAAK,CAAC,EAAE;MAAA;MAAApG,cAAA,GAAA4D,CAAA;MACnC,MAAMyC,YAAY;MAAA;MAAA,CAAArG,cAAA,GAAAE,CAAA,QAAG6B,QAAQ,CAACM,MAAM,CAACoC,QAAQ,CAAC2B,KAAK,CAAC;MACpD,MAAME,QAAQ;MAAA;MAAA,CAAAtG,cAAA,GAAAE,CAAA,QAAGqC,IAAI,CAACgE,GAAG,CAAC,CAAC,EAAEhE,IAAI,CAACiE,GAAG,CAAC,CAAC,EAAEH,YAAY,GAAG5B,QAAQ,CAACgC,KAAK,CAAC,CAAC;MAAA;MAAAzG,cAAA,GAAAE,CAAA;MACxE6B,QAAQ,CAACM,MAAM,CAACoC,QAAQ,CAAC2B,KAAK,CAAC,GAAGE,QAAQ;IAC5C,CAAC;IAAA;IAAA;MAAAtG,cAAA,GAAA4D,CAAA;IAAA;EACH;EAEA;EACQ0B,mBAAmBA,CAACvD,QAAuB,EAAEkD,OAAoB;IAAA;IAAAjF,cAAA,GAAAW,CAAA;IACvE;IACA,MAAM+F,eAAe;IAAA;IAAA,CAAA1G,cAAA,GAAAE,CAAA,QAAGqC,IAAI,CAACiE,GAAG,CAAC,GAAG,EAAEzE,QAAQ,CAACgB,SAAS,CAACiB,MAAM,GAAG,IAAI,CAAC;IAEvE;IACA,MAAM2C,UAAU;IAAA;IAAA,CAAA3G,cAAA,GAAAE,CAAA,QAAG6B,QAAQ,CAACM,MAAM,CAACI,KAAK,GAAG,GAAG;IAC9C,MAAMmE,WAAW;IAAA;IAAA,CAAA5G,cAAA,GAAAE,CAAA,QAAG;IAAC;IAAA,CAAAF,cAAA,GAAA4D,CAAA,WAAA7B,QAAQ,CAACM,MAAM,CAACS,MAAM;IAAA;IAAA,CAAA9C,cAAA,GAAA4D,CAAA,WAAI,GAAG,KAAI,GAAG;IAAA;IAAA5D,cAAA,GAAAE,CAAA;IAEzD,OAAOqC,IAAI,CAACiE,GAAG,CAAC,IAAI,EAAE,GAAG,GAAGE,eAAe,GAAGC,UAAU,GAAGC,WAAW,CAAC;EACzE;EAEA;EACQpB,mBAAmBA,CAACzD,QAAuB,EAAEkD,OAAoB;IAAA;IAAAjF,cAAA,GAAAW,CAAA;IACvE,MAAMkG,WAAW;IAAA;IAAA,CAAA7G,cAAA,GAAAE,CAAA,QAAG,CAAC,QAAQ,CAAC;IAAA;IAAAF,cAAA,GAAAE,CAAA;IAE9B,IAAI6B,QAAQ,CAACM,MAAM,CAACC,SAAS,GAAG,GAAG,EAAE;MAAA;MAAAtC,cAAA,GAAA4D,CAAA;MAAA5D,cAAA,GAAAE,CAAA;MACnC2G,WAAW,CAAClC,IAAI,CAAC,SAAS,EAAE,UAAU,CAAC;IACzC,CAAC;IAAA;IAAA;MAAA3E,cAAA,GAAA4D,CAAA;IAAA;IAAA5D,cAAA,GAAAE,CAAA;IACD,IAAI6B,QAAQ,CAACM,MAAM,CAACI,KAAK,GAAG,GAAG,EAAE;MAAA;MAAAzC,cAAA,GAAA4D,CAAA;MAAA5D,cAAA,GAAAE,CAAA;MAC/B2G,WAAW,CAAClC,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC;IACxC,CAAC;IAAA;IAAA;MAAA3E,cAAA,GAAA4D,CAAA;IAAA;IAAA5D,cAAA,GAAAE,CAAA;IACD,IAAI6B,QAAQ,CAACM,MAAM,CAACO,UAAU,GAAG,GAAG,EAAE;MAAA;MAAA5C,cAAA,GAAA4D,CAAA;MAAA5D,cAAA,GAAAE,CAAA;MACpC2G,WAAW,CAAClC,IAAI,CAAC,QAAQ,EAAE,SAAS,CAAC;IACvC,CAAC;IAAA;IAAA;MAAA3E,cAAA,GAAA4D,CAAA;IAAA;IAAA5D,cAAA,GAAAE,CAAA;IAED,OAAO2G,WAAW,CAACC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAC;EACjC;EAEA;EACAC,WAAWA,CAAC/E,EAAU;IAAA;IAAAhC,cAAA,GAAAW,CAAA;IAAAX,cAAA,GAAAE,CAAA;IACpB,OAAO,IAAI,CAACW,SAAS,CAAC8C,GAAG,CAAC3B,EAAE,CAAC;EAC/B;EAEA,MAAMgF,YAAYA,CAAChF,EAAU;IAAA;IAAAhC,cAAA,GAAAW,CAAA;IAAAX,cAAA,GAAAE,CAAA;IAC3B,IAAI;MACF,MAAM2D,OAAO;MAAA;MAAA,CAAA7D,cAAA,GAAAE,CAAA,SAAG,MAAM,IAAI,CAACQ,UAAU,CAACoD,mBAAmB,CAAC9B,EAAE,CAAC;MAAA;MAAAhC,cAAA,GAAAE,CAAA;MAC7D,IAAI2D,OAAO,CAACE,MAAM,CAACC,MAAM,GAAG,CAAC,EAAE;QAAA;QAAAhE,cAAA,GAAA4D,CAAA;QAC7B,MAAM7B,QAAQ;QAAA;QAAA,CAAA/B,cAAA,GAAAE,CAAA,SAAG2D,OAAO,CAACE,MAAM,CAAC,CAAC,CAAC;QAAA;QAAA/D,cAAA,GAAAE,CAAA;QAClC,IAAI,CAACW,SAAS,CAAC0C,GAAG,CAACvB,EAAE,EAAED,QAAQ,CAAC;QAAA;QAAA/B,cAAA,GAAAE,CAAA;QAChC,OAAO6B,QAAQ;MACjB,CAAC;MAAA;MAAA;QAAA/B,cAAA,GAAA4D,CAAA;MAAA;MAAA5D,cAAA,GAAAE,CAAA;MACD,OAAO,IAAI;IACb,CAAC,CAAC,OAAOsB,KAAK,EAAE;MAAA;MAAAxB,cAAA,GAAAE,CAAA;MACdK,cAAA,CAAAkB,YAAY,CAACC,cAAc,CAAC,kBAAkB,EAAE,cAAc,EAAEF,KAAK,EAAE,OAAO,CAAC;MAAA;MAAAxB,cAAA,GAAAE,CAAA;MAC/E,OAAO,IAAI;IACb;EACF;EAEA+G,eAAeA,CAAA;IAAA;IAAAjH,cAAA,GAAAW,CAAA;IAAAX,cAAA,GAAAE,CAAA;IACb,OAAOgH,KAAK,CAACC,IAAI,CAAC,IAAI,CAACtG,SAAS,CAACuG,MAAM,EAAE,CAAC;EAC5C;EAEA,MAAMC,aAAaA,CAAA;IAAA;IAAArH,cAAA,GAAAW,CAAA;IAAAX,cAAA,GAAAE,CAAA;IACjB,OAAO,IAAI,CAACU,WAAW;EACzB;;AACD;AAAAZ,cAAA,GAAAE,CAAA;AArQDoH,OAAA,CAAA9G,gBAAA,GAAAA,gBAAA","ignoreList":[]}