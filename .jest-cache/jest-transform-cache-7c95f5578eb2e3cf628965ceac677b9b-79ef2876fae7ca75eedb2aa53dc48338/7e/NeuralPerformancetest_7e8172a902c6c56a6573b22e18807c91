369454241c0d29def37395ab9c14fa74
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const NeuralMeshAsync_1 = require("../src/core/NeuralMeshAsync");
const NeuralMesh_1 = require("../src/core/NeuralMesh");
describe('Neural Performance Tests', () => {
    let asyncMesh;
    let syncMesh;
    beforeEach(() => {
        asyncMesh = new NeuralMeshAsync_1.NeuralMeshAsync('test-network');
        syncMesh = new NeuralMesh_1.NeuralMesh();
    });
    afterEach(async () => {
        if (asyncMesh) {
            await asyncMesh.suspend();
        }
    });
    it('should initialize within reasonable time', async () => {
        const startTime = performance.now();
        await asyncMesh.initialize();
        const endTime = performance.now();
        const initTime = endTime - startTime;
        expect(initTime).toBeLessThan(1000); // Should init within 1 second
    });
    it('should track performance metrics', async () => {
        await asyncMesh.initialize();
        // Stimulate network
        asyncMesh.stimulate('sensory_input', 0.8);
        asyncMesh.stimulate('memory_input', 0.6);
        // Perform propagation
        await asyncMesh.propagate();
        const metrics = asyncMesh.getPerformanceMetrics();
        expect(metrics.operationCount).toBeGreaterThan(0);
        expect(metrics.lastPropagationTime).toBeGreaterThanOrEqual(0);
        expect(metrics.averageProcessingTime).toBeGreaterThanOrEqual(0);
    });
    it('should handle mutations efficiently', async () => {
        await asyncMesh.initialize();
        const startTime = performance.now();
        await asyncMesh.mutate(0.1);
        const endTime = performance.now();
        expect(endTime - startTime).toBeLessThan(100); // Should be fast
    });
    it('should report memory usage', async () => {
        await asyncMesh.initialize();
        const memoryUsage = await asyncMesh.getMemoryUsage();
        expect(memoryUsage).toBeGreaterThan(0);
        expect(memoryUsage).toBeLessThanOrEqual(1); // Normalized to 0-1
    });
    it('should report CPU usage', async () => {
        await asyncMesh.initialize();
        const cpuUsage = await asyncMesh.getCPUUsage();
        expect(cpuUsage).toBeGreaterThanOrEqual(0);
        expect(cpuUsage).toBeLessThanOrEqual(1); // Normalized to 0-1
    });
    it('should handle large networks', async () => {
        // Create a larger network
        for (let i = 0; i < 50; i++) {
            asyncMesh.addNode(`node_${i}`, i < 10 ? 'input' : i > 40 ? 'output' : 'hidden');
        }
        // Add connections
        for (let i = 0; i < 40; i++) {
            for (let j = 10; j < 50; j++) {
                if (Math.random() < 0.2) { // 20% connectivity
                    asyncMesh.addConnection(`node_${i}`, `node_${j}`, Math.random() - 0.5);
                }
            }
        }
        await asyncMesh.initialize();
        const startTime = performance.now();
        await asyncMesh.propagate();
        const endTime = performance.now();
        // Should complete within reasonable time
        expect(endTime - startTime).toBeLessThan(300); // 300ms max
    });
    it('should maintain worker readiness status', async () => {
        await asyncMesh.initialize();
        const metrics = asyncMesh.getPerformanceMetrics();
        expect(typeof metrics.workerReady).toBe('boolean');
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL21udC9jL1VzZXJzL21fb2xpL1Byb2pldHMvU1lNQklPTlQvX190ZXN0c19fL05ldXJhbFBlcmZvcm1hbmNlLnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7QUFBQSxpRUFBOEQ7QUFDOUQsdURBQW9EO0FBRXBELFFBQVEsQ0FBQywwQkFBMEIsRUFBRSxHQUFHLEVBQUU7SUFDeEMsSUFBSSxTQUEwQixDQUFDO0lBQy9CLElBQUksUUFBb0IsQ0FBQztJQUV6QixVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ2QsU0FBUyxHQUFHLElBQUksaUNBQWUsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUNoRCxRQUFRLEdBQUcsSUFBSSx1QkFBVSxFQUFFLENBQUM7SUFDOUIsQ0FBQyxDQUFDLENBQUM7SUFFSCxTQUFTLENBQUMsS0FBSyxJQUFJLEVBQUU7UUFDbkIsSUFBSSxTQUFTLEVBQUUsQ0FBQztZQUNkLE1BQU0sU0FBUyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQzVCLENBQUM7SUFDSCxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQywwQ0FBMEMsRUFBRSxLQUFLLElBQUksRUFBRTtRQUN4RCxNQUFNLFNBQVMsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDcEMsTUFBTSxTQUFTLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDN0IsTUFBTSxPQUFPLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBRWxDLE1BQU0sUUFBUSxHQUFHLE9BQU8sR0FBRyxTQUFTLENBQUM7UUFDckMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLDhCQUE4QjtJQUNyRSxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyxrQ0FBa0MsRUFBRSxLQUFLLElBQUksRUFBRTtRQUNoRCxNQUFNLFNBQVMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUU3QixvQkFBb0I7UUFDcEIsU0FBUyxDQUFDLFNBQVMsQ0FBQyxlQUFlLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFD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QUFRLENBQUMsRUFBRSxFQUFFLFFBQVEsQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDO2dCQUN6RSxDQUFDO1lBQ0gsQ0FBQztRQUNILENBQUM7UUFFRCxNQUFNLFNBQVMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUU3QixNQUFNLFNBQVMsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDcEMsTUFBTSxTQUFTLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDNUIsTUFBTSxPQUFPLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBRWxDLHlDQUF5QztRQUN6QyxNQUFNLENBQUMsT0FBTyxHQUFHLFNBQVMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLFlBQVk7SUFDN0QsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMseUNBQXlDLEVBQUUsS0FBSyxJQUFJLEVBQUU7UUFDdkQsTUFBTSxTQUFTLENBQUMsVUFBVSxFQUFFLENBQUM7UUFFN0IsTUFBTSxPQUFPLEdBQUcsU0FBUyxDQUFDLHFCQUFxQixFQUFFLENBQUM7UUFDbEQsTUFBTSxDQUFDLE9BQU8sT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUNyRCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9tbnQvYy9Vc2Vycy9tX29saS9Qcm9qZXRzL1NZTUJJT05UL19fdGVzdHNfXy9OZXVyYWxQZXJmb3JtYW5jZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5ldXJhbE1lc2hBc3luYyB9IGZyb20gJy4uL3NyYy9jb3JlL05ldXJhbE1lc2hBc3luYyc7XHJcbmltcG9ydCB7IE5ldXJhbE1lc2ggfSBmcm9tICcuLi9zcmMvY29yZS9OZXVyYWxNZXNoJztcclxuXHJcbmRlc2NyaWJlKCdOZXVyYWwgUGVyZm9ybWFuY2UgVGVzdHMnLCAoKSA9PiB7XHJcbiAgbGV0IGFzeW5jTWVzaDogTmV1cmFsTWVzaEFzeW5jO1xyXG4gIGxldCBzeW5jTWVzaDogTmV1cmFsTWVzaDtcclxuICBcclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIGFzeW5jTWVzaCA9IG5ldyBOZXVyYWxNZXNoQXN5bmMoJ3Rlc3QtbmV0d29yaycpO1xyXG4gICAgc3luY01lc2ggPSBuZXcgTmV1cmFsTWVzaCgpO1xyXG4gIH0pO1xyXG5cclxuICBhZnRlckVhY2goYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKGFzeW5jTWVzaCkge1xyXG4gICAgICBhd2FpdCBhc3luY01lc2guc3VzcGVuZCgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBpdCgnc2hvdWxkIGluaXRpYWxpemUgd2l0aGluIHJlYXNvbmFibGUgdGltZScsIGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgYXdhaXQgYXN5bmNNZXNoLmluaXRpYWxpemUoKTtcclxuICAgIGNvbnN0IGVuZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgIFxyXG4gICAgY29uc3QgaW5pdFRpbWUgPSBlbmRUaW1lIC0gc3RhcnRUaW1lO1xyXG4gICAgZXhwZWN0KGluaXRUaW1lKS50b0JlTGVzc1RoYW4oMTAwMCk7IC8vIFNob3VsZCBpbml0IHdpdGhpbiAxIHNlY29uZFxyXG4gIH0pO1xyXG5cclxuICBpdCgnc2hvdWxkIHRyYWNrIHBlcmZvcm1hbmNlIG1ldHJpY3MnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBhd2FpdCBhc3luY01lc2guaW5pdGlhbGl6ZSgpO1xyXG4gICAgXHJcbiAgICAvLyBTdGltdWxhdGUgbmV0d29ya1xyXG4gICAgYXN5bmNNZXNoLnN0aW11bGF0ZSgnc2Vuc29yeV9pbnB1dCcsIDAuOCk7XHJcbiAgICBhc3luY01lc2guc3RpbXVsYXRlKCdtZW1vcnlfaW5wdXQnLCAwLjYpO1xyXG4gICAgXHJcbiAgICAvLyBQZXJmb3JtIHByb3BhZ2F0aW9uXHJcbiAgICBhd2FpdCBhc3luY01lc2gucHJvcGFnYXRlKCk7XHJcbiAgICBcclxuICAgIGNvbnN0IG1ldHJpY3MgPSBhc3luY01lc2guZ2V0UGVyZm9ybWFuY2VNZXRyaWNzKCk7XHJcbiAgICBleHBlY3QobWV0cmljcy5vcGVyYXRpb25Db3VudCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgZXhwZWN0KG1ldHJpY3MubGFzdFByb3BhZ2F0aW9uVGltZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICAgIGV4cGVjdChtZXRyaWNzLmF2ZXJhZ2VQcm9jZXNzaW5nVGltZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3Nob3VsZCBoYW5kbGUgbXV0YXRpb25zIGVmZmljaWVudGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgYXdhaXQgYXN5bmNNZXNoLmluaXRpYWxpemUoKTtcclxuICAgIFxyXG4gICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICBhd2FpdCBhc3luY01lc2gubXV0YXRlKDAuMSk7XHJcbiAgICBjb25zdCBlbmRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICBcclxuICAgIGV4cGVjdChlbmRUaW1lIC0gc3RhcnRUaW1lKS50b0JlTGVzc1RoYW4oMTAwKTsgLy8gU2hvdWxkIGJlIGZhc3RcclxuICB9KTtcclxuXHJcbiAgaXQoJ3Nob3VsZCByZXBvcnQgbWVtb3J5IHVzYWdlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgYXdhaXQgYXN5bmNNZXNoLmluaXRpYWxpemUoKTtcclxuICAgIFxyXG4gICAgY29uc3QgbWVtb3J5VXNhZ2UgPSBhd2FpdCBhc3luY01lc2guZ2V0TWVtb3J5VXNhZ2UoKTtcclxuICAgIGV4cGVjdChtZW1vcnlVc2FnZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgZXhwZWN0KG1lbW9yeVVzYWdlKS50b0JlTGVzc1RoYW5PckVxdWFsKDEpOyAvLyBOb3JtYWxpemVkIHRvIDAtMVxyXG4gIH0pO1xyXG5cclxuICBpdCgnc2hvdWxkIHJlcG9ydCBDUFUgdXNhZ2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBhd2FpdCBhc3luY01lc2guaW5pdGlhbGl6ZSgpO1xyXG4gICAgXHJcbiAgICBjb25zdCBjcHVVc2FnZSA9IGF3YWl0IGFzeW5jTWVzaC5nZXRDUFVVc2FnZSgpO1xyXG4gICAgZXhwZWN0KGNwdVVzYWdlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xyXG4gICAgZXhwZWN0KGNwdVVzYWdlKS50b0JlTGVzc1RoYW5PckVxdWFsKDEpOyAvLyBOb3JtYWxpemVkIHRvIDAtMVxyXG4gIH0pO1xyXG5cclxuICBpdCgnc2hvdWxkIGhhbmRsZSBsYXJnZSBuZXR3b3JrcycsIGFzeW5jICgpID0+IHtcclxuICAgIC8vIENyZWF0ZSBhIGxhcmdlciBuZXR3b3JrXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDUwOyBpKyspIHtcclxuICAgICAgYXN5bmNNZXNoLmFkZE5vZGUoYG5vZGVfJHtpfWAsIGkgPCAxMCA/ICdpbnB1dCcgOiBpID4gNDAgPyAnb3V0cHV0JyA6ICdoaWRkZW4nKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQWRkIGNvbm5lY3Rpb25zXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQwOyBpKyspIHtcclxuICAgICAgZm9yIChsZXQgaiA9IDEwOyBqIDwgNTA7IGorKykge1xyXG4gICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC4yKSB7IC8vIDIwJSBjb25uZWN0aXZpdHlcclxuICAgICAgICAgIGFzeW5jTWVzaC5hZGRDb25uZWN0aW9uKGBub2RlXyR7aX1gLCBgbm9kZV8ke2p9YCwgTWF0aC5yYW5kb20oKSAtIDAuNSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGF3YWl0IGFzeW5jTWVzaC5pbml0aWFsaXplKCk7XHJcbiAgICBcclxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgYXdhaXQgYXN5bmNNZXNoLnByb3BhZ2F0ZSgpO1xyXG4gICAgY29uc3QgZW5kVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgXHJcbiAgICAvLyBTaG91bGQgY29tcGxldGUgd2l0aGluIHJlYXNvbmFibGUgdGltZVxyXG4gICAgZXhwZWN0KGVuZFRpbWUgLSBzdGFydFRpbWUpLnRvQmVMZXNzVGhhbigzMDApOyAvLyAzMDBtcyBtYXhcclxuICB9KTtcclxuXHJcbiAgaXQoJ3Nob3VsZCBtYWludGFpbiB3b3JrZXIgcmVhZGluZXNzIHN0YXR1cycsIGFzeW5jICgpID0+IHtcclxuICAgIGF3YWl0IGFzeW5jTWVzaC5pbml0aWFsaXplKCk7XHJcbiAgICBcclxuICAgIGNvbnN0IG1ldHJpY3MgPSBhc3luY01lc2guZ2V0UGVyZm9ybWFuY2VNZXRyaWNzKCk7XHJcbiAgICBleHBlY3QodHlwZW9mIG1ldHJpY3Mud29ya2VyUmVhZHkpLnRvQmUoJ2Jvb2xlYW4nKTtcclxuICB9KTtcclxufSk7ICJdLCJ2ZXJzaW9uIjozfQ==