{"version":3,"names":["cov_zqn8obsov","actualCoverage","s","secureLogger_1","require","FeatureFlagService","constructor","f","overrides","environment","detectEnvironment","flags","initializeFlags","loadOverrides","getInstance","instance","b","nodeEnv","process","env","NODE_ENV","window","url","location","href","includes","startsWith","baseFlags","USE_REAL_METRICS","USE_REAL_DNA","USE_REAL_BEHAVIOR","USE_BACKEND_API","ENABLE_DEBUG_LOGGING","ENABLE_PERFORMANCE_PROFILING","ENABLE_MOCK_DATA","ENABLE_SECURITY_AUDIT","ENABLE_ADVANCED_ANALYTICS","ENABLE_A_B_TESTING","getEnvBoolean","Object","keys","forEach","flag","envValue","undefined","localStorage","storageKey","toLowerCase","storageValue","getItem","isEnabled","setFlag","value","logger","warn","setItem","toString","info","resetOverrides","removeItem","getEnvironment","getAllFlags","resolvedFlags","isDevelopment","isStaging","isProduction","runInEnvironment","handlers","handler","default","debugLog","message","args","profileOperation","name","operation","start","performance","now","result","duration","toFixed","whenEnabled","key","defaultValue","validateProductionSafety","unsafeFlags","violations","filter","length","Error","join","exports"],"sources":["/mnt/c/Users/m_oli/Projets/SYMBIONT/src/core/services/FeatureFlagService.ts"],"sourcesContent":["import { logger } from '@shared/utils/secureLogger';\n/**\n * FeatureFlagService - Gestion centralis√©e des feature flags\n * S√©pare proprement le comportement dev/staging/production\n */\n\nexport interface FeatureFlags {\n  USE_REAL_METRICS: boolean;\n  USE_REAL_DNA: boolean;\n  USE_REAL_BEHAVIOR: boolean;\n  USE_BACKEND_API: boolean;\n  ENABLE_DEBUG_LOGGING: boolean;\n  ENABLE_PERFORMANCE_PROFILING: boolean;\n  ENABLE_MOCK_DATA: boolean;\n  ENABLE_SECURITY_AUDIT: boolean;\n  ENABLE_ADVANCED_ANALYTICS: boolean;\n  ENABLE_A_B_TESTING: boolean;\n}\n\nexport type Environment = 'development' | 'staging' | 'production';\n\nclass FeatureFlagService {\n  private static instance: FeatureFlagService;\n  private environment: Environment;\n  private flags: FeatureFlags;\n  private overrides: Partial<FeatureFlags> = {};\n\n  private constructor() {\n    this.environment = this.detectEnvironment();\n    this.flags = this.initializeFlags();\n    this.loadOverrides();\n  }\n\n  static getInstance(): FeatureFlagService {\n    if (!FeatureFlagService.instance) {\n      FeatureFlagService.instance = new FeatureFlagService();\n    }\n    return FeatureFlagService.instance;\n  }\n\n  /**\n   * D√©tecte l'environnement actuel\n   */\n  private detectEnvironment(): Environment {\n    // 1. Variable d'environnement explicite\n    const nodeEnv = process.env.NODE_ENV;\n    if (nodeEnv === 'production') return 'production';\n    if (nodeEnv === 'staging') return 'staging';\n    if (nodeEnv === 'development') return 'development';\n\n    // 2. D√©tection par URL (pour extensions)\n    if (typeof window !== 'undefined') {\n      const url = window.location.href;\n      if (url.includes('staging')) return 'staging';\n      if (url.includes('localhost') || url.includes('127.0.0.1')) return 'development';\n      if (url.startsWith('chrome-extension://')) {\n        // Extension en prod si pas de marqueur dev\n        return url.includes('dev') ? 'development' : 'production';\n      }\n    }\n\n    // 3. Fallback d√©veloppement\n    return 'development';\n  }\n\n  /**\n   * Initialise les flags selon l'environnement\n   */\n  private initializeFlags(): FeatureFlags {\n    const baseFlags: FeatureFlags = {\n      USE_REAL_METRICS: false,\n      USE_REAL_DNA: false,\n      USE_REAL_BEHAVIOR: false,\n      USE_BACKEND_API: false,\n      ENABLE_DEBUG_LOGGING: false,\n      ENABLE_PERFORMANCE_PROFILING: false,\n      ENABLE_MOCK_DATA: true,\n      ENABLE_SECURITY_AUDIT: false,\n      ENABLE_ADVANCED_ANALYTICS: false,\n      ENABLE_A_B_TESTING: false\n    };\n\n    switch (this.environment) {\n      case 'development':\n        return {\n          ...baseFlags,\n          ENABLE_DEBUG_LOGGING: true,\n          ENABLE_PERFORMANCE_PROFILING: true,\n          ENABLE_MOCK_DATA: true,\n          ENABLE_SECURITY_AUDIT: true,\n          // Possibilit√© d'activer vraies donn√©es en dev pour tests\n          USE_REAL_METRICS: this.getEnvBoolean('USE_REAL_METRICS', false),\n          USE_REAL_DNA: this.getEnvBoolean('USE_REAL_DNA', false),\n          USE_REAL_BEHAVIOR: this.getEnvBoolean('USE_REAL_BEHAVIOR', false),\n          USE_BACKEND_API: this.getEnvBoolean('USE_BACKEND_API', false)\n        };\n\n      case 'staging':\n        return {\n          ...baseFlags,\n          USE_REAL_METRICS: true,\n          USE_REAL_DNA: true,\n          USE_REAL_BEHAVIOR: true,\n          USE_BACKEND_API: true,\n          ENABLE_DEBUG_LOGGING: false,\n          ENABLE_PERFORMANCE_PROFILING: true,\n          ENABLE_MOCK_DATA: false,\n          ENABLE_SECURITY_AUDIT: true,\n          ENABLE_ADVANCED_ANALYTICS: true,\n          ENABLE_A_B_TESTING: true\n        };\n\n      case 'production':\n        return {\n          ...baseFlags,\n          USE_REAL_METRICS: true,\n          USE_REAL_DNA: true,\n          USE_REAL_BEHAVIOR: true,\n          USE_BACKEND_API: true,\n          ENABLE_DEBUG_LOGGING: false,\n          ENABLE_PERFORMANCE_PROFILING: false,\n          ENABLE_MOCK_DATA: false,\n          ENABLE_SECURITY_AUDIT: false,\n          ENABLE_ADVANCED_ANALYTICS: true,\n          ENABLE_A_B_TESTING: false // D√©sactiv√© par d√©faut en prod\n        };\n\n      default:\n        return baseFlags;\n    }\n  }\n\n  /**\n   * Charge les overrides depuis localStorage et variables d'env\n   */\n  private loadOverrides(): void {\n    // 1. Variables d'environnement\n    Object.keys(this.flags).forEach(flag => {\n      const envValue = process.env[`SYMBIONT_${flag}`];\n      if (envValue !== undefined) {\n        this.overrides[flag as keyof FeatureFlags] = envValue === 'true';\n      }\n    });\n\n    // 2. localStorage (pour tests manuels en dev)\n    if (this.environment === 'development' && typeof localStorage !== 'undefined') {\n      Object.keys(this.flags).forEach(flag => {\n        const storageKey = `symbiont_feature_${flag.toLowerCase()}`;\n        const storageValue = localStorage.getItem(storageKey);\n        if (storageValue !== null) {\n          this.overrides[flag as keyof FeatureFlags] = storageValue === 'true';\n        }\n      });\n    }\n  }\n\n  /**\n   * Obtient la valeur d'un feature flag\n   */\n  isEnabled(flag: keyof FeatureFlags): boolean {\n    // 1. Override explicite\n    if (this.overrides[flag] !== undefined) {\n      return this.overrides[flag]!;\n    }\n\n    // 2. Valeur par d√©faut selon environnement\n    return this.flags[flag];\n  }\n\n  /**\n   * Override temporaire d'un flag (dev uniquement)\n   */\n  setFlag(flag: keyof FeatureFlags, value: boolean): void {\n    if (this.environment !== 'development') {\n      logger.warn(`‚ö†Ô∏è Override de feature flag '${flag}' ignor√© en ${this.environment}`);\n      return;\n    }\n\n    this.overrides[flag] = value;\n    \n    // Sauvegarder en localStorage pour persistence\n    if (typeof localStorage !== 'undefined') {\n      const storageKey = `symbiont_feature_${flag.toLowerCase()}`;\n      localStorage.setItem(storageKey, value.toString());\n    }\n\n    logger.info(`üîß Feature flag '${flag}' d√©fini √† ${value}`);\n  }\n\n  /**\n   * Remet √† z√©ro tous les overrides\n   */\n  resetOverrides(): void {\n    if (this.environment !== 'development') {\n      logger.warn('‚ö†Ô∏è Reset des overrides ignor√© en production');\n      return;\n    }\n\n    this.overrides = {};\n    \n    // Nettoyer localStorage\n    if (typeof localStorage !== 'undefined') {\n      Object.keys(this.flags).forEach(flag => {\n        const storageKey = `symbiont_feature_${flag.toLowerCase()}`;\n        localStorage.removeItem(storageKey);\n      });\n    }\n\n    logger.info('üîÑ Tous les feature flags remis aux valeurs par d√©faut');\n  }\n\n  /**\n   * Obtient l'environnement actuel\n   */\n  getEnvironment(): Environment {\n    return this.environment;\n  }\n\n  /**\n   * Obtient tous les flags actuels (pour debug)\n   */\n  getAllFlags(): FeatureFlags & { environment: Environment } {\n    const resolvedFlags: FeatureFlags = {} as FeatureFlags;\n    \n    Object.keys(this.flags).forEach(flag => {\n      resolvedFlags[flag as keyof FeatureFlags] = this.isEnabled(flag as keyof FeatureFlags);\n    });\n\n    return {\n      ...resolvedFlags,\n      environment: this.environment\n    };\n  }\n\n  /**\n   * V√©rifie si on est en mode d√©veloppement\n   */\n  isDevelopment(): boolean {\n    return this.environment === 'development';\n  }\n\n  /**\n   * V√©rifie si on est en mode staging\n   */\n  isStaging(): boolean {\n    return this.environment === 'staging';\n  }\n\n  /**\n   * V√©rifie si on est en mode production\n   */\n  isProduction(): boolean {\n    return this.environment === 'production';\n  }\n\n  /**\n   * Ex√©cute du code conditionnel selon l'environnement\n   */\n  runInEnvironment<T>(\n    handlers: {\n      development?: () => T;\n      staging?: () => T;\n      production?: () => T;\n      default?: () => T;\n    }\n  ): T | undefined {\n    const handler = handlers[this.environment] || handlers.default;\n    return handler?.();\n  }\n\n  /**\n   * Log conditionnel selon les feature flags\n   */\n  debugLog(message: string, ...args: any[]): void {\n    if (this.isEnabled('ENABLE_DEBUG_LOGGING')) {\n      logger.info(`üêõ [SYMBIONT Debug] ${message}`, ...args);\n    }\n  }\n\n  /**\n   * Performance profiling conditionnel\n   */\n  profileOperation<T>(name: string, operation: () => T): T {\n    if (!this.isEnabled('ENABLE_PERFORMANCE_PROFILING')) {\n      return operation();\n    }\n\n    const start = performance.now();\n    const result = operation();\n    const duration = performance.now() - start;\n    \n    logger.info(`‚è±Ô∏è [SYMBIONT Profile] ${name}: ${duration.toFixed(2)}ms`);\n    \n    return result;\n  }\n\n  /**\n   * Ex√©cution conditionnelle selon feature flag\n   */\n  whenEnabled<T>(flag: keyof FeatureFlags, operation: () => T): T | undefined {\n    return this.isEnabled(flag) ? operation() : undefined;\n  }\n\n  /**\n   * Utilitaire pour lire variables d'environnement boolean\n   */\n  private getEnvBoolean(key: string, defaultValue: boolean): boolean {\n    const value = process.env[key];\n    if (value === undefined) return defaultValue;\n    return value.toLowerCase() === 'true';\n  }\n\n  /**\n   * Validation de s√©curit√© - v√©rifie qu'on n'utilise pas de donn√©es mock en prod\n   */\n  validateProductionSafety(): void {\n    if (!this.isProduction()) return;\n\n    const unsafeFlags = [\n      'ENABLE_MOCK_DATA',\n      'ENABLE_DEBUG_LOGGING'\n    ];\n\n    const violations = unsafeFlags.filter(flag => \n      this.isEnabled(flag as keyof FeatureFlags)\n    );\n\n    if (violations.length > 0) {\n      throw new Error(\n        `üö® S√âCURIT√â: Flags dangereux activ√©s en production: ${violations.join(', ')}`\n      );\n    }\n  }\n}\n\nexport default FeatureFlagService;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}