28fc799c2e831dfceb97895f0b9c1390
"use strict";
/**
 * Tests pour le système de logging sécurisé
 */
Object.defineProperty(exports, "__esModule", { value: true });
const secureLogger_1 = require("../../src/shared/utils/secureLogger");
describe('SecureLogger', () => {
    let loggerInstance;
    let consoleSpy;
    beforeEach(() => {
        // Reset singleton instance for each test
        secureLogger_1.SecureLogger.instance = undefined;
        // Mock console methods
        consoleSpy = jest.spyOn(console, 'info').mockImplementation();
        jest.spyOn(console, 'warn').mockImplementation();
        jest.spyOn(console, 'error').mockImplementation();
        jest.spyOn(console, 'debug').mockImplementation();
        // Mock process.env
        Object.defineProperty(process, 'env', {
            value: { NODE_ENV: 'test' },
            writable: true,
        });
    });
    afterEach(() => {
        jest.restoreAllMocks();
    });
    describe('getInstance()', () => {
        it('should return singleton instance', () => {
            const instance1 = secureLogger_1.SecureLogger.getInstance();
            const instance2 = secureLogger_1.SecureLogger.getInstance();
            expect(instance1).toBe(instance2);
        });
        it('should configure logger with provided config', () => {
            const config = {
                level: secureLogger_1.LogLevel.WARN,
                enableConsole: false,
                enableStorage: false,
            };
            loggerInstance = secureLogger_1.SecureLogger.getInstance(config);
            // Log at DEBUG level (should be filtered out)
            loggerInstance.debug('test message');
            expect(consoleSpy).not.toHaveBeenCalled();
            // Log at WARN level (should pass through)
            loggerInstance.warn('warn message');
            expect(consoleSpy).not.toHaveBeenCalled(); // Console disabled
        });
    });
    describe('Data Sanitization', () => {
        beforeEach(() => {
            loggerInstance = secureLogger_1.SecureLogger.getInstance({
                level: secureLogger_1.LogLevel.DEBUG,
                enableConsole: true,
                enableStorage: true,
            });
        });
        it('should sanitize sensitive strings', () => {
            const sensitiveData = {
                password: 'secret123',
                token: 'abc123token',
                apiKey: 'sk-1234567890abcdef',
                email: 'user@example.com',
                normalData: 'this is fine',
            };
            loggerInstance.info('Test with sensitive data', sensitiveData);
            const logs = secureLogger_1.logger.getLogs();
            const lastLog = logs[logs.length - 1];
            expect(lastLog.data.password).toBe('[REDACTED]');
            expect(lastLog.data.token).toBe('[REDACTED]');
            expect(lastLog.data.apiKey).toBe('[REDACTED]');
            expect(lastLog.data.normalData).toBe('this is fine');
            expect(lastLog.sanitized).toBe(true);
        });
        it('should detect and sanitize pattern-based sensitive data', () => {
            const sensitiveString = 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9';
            loggerInstance.warn(sensitiveString);
            const logs = secureLogger_1.logger.getLogs();
            const lastLog = logs[logs.length - 1];
            expect(lastLog.message).toContain('[REDACTED]');
        });
        it('should sanitize nested objects', () => {
            const nestedData = {
                user: {
                    name: 'John',
                    password: 'secret',
                    settings: {
                        apiToken: 'token123',
                        theme: 'dark',
                    },
                },
            };
            loggerInstance.info('Nested data test', nestedData);
            const logs = secureLogger_1.logger.getLogs();
            const lastLog = logs[logs.length - 1];
            expect(lastLog.data.user.name).toBe('John');
            expect(lastLog.data.user.password).toBe('[REDACTED]');
            expect(lastLog.data.user.settings.apiToken).toBe('[REDACTED]');
            expect(lastLog.data.user.settings.theme).toBe('dark');
        });
        it('should sanitize arrays', () => {
            const arrayData = [
                { id: 1, secret: 'hidden' },
                { id: 2, name: 'visible' },
            ];
            loggerInstance.info('Array data test', arrayData);
            const logs = secureLogger_1.logger.getLogs();
            const lastLog = logs[logs.length - 1];
            expect(lastLog.data[0].id).toBe(1);
            expect(lastLog.data[0].secret).toBe('[REDACTED]');
            expect(lastLog.data[1].name).toBe('visible');
        });
    });
    describe('Log Levels', () => {
        beforeEach(() => {
            loggerInstance = secureLogger_1.SecureLogger.getInstance({
                level: secureLogger_1.LogLevel.INFO,
                enableConsole: true,
                enableStorage: true,
            });
        });
        it('should respect log level filtering', () => {
            loggerInstance.debug('debug message'); // Should be filtered
            loggerInstance.info('info message'); // Should pass
            loggerInstance.warn('warn message'); // Should pass
            loggerInstance.error('error message'); // Should pass
            const logs = secureLogger_1.logger.getLogs();
            expect(logs.length).toBe(3); // debug filtered out
            expect(logs[0].level).toBe(secureLogger_1.LogLevel.INFO);
            expect(logs[1].level).toBe(secureLogger_1.LogLevel.WARN);
            expect(logs[2].level).toBe(secureLogger_1.LogLevel.ERROR);
        });
        it('should log to appropriate console methods', () => {
            const debugSpy = jest.spyOn(console, 'debug').mockImplementation();
            const infoSpy = jest.spyOn(console, 'info').mockImplementation();
            const warnSpy = jest.spyOn(console, 'warn').mockImplementation();
            const errorSpy = jest.spyOn(console, 'error').mockImplementation();
            secureLogger_1.logger.setLevel(secureLogger_1.LogLevel.DEBUG);
            loggerInstance.debug('debug');
            loggerInstance.info('info');
            loggerInstance.warn('warn');
            loggerInstance.error('error');
            secureLogger_1.logger.fatal('fatal');
            expect(debugSpy).toHaveBeenCalled();
            expect(infoSpy).toHaveBeenCalled();
            expect(warnSpy).toHaveBeenCalled();
            expect(errorSpy).toHaveBeenCalledTimes(2); // error + fatal
        });
    });
    describe('Log Storage', () => {
        beforeEach(() => {
            loggerInstance = secureLogger_1.SecureLogger.getInstance({
                level: secureLogger_1.LogLevel.DEBUG,
                enableConsole: false,
                enableStorage: true,
                maxStorageEntries: 3,
            });
        });
        it('should store logs with proper structure', () => {
            loggerInstance.info('test message', { name: 'value' }, 'TestContext');
            const logs = secureLogger_1.logger.getLogs();
            const log = logs[0];
            expect(log.timestamp).toBeGreaterThan(0);
            expect(log.level).toBe(secureLogger_1.LogLevel.INFO);
            expect(log.message).toBe('test message');
            expect(log.data).toEqual({ name: 'value' });
            expect(log.context).toBe('TestContext');
            expect(log.sanitized).toBe(true);
        });
        it('should limit stored entries', () => {
            loggerInstance.info('message 1');
            loggerInstance.info('message 2');
            loggerInstance.info('message 3');
            loggerInstance.info('message 4'); // Should cause oldest to be removed
            const logs = secureLogger_1.logger.getLogs();
            expect(logs.length).toBe(3);
            expect(logs[0].message).toBe('message 2');
            expect(logs[2].message).toBe('message 4');
        });
        it('should filter logs by level when retrieving', () => {
            loggerInstance.debug('debug');
            loggerInstance.info('info');
            loggerInstance.warn('warn');
            loggerInstance.error('error');
            const errorLogs = secureLogger_1.logger.getLogs(secureLogger_1.LogLevel.ERROR);
            expect(errorLogs.length).toBe(1);
            expect(errorLogs[0].level).toBe(secureLogger_1.LogLevel.ERROR);
            const warnAndAbove = secureLogger_1.logger.getLogs(secureLogger_1.LogLevel.WARN);
            expect(warnAndAbove.length).toBe(2);
        });
    });
    describe('Production Mode', () => {
        beforeEach(() => {
            // Mock production environment
            Object.defineProperty(process, 'env', {
                value: { NODE_ENV: 'production' },
                writable: true,
            });
            // Mock Chrome extension environment
            Object.defineProperty(global, 'chrome', {
                value: {
                    runtime: {
                        getManifest: () => ({ name: 'test' }),
                    },
                },
                writable: true,
            });
        });
        afterEach(() => {
            delete global.chrome;
        });
        it('should disable console in production by default', () => {
            loggerInstance = secureLogger_1.SecureLogger.getInstance();
            loggerInstance.info('production message');
            expect(consoleSpy).not.toHaveBeenCalled();
            const logs = secureLogger_1.logger.getLogs();
            expect(logs.length).toBe(1); // Still stored
        });
    });
    describe('Utility Methods', () => {
        beforeEach(() => {
            loggerInstance = secureLogger_1.SecureLogger.getInstance({
                level: secureLogger_1.LogLevel.DEBUG,
                enableConsole: true,
                enableStorage: true,
            });
        });
        it('should change log level dynamically', () => {
            secureLogger_1.logger.setLevel(secureLogger_1.LogLevel.WARN);
            loggerInstance.debug('debug'); // Should be filtered
            loggerInstance.info('info'); // Should be filtered
            loggerInstance.warn('warn'); // Should pass
            const logs = secureLogger_1.logger.getLogs();
            expect(logs.length).toBe(1);
            expect(logs[0].level).toBe(secureLogger_1.LogLevel.WARN);
        });
        it('should enable/disable console dynamically', () => {
            secureLogger_1.logger.enableConsole(false);
            loggerInstance.info('test');
            expect(consoleSpy).not.toHaveBeenCalled();
            secureLogger_1.logger.enableConsole(true);
            loggerInstance.info('test2');
            expect(consoleSpy).toHaveBeenCalled();
        });
        it('should clear logs', () => {
            loggerInstance.info('message 1');
            loggerInstance.info('message 2');
            expect(secureLogger_1.logger.getLogs().length).toBe(2);
            secureLogger_1.logger.clearLogs();
            expect(secureLogger_1.logger.getLogs().length).toBe(0);
        });
        it('should export logs as JSON', () => {
            loggerInstance.info('message 1', { data: 'test' });
            loggerInstance.warn('message 2');
            const exported = secureLogger_1.logger.exportLogs();
            const parsed = JSON.parse(exported);
            expect(Array.isArray(parsed)).toBe(true);
            expect(parsed.length).toBe(2);
            expect(parsed[0].message).toBe('message 1');
            expect(parsed[1].message).toBe('message 2');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL3dvcmtzcGFjZXMvU1lNQklPTlQvX190ZXN0c19fL3NlY3VyaXR5L3NlY3VyZUxvZ2dlci50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7R0FFRzs7QUFFSCxzRUFBcUY7QUFFckYsUUFBUSxDQUFDLGNBQWMsRUFBRSxHQUFHLEVBQUU7SUFDNUIsSUFBSSxjQUE0QixDQUFDO0lBQ2pDLElBQUksVUFBNEIsQ0FBQztJQUVqQyxVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ2QseUNBQXlDO1FBQ3hDLDJCQUFvQixDQUFDLFFBQVEsR0FBRyxTQUFTLENBQUM7UUFFM0MsdUJBQXVCO1FBQ3ZCLFVBQVUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1FBQzlELElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDLGtCQUFrQixFQUFFLENBQUM7UUFDakQsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztRQUNsRCxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1FBRWxELG1CQUFtQjtRQUNuQixNQUFNLENBQUMsY0FBYyxDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUU7WUFDcEMsS0FBSyxFQUFFLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRTtZQUMzQixRQUFRLEVBQUUsSUFBSTtTQUNmLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsU0FBUyxDQUFDLEdBQUcsRUFBRTtRQUNiLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQUN6QixDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxlQUFlLEVBQUUsR0FBRyxFQUFFO1FBQzdCLEVBQUUsQ0FBQyxrQ0FBa0MsRUFBRSxHQUFHLEVBQUU7WUFDMUMsTUFBTSxTQUFTLEdBQUcsMkJBQVksQ0FBQyxXQUFX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ZXN0c19fL3NlY3VyaXR5L3NlY3VyZUxvZ2dlci50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGVzdHMgcG91ciBsZSBzeXN0w6htZSBkZSBsb2dnaW5nIHPDqWN1cmlzw6lcbiAqL1xuXG5pbXBvcnQgeyBTZWN1cmVMb2dnZXIsIExvZ0xldmVsLCBsb2dnZXIgfSBmcm9tICcuLi8uLi9zcmMvc2hhcmVkL3V0aWxzL3NlY3VyZUxvZ2dlcic7XG5cbmRlc2NyaWJlKCdTZWN1cmVMb2dnZXInLCAoKSA9PiB7XG4gIGxldCBsb2dnZXJJbnN0YW5jZTogU2VjdXJlTG9nZ2VyO1xuICBsZXQgY29uc29sZVNweTogamVzdC5TcHlJbnN0YW5jZTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAvLyBSZXNldCBzaW5nbGV0b24gaW5zdGFuY2UgZm9yIGVhY2ggdGVzdFxuICAgIChTZWN1cmVMb2dnZXIgYXMgYW55KS5pbnN0YW5jZSA9IHVuZGVmaW5lZDtcbiAgICBcbiAgICAvLyBNb2NrIGNvbnNvbGUgbWV0aG9kc1xuICAgIGNvbnNvbGVTcHkgPSBqZXN0LnNweU9uKGNvbnNvbGUsICdpbmZvJykubW9ja0ltcGxlbWVudGF0aW9uKCk7XG4gICAgamVzdC5zcHlPbihjb25zb2xlLCAnd2FybicpLm1vY2tJbXBsZW1lbnRhdGlvbigpO1xuICAgIGplc3Quc3B5T24oY29uc29sZSwgJ2Vycm9yJykubW9ja0ltcGxlbWVudGF0aW9uKCk7XG4gICAgamVzdC5zcHlPbihjb25zb2xlLCAnZGVidWcnKS5tb2NrSW1wbGVtZW50YXRpb24oKTtcbiAgICBcbiAgICAvLyBNb2NrIHByb2Nlc3MuZW52XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb2Nlc3MsICdlbnYnLCB7XG4gICAgICB2YWx1ZTogeyBOT0RFX0VOVjogJ3Rlc3QnIH0sXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBqZXN0LnJlc3RvcmVBbGxNb2NrcygpO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0SW5zdGFuY2UoKScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBzaW5nbGV0b24gaW5zdGFuY2UnLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbnN0YW5jZTEgPSBTZWN1cmVMb2dnZXIuZ2V0SW5zdGFuY2UoKTtcbiAgICAgIGNvbnN0IGluc3RhbmNlMiA9IFNlY3VyZUxvZ2dlci5nZXRJbnN0YW5jZSgpO1xuICAgICAgZXhwZWN0KGluc3RhbmNlMSkudG9CZShpbnN0YW5jZTIpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjb25maWd1cmUgbG9nZ2VyIHdpdGggcHJvdmlkZWQgY29uZmlnJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgICBsZXZlbDogTG9nTGV2ZWwuV0FSTixcbiAgICAgICAgZW5hYmxlQ29uc29sZTogZmFsc2UsXG4gICAgICAgIGVuYWJsZVN0b3JhZ2U6IGZhbHNlLFxuICAgICAgfTtcbiAgICAgIGxvZ2dlckluc3RhbmNlID0gU2VjdXJlTG9nZ2VyLmdldEluc3RhbmNlKGNvbmZpZyk7XG4gICAgICBcbiAgICAgIC8vIExvZyBhdCBERUJVRyBsZXZlbCAoc2hvdWxkIGJlIGZpbHRlcmVkIG91dClcbiAgICAgIGxvZ2dlckluc3RhbmNlLmRlYnVnKCd0ZXN0IG1lc3NhZ2UnKTtcbiAgICAgIGV4cGVjdChjb25zb2xlU3B5KS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgXG4gICAgICAvLyBMb2cgYXQgV0FSTiBsZXZlbCAoc2hvdWxkIHBhc3MgdGhyb3VnaClcbiAgICAgIGxvZ2dlckluc3RhbmNlLndhcm4oJ3dhcm4gbWVzc2FnZScpO1xuICAgICAgZXhwZWN0KGNvbnNvbGVTcHkpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7IC8vIENvbnNvbGUgZGlzYWJsZWRcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0RhdGEgU2FuaXRpemF0aW9uJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgbG9nZ2VySW5zdGFuY2UgPSBTZWN1cmVMb2dnZXIuZ2V0SW5zdGFuY2Uoe1xuICAgICAgICBsZXZlbDogTG9nTGV2ZWwuREVCVUcsXG4gICAgICAgIGVuYWJsZUNvbnNvbGU6IHRydWUsXG4gICAgICAgIGVuYWJsZVN0b3JhZ2U6IHRydWUsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2FuaXRpemUgc2Vuc2l0aXZlIHN0cmluZ3MnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzZW5zaXRpdmVEYXRhID0ge1xuICAgICAgICBwYXNzd29yZDogJ3NlY3JldDEyMycsXG4gICAgICAgIHRva2VuOiAnYWJjMTIzdG9rZW4nLFxuICAgICAgICBhcGlLZXk6ICdzay0xMjM0NTY3ODkwYWJjZGVmJyxcbiAgICAgICAgZW1haWw6ICd1c2VyQGV4YW1wbGUuY29tJyxcbiAgICAgICAgbm9ybWFsRGF0YTogJ3RoaXMgaXMgZmluZScsXG4gICAgICB9O1xuXG4gICAgICBsb2dnZXJJbnN0YW5jZS5pbmZvKCdUZXN0IHdpdGggc2Vuc2l0aXZlIGRhdGEnLCBzZW5zaXRpdmVEYXRhKTtcbiAgICAgIFxuICAgICAgY29uc3QgbG9ncyA9IGxvZ2dlci5nZXRMb2dzKCk7XG4gICAgICBjb25zdCBsYXN0TG9nID0gbG9nc1tsb2dzLmxlbmd0aCAtIDFdO1xuICAgICAgXG4gICAgICBleHBlY3QobGFzdExvZy5kYXRhLnBhc3N3b3JkKS50b0JlKCdbUkVEQUNURURdJyk7XG4gICAgICBleHBlY3QobGFzdExvZy5kYXRhLnRva2VuKS50b0JlKCdbUkVEQUNURURdJyk7XG4gICAgICBleHBlY3QobGFzdExvZy5kYXRhLmFwaUtleSkudG9CZSgnW1JFREFDVEVEXScpO1xuICAgICAgZXhwZWN0KGxhc3RMb2cuZGF0YS5ub3JtYWxEYXRhKS50b0JlKCd0aGlzIGlzIGZpbmUnKTtcbiAgICAgIGV4cGVjdChsYXN0TG9nLnNhbml0aXplZCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IGFuZCBzYW5pdGl6ZSBwYXR0ZXJuLWJhc2VkIHNlbnNpdGl2ZSBkYXRhJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc2Vuc2l0aXZlU3RyaW5nID0gJ0JlYXJlciBleUpoYkdjaU9pSklVekkxTmlJc0luUjVjQ0k2SWtwWFZDSjknO1xuICAgICAgXG4gICAgICBsb2dnZXJJbnN0YW5jZS53YXJuKHNlbnNpdGl2ZVN0cmluZyk7XG4gICAgICBcbiAgICAgIGNvbnN0IGxvZ3MgPSBsb2dnZXIuZ2V0TG9ncygpO1xuICAgICAgY29uc3QgbGFzdExvZyA9IGxvZ3NbbG9ncy5sZW5ndGggLSAxXTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGxhc3RMb2cubWVzc2FnZSkudG9Db250YWluKCdbUkVEQUNURURdJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNhbml0aXplIG5lc3RlZCBvYmplY3RzJywgKCkgPT4ge1xuICAgICAgY29uc3QgbmVzdGVkRGF0YSA9IHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIG5hbWU6ICdKb2huJyxcbiAgICAgICAgICBwYXNzd29yZDogJ3NlY3JldCcsXG4gICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgIGFwaVRva2VuOiAndG9rZW4xMjMnLFxuICAgICAgICAgICAgdGhlbWU6ICdkYXJrJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgbG9nZ2VySW5zdGFuY2UuaW5mbygnTmVzdGVkIGRhdGEgdGVzdCcsIG5lc3RlZERhdGEpO1xuICAgICAgXG4gICAgICBjb25zdCBsb2dzID0gbG9nZ2VyLmdldExvZ3MoKTtcbiAgICAgIGNvbnN0IGxhc3RMb2cgPSBsb2dzW2xvZ3MubGVuZ3RoIC0gMV07XG4gICAgICBcbiAgICAgIGV4cGVjdChsYXN0TG9nLmRhdGEudXNlci5uYW1lKS50b0JlKCdKb2huJyk7XG4gICAgICBleHBlY3QobGFzdExvZy5kYXRhLnVzZXIucGFzc3dvcmQpLnRvQmUoJ1tSRURBQ1RFRF0nKTtcbiAgICAgIGV4cGVjdChsYXN0TG9nLmRhdGEudXNlci5zZXR0aW5ncy5hcGlUb2tlbikudG9CZSgnW1JFREFDVEVEXScpO1xuICAgICAgZXhwZWN0KGxhc3RMb2cuZGF0YS51c2VyLnNldHRpbmdzLnRoZW1lKS50b0JlKCdkYXJrJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNhbml0aXplIGFycmF5cycsICgpID0+IHtcbiAgICAgIGNvbnN0IGFycmF5RGF0YSA9IFtcbiAgICAgICAgeyBpZDogMSwgc2VjcmV0OiAnaGlkZGVuJyB9LFxuICAgICAgICB7IGlkOiAyLCBuYW1lOiAndmlzaWJsZScgfSxcbiAgICAgIF07XG5cbiAgICAgIGxvZ2dlckluc3RhbmNlLmluZm8oJ0FycmF5IGRhdGEgdGVzdCcsIGFycmF5RGF0YSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGxvZ3MgPSBsb2dnZXIuZ2V0TG9ncygpO1xuICAgICAgY29uc3QgbGFzdExvZyA9IGxvZ3NbbG9ncy5sZW5ndGggLSAxXTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGxhc3RMb2cuZGF0YVswXS5pZCkudG9CZSgxKTtcbiAgICAgIGV4cGVjdChsYXN0TG9nLmRhdGFbMF0uc2VjcmV0KS50b0JlKCdbUkVEQUNURURdJyk7XG4gICAgICBleHBlY3QobGFzdExvZy5kYXRhWzFdLm5hbWUpLnRvQmUoJ3Zpc2libGUnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0xvZyBMZXZlbHMnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBsb2dnZXJJbnN0YW5jZSA9IFNlY3VyZUxvZ2dlci5nZXRJbnN0YW5jZSh7XG4gICAgICAgIGxldmVsOiBMb2dMZXZlbC5JTkZPLFxuICAgICAgICBlbmFibGVDb25zb2xlOiB0cnVlLFxuICAgICAgICBlbmFibGVTdG9yYWdlOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlc3BlY3QgbG9nIGxldmVsIGZpbHRlcmluZycsICgpID0+IHtcbiAgICAgIGxvZ2dlckluc3RhbmNlLmRlYnVnKCdkZWJ1ZyBtZXNzYWdlJyk7IC8vIFNob3VsZCBiZSBmaWx0ZXJlZFxuICAgICAgbG9nZ2VySW5zdGFuY2UuaW5mbygnaW5mbyBtZXNzYWdlJyk7ICAgLy8gU2hvdWxkIHBhc3NcbiAgICAgIGxvZ2dlckluc3RhbmNlLndhcm4oJ3dhcm4gbWVzc2FnZScpOyAgIC8vIFNob3VsZCBwYXNzXG4gICAgICBsb2dnZXJJbnN0YW5jZS5lcnJvcignZXJyb3IgbWVzc2FnZScpOyAvLyBTaG91bGQgcGFzc1xuXG4gICAgICBjb25zdCBsb2dzID0gbG9nZ2VyLmdldExvZ3MoKTtcbiAgICAgIGV4cGVjdChsb2dzLmxlbmd0aCkudG9CZSgzKTsgLy8gZGVidWcgZmlsdGVyZWQgb3V0XG4gICAgICBleHBlY3QobG9nc1swXS5sZXZlbCkudG9CZShMb2dMZXZlbC5JTkZPKTtcbiAgICAgIGV4cGVjdChsb2dzWzFdLmxldmVsKS50b0JlKExvZ0xldmVsLldBUk4pO1xuICAgICAgZXhwZWN0KGxvZ3NbMl0ubGV2ZWwpLnRvQmUoTG9nTGV2ZWwuRVJST1IpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBsb2cgdG8gYXBwcm9wcmlhdGUgY29uc29sZSBtZXRob2RzJywgKCkgPT4ge1xuICAgICAgY29uc3QgZGVidWdTcHkgPSBqZXN0LnNweU9uKGNvbnNvbGUsICdkZWJ1ZycpLm1vY2tJbXBsZW1lbnRhdGlvbigpO1xuICAgICAgY29uc3QgaW5mb1NweSA9IGplc3Quc3B5T24oY29uc29sZSwgJ2luZm8nKS5tb2NrSW1wbGVtZW50YXRpb24oKTtcbiAgICAgIGNvbnN0IHdhcm5TcHkgPSBqZXN0LnNweU9uKGNvbnNvbGUsICd3YXJuJykubW9ja0ltcGxlbWVudGF0aW9uKCk7XG4gICAgICBjb25zdCBlcnJvclNweSA9IGplc3Quc3B5T24oY29uc29sZSwgJ2Vycm9yJykubW9ja0ltcGxlbWVudGF0aW9uKCk7XG5cbiAgICAgIGxvZ2dlci5zZXRMZXZlbChMb2dMZXZlbC5ERUJVRyk7XG4gICAgICBcbiAgICAgIGxvZ2dlckluc3RhbmNlLmRlYnVnKCdkZWJ1ZycpO1xuICAgICAgbG9nZ2VySW5zdGFuY2UuaW5mbygnaW5mbycpO1xuICAgICAgbG9nZ2VySW5zdGFuY2Uud2Fybignd2FybicpO1xuICAgICAgbG9nZ2VySW5zdGFuY2UuZXJyb3IoJ2Vycm9yJyk7XG4gICAgICBsb2dnZXIuZmF0YWwoJ2ZhdGFsJyk7XG5cbiAgICAgIGV4cGVjdChkZWJ1Z1NweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KGluZm9TcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdCh3YXJuU3B5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QoZXJyb3JTcHkpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygyKTsgLy8gZXJyb3IgKyBmYXRhbFxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTG9nIFN0b3JhZ2UnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBsb2dnZXJJbnN0YW5jZSA9IFNlY3VyZUxvZ2dlci5nZXRJbnN0YW5jZSh7XG4gICAgICAgIGxldmVsOiBMb2dMZXZlbC5ERUJVRyxcbiAgICAgICAgZW5hYmxlQ29uc29sZTogZmFsc2UsXG4gICAgICAgIGVuYWJsZVN0b3JhZ2U6IHRydWUsXG4gICAgICAgIG1heFN0b3JhZ2VFbnRyaWVzOiAzLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN0b3JlIGxvZ3Mgd2l0aCBwcm9wZXIgc3RydWN0dXJlJywgKCkgPT4ge1xuICAgICAgbG9nZ2VySW5zdGFuY2UuaW5mbygndGVzdCBtZXNzYWdlJywgeyBuYW1lOiAndmFsdWUnIH0sICdUZXN0Q29udGV4dCcpO1xuICAgICAgXG4gICAgICBjb25zdCBsb2dzID0gbG9nZ2VyLmdldExvZ3MoKTtcbiAgICAgIGNvbnN0IGxvZyA9IGxvZ3NbMF07XG4gICAgICBcbiAgICAgIGV4cGVjdChsb2cudGltZXN0YW1wKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QobG9nLmxldmVsKS50b0JlKExvZ0xldmVsLklORk8pO1xuICAgICAgZXhwZWN0KGxvZy5tZXNzYWdlKS50b0JlKCd0ZXN0IG1lc3NhZ2UnKTtcbiAgICAgIGV4cGVjdChsb2cuZGF0YSkudG9FcXVhbCh7IG5hbWU6ICd2YWx1ZScgfSk7XG4gICAgICBleHBlY3QobG9nLmNvbnRleHQpLnRvQmUoJ1Rlc3RDb250ZXh0Jyk7XG4gICAgICBleHBlY3QobG9nLnNhbml0aXplZCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbGltaXQgc3RvcmVkIGVudHJpZXMnLCAoKSA9PiB7XG4gICAgICBsb2dnZXJJbnN0YW5jZS5pbmZvKCdtZXNzYWdlIDEnKTtcbiAgICAgIGxvZ2dlckluc3RhbmNlLmluZm8oJ21lc3NhZ2UgMicpO1xuICAgICAgbG9nZ2VySW5zdGFuY2UuaW5mbygnbWVzc2FnZSAzJyk7XG4gICAgICBsb2dnZXJJbnN0YW5jZS5pbmZvKCdtZXNzYWdlIDQnKTsgLy8gU2hvdWxkIGNhdXNlIG9sZGVzdCB0byBiZSByZW1vdmVkXG4gICAgICBcbiAgICAgIGNvbnN0IGxvZ3MgPSBsb2dnZXIuZ2V0TG9ncygpO1xuICAgICAgZXhwZWN0KGxvZ3MubGVuZ3RoKS50b0JlKDMpO1xuICAgICAgZXhwZWN0KGxvZ3NbMF0ubWVzc2FnZSkudG9CZSgnbWVzc2FnZSAyJyk7XG4gICAgICBleHBlY3QobG9nc1syXS5tZXNzYWdlKS50b0JlKCdtZXNzYWdlIDQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZmlsdGVyIGxvZ3MgYnkgbGV2ZWwgd2hlbiByZXRyaWV2aW5nJywgKCkgPT4ge1xuICAgICAgbG9nZ2VySW5zdGFuY2UuZGVidWcoJ2RlYnVnJyk7XG4gICAgICBsb2dnZXJJbnN0YW5jZS5pbmZvKCdpbmZvJyk7XG4gICAgICBsb2dnZXJJbnN0YW5jZS53YXJuKCd3YXJuJyk7XG4gICAgICBsb2dnZXJJbnN0YW5jZS5lcnJvcignZXJyb3InKTtcblxuICAgICAgY29uc3QgZXJyb3JMb2dzID0gbG9nZ2VyLmdldExvZ3MoTG9nTGV2ZWwuRVJST1IpO1xuICAgICAgZXhwZWN0KGVycm9yTG9ncy5sZW5ndGgpLnRvQmUoMSk7XG4gICAgICBleHBlY3QoZXJyb3JMb2dzWzBdLmxldmVsKS50b0JlKExvZ0xldmVsLkVSUk9SKTtcblxuICAgICAgY29uc3Qgd2FybkFuZEFib3ZlID0gbG9nZ2VyLmdldExvZ3MoTG9nTGV2ZWwuV0FSTik7XG4gICAgICBleHBlY3Qod2FybkFuZEFib3ZlLmxlbmd0aCkudG9CZSgyKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Byb2R1Y3Rpb24gTW9kZScsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIC8vIE1vY2sgcHJvZHVjdGlvbiBlbnZpcm9ubWVudFxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb2Nlc3MsICdlbnYnLCB7XG4gICAgICAgIHZhbHVlOiB7IE5PREVfRU5WOiAncHJvZHVjdGlvbicgfSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gTW9jayBDaHJvbWUgZXh0ZW5zaW9uIGVudmlyb25tZW50XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsLCAnY2hyb21lJywge1xuICAgICAgICB2YWx1ZToge1xuICAgICAgICAgIHJ1bnRpbWU6IHtcbiAgICAgICAgICAgIGdldE1hbmlmZXN0OiAoKSA9PiAoeyBuYW1lOiAndGVzdCcgfSksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgICBkZWxldGUgKGdsb2JhbCBhcyBhbnkpLmNocm9tZTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzYWJsZSBjb25zb2xlIGluIHByb2R1Y3Rpb24gYnkgZGVmYXVsdCcsICgpID0+IHtcbiAgICAgIGxvZ2dlckluc3RhbmNlID0gU2VjdXJlTG9nZ2VyLmdldEluc3RhbmNlKCk7XG4gICAgICBcbiAgICAgIGxvZ2dlckluc3RhbmNlLmluZm8oJ3Byb2R1Y3Rpb24gbWVzc2FnZScpO1xuICAgICAgXG4gICAgICBleHBlY3QoY29uc29sZVNweSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIFxuICAgICAgY29uc3QgbG9ncyA9IGxvZ2dlci5nZXRMb2dzKCk7XG4gICAgICBleHBlY3QobG9ncy5sZW5ndGgpLnRvQmUoMSk7IC8vIFN0aWxsIHN0b3JlZFxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVXRpbGl0eSBNZXRob2RzJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgbG9nZ2VySW5zdGFuY2UgPSBTZWN1cmVMb2dnZXIuZ2V0SW5zdGFuY2Uoe1xuICAgICAgICBsZXZlbDogTG9nTGV2ZWwuREVCVUcsXG4gICAgICAgIGVuYWJsZUNvbnNvbGU6IHRydWUsXG4gICAgICAgIGVuYWJsZVN0b3JhZ2U6IHRydWUsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2hhbmdlIGxvZyBsZXZlbCBkeW5hbWljYWxseScsICgpID0+IHtcbiAgICAgIGxvZ2dlci5zZXRMZXZlbChMb2dMZXZlbC5XQVJOKTtcbiAgICAgIFxuICAgICAgbG9nZ2VySW5zdGFuY2UuZGVidWcoJ2RlYnVnJyk7IC8vIFNob3VsZCBiZSBmaWx0ZXJlZFxuICAgICAgbG9nZ2VySW5zdGFuY2UuaW5mbygnaW5mbycpOyAgIC8vIFNob3VsZCBiZSBmaWx0ZXJlZFxuICAgICAgbG9nZ2VySW5zdGFuY2Uud2Fybignd2FybicpOyAgIC8vIFNob3VsZCBwYXNzXG4gICAgICBcbiAgICAgIGNvbnN0IGxvZ3MgPSBsb2dnZXIuZ2V0TG9ncygpO1xuICAgICAgZXhwZWN0KGxvZ3MubGVuZ3RoKS50b0JlKDEpO1xuICAgICAgZXhwZWN0KGxvZ3NbMF0ubGV2ZWwpLnRvQmUoTG9nTGV2ZWwuV0FSTik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGVuYWJsZS9kaXNhYmxlIGNvbnNvbGUgZHluYW1pY2FsbHknLCAoKSA9PiB7XG4gICAgICBsb2dnZXIuZW5hYmxlQ29uc29sZShmYWxzZSk7XG4gICAgICBsb2dnZXJJbnN0YW5jZS5pbmZvKCd0ZXN0Jyk7XG4gICAgICBleHBlY3QoY29uc29sZVNweSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIFxuICAgICAgbG9nZ2VyLmVuYWJsZUNvbnNvbGUodHJ1ZSk7XG4gICAgICBsb2dnZXJJbnN0YW5jZS5pbmZvKCd0ZXN0MicpO1xuICAgICAgZXhwZWN0KGNvbnNvbGVTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2xlYXIgbG9ncycsICgpID0+IHtcbiAgICAgIGxvZ2dlckluc3RhbmNlLmluZm8oJ21lc3NhZ2UgMScpO1xuICAgICAgbG9nZ2VySW5zdGFuY2UuaW5mbygnbWVzc2FnZSAyJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChsb2dnZXIuZ2V0TG9ncygpLmxlbmd0aCkudG9CZSgyKTtcbiAgICAgIFxuICAgICAgbG9nZ2VyLmNsZWFyTG9ncygpO1xuICAgICAgXG4gICAgICBleHBlY3QobG9nZ2VyLmdldExvZ3MoKS5sZW5ndGgpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGV4cG9ydCBsb2dzIGFzIEpTT04nLCAoKSA9PiB7XG4gICAgICBsb2dnZXJJbnN0YW5jZS5pbmZvKCdtZXNzYWdlIDEnLCB7IGRhdGE6ICd0ZXN0JyB9KTtcbiAgICAgIGxvZ2dlckluc3RhbmNlLndhcm4oJ21lc3NhZ2UgMicpO1xuICAgICAgXG4gICAgICBjb25zdCBleHBvcnRlZCA9IGxvZ2dlci5leHBvcnRMb2dzKCk7XG4gICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGV4cG9ydGVkKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocGFyc2VkKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChwYXJzZWQubGVuZ3RoKS50b0JlKDIpO1xuICAgICAgZXhwZWN0KHBhcnNlZFswXS5tZXNzYWdlKS50b0JlKCdtZXNzYWdlIDEnKTtcbiAgICAgIGV4cGVjdChwYXJzZWRbMV0ubWVzc2FnZSkudG9CZSgnbWVzc2FnZSAyJyk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sInZlcnNpb24iOjN9